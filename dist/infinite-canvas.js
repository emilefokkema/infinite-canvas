!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.InfiniteCanvas=e():t.InfiniteCanvas=e()}(this,(()=>(()=>{var t={306:(t,e,n)=>{"use strict";n.r(e),n.d(e,{InfiniteCanvas:()=>_r});var o,r,i=function(){function t(t){this.viewBox=t}return t.prototype.restore=function(){this.viewBox.restoreState()},t.prototype.save=function(){this.viewBox.saveState()},t}(),s=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.mod=function(){return Math.sqrt(this.modSq())},t.prototype.modSq=function(){return this.x*this.x+this.y*this.y},t.prototype.minus=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.plus=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.getPerpendicular=function(){return new t(-this.y,this.x)},t.prototype.scale=function(e){return new t(e*this.x,e*this.y)},t.prototype.projectOn=function(t){return t.scale(this.dot(t)/t.modSq())},t.prototype.matrix=function(e,n,o,r){return new t(e*this.x+n*this.y,o*this.x+r*this.y)},t.prototype.inSameDirectionAs=function(t){return 0===this.cross(t)&&this.dot(t)>=0},t.prototype.isInOppositeDirectionAs=function(t){return 0===this.cross(t)&&this.dot(t)<0},t.prototype.isOnSameSideOfOriginAs=function(t,e){return this.isInSmallerAngleBetweenPoints(t,e)||t.isInSmallerAngleBetweenPoints(this,e)||e.isInSmallerAngleBetweenPoints(this,t)},t.prototype.isInSmallerAngleBetweenPoints=function(t,e){var n=t.cross(e);return n>0?t.cross(this)>=0&&this.cross(e)>=0:n<0?t.cross(this)<=0&&this.cross(e)<=0:!(t.dot(e)>0)||0===this.cross(t)&&this.dot(t)>0},t.origin=new t(0,0),t}(),a=function(){function t(t,e,n,o,r,i){this.a=t,this.b=e,this.c=n,this.d=o,this.e=r,this.f=i,this.scale=Math.sqrt(t*o-e*n)}return t.prototype.getMaximumLineWidthScale=function(){var t=this.a+this.c,e=this.b+this.d,n=this.a-this.c,o=this.b-this.d;return Math.sqrt(Math.max(t*t+e*e,n*n+o*o))},t.prototype.getRotationAngle=function(){var t=this.a/this.scale,e=this.b/this.scale;if(0===t)return e>0?Math.PI/2:3*Math.PI/2;var n=Math.atan(e/t);return t>0?e>0?n:0===e?0:2*Math.PI+n:e>0?Math.PI+n:0===e?Math.PI:Math.PI+n},t.prototype.applyToPointAtInfinity=function(t){return{direction:this.untranslated().apply(t.direction)}},t.prototype.apply=function(t){return new s(this.a*t.x+this.c*t.y+this.e,this.b*t.x+this.d*t.y+this.f)},t.prototype.untranslated=function(){var e=this.apply(s.origin),n=e.x,o=e.y;return this.before(t.translation(-n,-o))},t.prototype.before=function(e){return new t(e.a*this.a+e.c*this.b,e.b*this.a+e.d*this.b,e.a*this.c+e.c*this.d,e.b*this.c+e.d*this.d,e.a*this.e+e.c*this.f+e.e,e.b*this.e+e.d*this.f+e.f)},t.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f},t.prototype.inverse=function(){var e=this.a*this.d-this.b*this.c;if(0==e)throw"error calculating inverse: zero determinant";return new t(this.d/e,-this.b/e,-this.c/e,this.a/e,(this.c*this.f-this.d*this.e)/e,(this.b*this.e-this.a*this.f)/e)},t.translation=function(e,n){return new t(1,0,0,1,e,n)},t.scale=function(e){return new t(e,0,0,e,0,0)},t.zoom=function(e,n,o,r,i){var s=1-o;return void 0!==r?new t(o,0,0,o,e*s+r,n*s+i):new t(o,0,0,o,e*s,n*s)},t.translateZoom=function(e,n,o,r,i,s,a,c){var u=o-e,p=r-n,f=u*u+p*p;if(0===f)throw new Error("divide by 0");var l=a-i,h=c-s,y=l*l+h*h,d=Math.sqrt(y/f);return t.zoom(e,n,d,i-e,s-n)},t.rotation=function(e,n,o){var r=Math.cos(o),i=Math.sin(o),s=1-r;return new t(r,i,-i,r,e*s+n*i,-e*i+n*s)},t.translateRotateZoom=function(e,n,o,r,i,s,a,c){var u=o-e,p=r-n,f=u*u+p*p;if(0===f)throw new Error("divide by 0");var l=a-i,h=c-s,y=e*r-n*o,d=o*u+r*p,v=e*u+n*p,g=(u*l+p*h)/f,m=(u*h-p*l)/f;return new t(g,m,-m,g,(i*d-a*v-y*h)/f,(s*d-c*v+y*l)/f)},t.identity=new t(1,0,0,1,0,0),t}(),c=function(){function t(t){this.propertyName=t}return t.prototype.changeInstanceValue=function(t,e){return this.valuesAreEqual(t[this.propertyName],e)?t:t.changeProperty(this.propertyName,e)},t.prototype.isEqualForInstances=function(t,e){return this.valuesAreEqual(t[this.propertyName],e[this.propertyName])},t.prototype.getInstructionToChange=function(t,e,n){return this.valuesAreEqual(t[this.propertyName],e[this.propertyName])?function(){}:this.changeToNewValue(e[this.propertyName],n)},t.prototype.valueIsTransformableForInstance=function(t){return!0},t}(),u=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.valuesAreEqual=function(t,e){return t.equals(e)},e.prototype.changeToNewValue=function(t,e){return e.getTransformationInstruction(t)},e}(c))("transformation"),f=function(){function t(t){this.viewBox=t}return t.prototype.getTransform=function(){if(DOMMatrix){var t=this.viewBox.state.current.transformation;return new DOMMatrix([t.a,t.b,t.c,t.d,t.e,t.f])}},t.prototype.resetTransform=function(){this.viewBox.changeState((function(t){return p.changeInstanceValue(t,a.identity)}))},t.prototype.rotate=function(t){this.addTransformation(a.rotation(0,0,t))},t.prototype.scale=function(t,e){this.addTransformation(new a(t,0,0,e,0,0))},t.prototype.setTransform=function(t,e,n,o,r,i){var s,c,u,f,l,h;"number"==typeof t?(s=t,c=e,u=n,f=o,l=r,h=i):void 0!==t.a?(s=t.a,c=t.b,u=t.c,f=t.d,l=t.e,h=t.f):(s=t.m11,c=t.m12,u=t.m21,f=t.m22,l=t.m41,h=t.m42),this.viewBox.changeState((function(t){return p.changeInstanceValue(t,new a(s,c,u,f,l,h))}))},t.prototype.transform=function(t,e,n,o,r,i){this.addTransformation(new a(t,e,n,o,r,i))},t.prototype.translate=function(t,e){this.addTransformation(a.translation(t,e))},t.prototype.addTransformation=function(t){var e=this.viewBox.state.current.transformation,n=t.before(e);this.viewBox.changeState((function(t){return p.changeInstanceValue(t,n)}))},t}(),l=function(){},h=function(){},y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e){var n=t.call(this)||this;return n.fillStrokeStyle=e,n}return y(e,t),e.prototype.setTransform=function(t){this.fillStrokeStyle.setTransform(t)},e.prototype.getInstructionToSetUntransformed=function(t){var e=this;return function(n){n[t]=e.fillStrokeStyle}},e.prototype.getInstructionToSetTransformed=function(t){var e=this;return function(n){n[t]=e.fillStrokeStyle}},e}(h),v=function(){function t(t){this.propName=t}return t.prototype.changeInstanceValue=function(t,e){return t.changeProperty(this.propName,e)},t.prototype.isEqualForInstances=function(t,e){return t[this.propName]===e[this.propName]},t.prototype.getInstructionToChange=function(t,e){var n=this,o=e[this.propName];return this.isEqualForInstances(t,e)?o instanceof h&&t.fillAndStrokeStylesTransformed!==e.fillAndStrokeStylesTransformed?e.fillAndStrokeStylesTransformed?o.getInstructionToSetTransformed(this.propName):o.getInstructionToSetUntransformed(this.propName):function(){}:o instanceof h?e.fillAndStrokeStylesTransformed?o.getInstructionToSetTransformed(this.propName):o.getInstructionToSetUntransformed(this.propName):function(t){t[n.propName]=e[n.propName]}},t.prototype.valueIsTransformableForInstance=function(t){return!(t[this.propName]instanceof d)},t}(),g=new v("fillStyle"),m=new v("strokeStyle"),b=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"fillStyle",{set:function(t){this.viewBox.changeState((function(e){return g.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeStyle",{set:function(t){this.viewBox.changeState((function(e){return m.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t.prototype.createLinearGradient=function(t,e,n,o){return this.viewBox.createLinearGradient(t,e,n,o)},t.prototype.createPattern=function(t,e){return this.viewBox.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,o,r,i){return this.viewBox.createRadialGradient(t,e,n,o,r,i)},t.prototype.createConicGradient=function(t,e,n){return this.viewBox.createConicGradient(t,e,n)},t}(),P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.shadowColor=t}},e}(c))("shadowColor"),O=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.prototype.changeToNewValue=function(t){return function(e,n){var o=n.untranslated().apply(t),r=o.x,i=o.y;e.shadowOffsetX=r,e.shadowOffsetY=i}},e.prototype.valuesAreEqual=function(t,e){return t.x===e.x&&t.y==e.y},e.prototype.valuesAreEqualWhenTransformed=function(t,e){return 0===t.x&&0===t.y&&0===e.x&&0===e.y},e}(c),I=new C("shadowOffset"),T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e,n){e.shadowBlur=t*n.scale}},e}(c),_=new S("shadowBlur"),x=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"shadowBlur",{get:function(){return this.viewBox.state.current.shadowBlur},set:function(t){this.viewBox.changeState((function(e){return _.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetX",{get:function(){return this.viewBox.state.current.shadowOffset.x},set:function(t){var e=new s(t,this.viewBox.state.current.shadowOffset.y);this.viewBox.changeState((function(t){return I.changeInstanceValue(t,e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{get:function(){return this.viewBox.state.current.shadowOffset.y},set:function(t){var e=new s(this.viewBox.state.current.shadowOffset.x,t);this.viewBox.changeState((function(t){return I.changeInstanceValue(t,e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this.viewBox.state.current.shadowColor},set:function(t){this.viewBox.changeState((function(e){return w.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t}(),j=function(){},A=function(){function t(t){this.viewBox=t}return t.prototype.clearRect=function(t,e,n,o){this.viewBox.clearArea(t,e,n,o)},t.prototype.fillRect=function(t,e,n,o){this.viewBox.fillRect(t,e,n,o,(function(t){return t.fill()}))},t.prototype.strokeRect=function(t,e,n,o){this.viewBox.strokeRect(t,e,n,o)},t}(),B=function(){function t(t){this.viewBox=t}return t.prototype.isFillRule=function(t){return"evenodd"===t||"nonzero"===t},t.prototype.beginPath=function(){this.viewBox.beginPath()},t.prototype.clip=function(t,e){var n=this.isFillRule(t)?function(e){e.clip(t)}:function(t){t.clip()};this.viewBox.clipPath(n)},t.prototype.fill=function(t,e){if(t&&!this.isFillRule(t)||this.viewBox.currentPathCanBeFilled()){var n=this.isFillRule(t)?function(e){e.fill(t)}:function(t){t.fill()};this.viewBox.fillPath(n)}},t.prototype.isPointInPath=function(t,e,n,o){return!0},t.prototype.isPointInStroke=function(t,e,n){return!0},t.prototype.stroke=function(t){this.viewBox.strokePath()},t}(),L=function(){function t(){}return t.prototype.drawFocusIfNeeded=function(t,e){},t.prototype.scrollPathIntoView=function(t){},t}();!function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(r||(r={}));var D=function(){function t(t,e,n){this.point=t,this.halfPlane1=e,this.halfPlane2=n,this.normal1=e.normalTowardInterior,this.normal2=n.normalTowardInterior}return t.prototype.isExpandableToContainPoint=function(t){return this.halfPlane1.interiorContainsPoint(t)||this.halfPlane2.interiorContainsPoint(t)},t.prototype.isInSameHalfPlaneAs=function(t){return this.halfPlane1.containsPoint(t)||this.halfPlane2.containsPoint(t)},t.prototype.getHalfPlaneContaining=function(t){return this.halfPlane1.containsPoint(t)?this.halfPlane1:this.halfPlane2},t.prototype.expandToContainPoint=function(e){var n=this.halfPlane1.interiorContainsPoint(e)?this.halfPlane1:this.halfPlane2,o=e.minus(this.point).getPerpendicular();this.isContainedByHalfPlaneWithNormal(o)||(o=o.scale(-1));var r=new E(this.point,o);return{newHalfPlane:r,newVertex:new t(this.point,n,r)}},t.prototype.isContainedByHalfPlaneWithNormal=function(t){return t.isInSmallerAngleBetweenPoints(this.normal1,this.normal2)},t.prototype.containsPoint=function(t){return this.halfPlane1.containsPoint(t)&&this.halfPlane2.containsPoint(t)},t.prototype.containsLineSegmentWithDirection=function(t){return this.containsPoint(this.point.plus(t))||this.containsPoint(this.point.minus(t))},t.prototype.isContainedByVertex=function(t){return this.isContainedByHalfPlaneWithNormal(t.normal1)&&this.isContainedByHalfPlaneWithNormal(t.normal2)},t}(),E=function(){function t(t,e){this.base=t,this.normalTowardInterior=e,this.lengthOfNormal=e.mod()}return t.prototype.getDistanceFromEdge=function(t){return t.minus(this.base).dot(this.normalTowardInterior)/this.lengthOfNormal},t.prototype.transform=function(e){var n=e.apply(this.base),o=e.apply(this.base.plus(this.normalTowardInterior.getPerpendicular())),r=e.apply(this.base.plus(this.normalTowardInterior));return t.throughPointsAndContainingPoint(n,o,r)},t.prototype.complement=function(){return new t(this.base,this.normalTowardInterior.scale(-1))},t.prototype.expandByDistance=function(e){return new t(this.base.plus(this.normalTowardInterior.scale(-e/this.normalTowardInterior.mod())),this.normalTowardInterior)},t.prototype.expandToIncludePoint=function(e){return this.containsPoint(e)?this:new t(e,this.normalTowardInterior)},t.prototype.containsPoint=function(t){return this.getDistanceFromEdge(t)>=0},t.prototype.interiorContainsPoint=function(t){return this.getDistanceFromEdge(t)>0},t.prototype.containsInfinityInDirection=function(t){return t.dot(this.normalTowardInterior)>=0},t.prototype.isContainedByHalfPlane=function(t){return this.normalTowardInterior.inSameDirectionAs(t.normalTowardInterior)&&t.getDistanceFromEdge(this.base)>=0},t.prototype.intersectWithLine=function(t,e){return{point:(n=this.base,o=this.normalTowardInterior.getPerpendicular(),r=t,i=e,s=r.minus(n),a=i.cross(o),c=i.getPerpendicular().dot(s)/a,n.plus(o.scale(c))),halfPlane:this};var n,o,r,i,s,a,c},t.prototype.isParallelToLine=function(t,e){return 0===this.normalTowardInterior.getPerpendicular().cross(e)},t.prototype.getIntersectionWith=function(t){var e=this.intersectWithLine(t.base,t.normalTowardInterior.getPerpendicular());return new D(e.point,this,t)},t.throughPointsAndContainingPoint=function(e,n,o){for(var r=0,i=t.withBorderPoints(e,n);r<i.length;r++){var s=i[r];if(s.containsPoint(o))return s}},t.withBorderPointAndInfinityInDirection=function(e,n){return t.withBorderPoints(e,e.plus(n))},t.withBorderPoints=function(e,n){var o=n.minus(e).getPerpendicular();return[new t(e,o),new t(e,o.scale(-1))]},t}(),F=new(function(){function t(){}return t.prototype.expandToIncludePoint=function(t){return this},t.prototype.expandToIncludePolygon=function(t){return this},t.prototype.expandToIncludeInfinityInDirection=function(t){return this},t.prototype.intersects=function(t){return!0},t.prototype.expandToInclude=function(t){return this},t.prototype.transform=function(t){return this},t.prototype.intersectWithLineSegment=function(t){return t},t.prototype.contains=function(t){return!0},t.prototype.intersectWith=function(t){return t},t.prototype.intersectWithRay=function(t){return t},t.prototype.intersectWithLine=function(t){return t},t.prototype.intersectWithConvexPolygon=function(t){return t},t.prototype.isContainedByRay=function(t){return!1},t.prototype.isContainedByLineSegment=function(t){return!1},t.prototype.isContainedByLine=function(t){return!1},t.prototype.isContainedByConvexPolygon=function(t){return!1},t.prototype.intersectsRay=function(t){return!0},t.prototype.intersectsLineSegment=function(t){return!0},t.prototype.intersectsLine=function(t){return!0},t.prototype.intersectsConvexPolygon=function(t){return!0},t}()),W=function(){function t(e,n){this.vertices=n,this.halfPlanes=e,this.vertices=this.vertices||t.getVertices(this.halfPlanes)}return t.prototype.findVertex=function(t){for(var e=0,n=this.vertices;e<n.length;e++){var o=n[e];if(o.point.equals(t))return o}},t.prototype.intersects=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectWith=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.intersectWithRay=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.intersectWithLine=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.intersectWithLineSegment=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.contains=function(t){return t.isContainedByConvexPolygon(this)},t.prototype.containsHalfPlane=function(t){for(var e=0,n=this.halfPlanes;e<n.length;e++){var o=n[e];if(!t.isContainedByHalfPlane(o))return!1}return!0},t.prototype.isContainedByHalfPlane=function(t){for(var e=0,n=this.vertices;e<n.length;e++){var o=n[e];if(!t.containsPoint(o.point))return!1}for(var r=t.complement(),i=0,s=this.halfPlanes;i<s.length;i++)if((u=s[i]).isContainedByHalfPlane(t))return!0;for(var a=0,c=this.halfPlanes;a<c.length;a++){var u=c[a];if(this.hasAtMostOneVertex(u)&&(u.isContainedByHalfPlane(r)||r.isContainedByHalfPlane(u)))return!1;var p=u.getIntersectionWith(t),f=this.findVertex(p.point);if(f){if(!f.isContainedByHalfPlaneWithNormal(t.normalTowardInterior))return!1}else if(this.containsPoint(p.point))return!1}return!this.containsHalfPlane(t)},t.prototype.getPointInFrontInDirection=function(t,e){for(var n,o=0,r=0,i=this.vertices;r<i.length;r++){var s=i[r],a=s.point.minus(t).dot(e);a>o&&(n=s.point,o=a)}return n?t.plus(n.minus(t).projectOn(e)):t},t.prototype.expandToIncludePoint=function(e){if(this.containsPoint(e))return this;for(var n=[],o=[],r=0,i=this.halfPlanes;r<i.length;r++){var s=i[r];this.hasAtMostOneVertex(s)&&!s.containsPoint(e)&&n.push(s.expandToIncludePoint(e))}if(0===this.vertices.length)return new t(n.concat(this.halfPlanes.filter((function(t){return t.containsPoint(e)}))));for(var a=0,c=this.vertices;a<c.length;a++){var u=c[a];if(u.containsPoint(e))o.push(u);else if(u.isExpandableToContainPoint(e)){var p=u.expandToContainPoint(e);n.push(p.newHalfPlane),o.push(p.newVertex)}else u.isInSameHalfPlaneAs(e)&&n.push(u.getHalfPlaneContaining(e))}if(2!==n.length)throw new Error("expected two new half planes");return o.push(new D(e,n[0],n[1])),n=t.getHalfPlanes(o),new t(n,o)},t.prototype.expandToIncludeInfinityInDirection=function(e){if(this.containsInfinityInDirection(e))return this;var n=this.halfPlanes.filter((function(t){return t.containsInfinityInDirection(e)})).concat(this.getTangentPlanesThroughInfinityInDirection(e));return 0===(n=t.getHalfPlanesNotContainingAnyOther(n)).length?F:new t(n)},t.prototype.getIntersectionsWithLine=function(t,e){for(var n=[],o=0,r=this.halfPlanes;o<r.length;o++){var i=r[o];if(!i.isParallelToLine(t,e)){var s=i.intersectWithLine(t,e),a=this.findVertex(s.point);a&&!a.containsLineSegmentWithDirection(e)||this.containsPoint(s.point)&&n.push(s)}}return n},t.prototype.expandByDistance=function(e){return new t(this.halfPlanes.map((function(t){return t.expandByDistance(e)})))},t.prototype.transform=function(e){return new t(this.halfPlanes.map((function(t){return t.transform(e)})))},t.prototype.intersectWithConvexPolygon=function(e){if(e.isContainedByConvexPolygon(this))return e;if(this.isContainedByConvexPolygon(e))return this;if(!this.isOutsideConvexPolygon(e)){var n=t.getHalfPlanesNotContainingAnyOther(this.halfPlanes.concat(e.halfPlanes)),o=t.groupVerticesByPoint(t.getVertices(n)).map((function(e){return t.getVerticesNotContainingAnyOther(e)})).reduce((function(t,e){return t.concat(e)}),[]);if(0===o.length)return new t(n);var r=t.getHalfPlanes(o);return new t(r)}},t.prototype.containsInfinityInDirection=function(t){for(var e=0,n=this.halfPlanes;e<n.length;e++)if(!n[e].containsInfinityInDirection(t))return!1;return!0},t.prototype.containsPoint=function(t){for(var e=0,n=this.halfPlanes;e<n.length;e++)if(!n[e].containsPoint(t))return!1;return!0},t.prototype.intersectsRay=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectsLineSegment=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectsLine=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectsConvexPolygon=function(t){return!(!this.isContainedByConvexPolygon(t)&&!t.isContainedByConvexPolygon(this)&&this.isOutsideConvexPolygon(t))},t.prototype.isOutsideConvexPolygon=function(t){for(var e=0,n=t.halfPlanes;e<n.length;e++){var o=n[e];if(this.isContainedByHalfPlane(o.complement()))return!0}for(var r=0,i=this.halfPlanes;r<i.length;r++){var s=i[r];if(t.isContainedByHalfPlane(s.complement()))return!0}return!1},t.prototype.hasAtMostOneVertex=function(t){for(var e=0,n=0,o=this.vertices;n<o.length;n++){var r=o[n];if((r.halfPlane1===t||r.halfPlane2===t)&&++e>1)return!1}return!0},t.prototype.getTangentPlanesThroughInfinityInDirection=function(t){for(var e=[],n=0,o=this.vertices;n<o.length;n++)for(var r=o[n],i=0,s=E.withBorderPointAndInfinityInDirection(r.point,t);i<s.length;i++){var a=s[i];this.isContainedByHalfPlane(a)&&e.push(a)}return e},t.prototype.isContainedByRay=function(t){return!1},t.prototype.isContainedByLineSegment=function(t){return!1},t.prototype.isContainedByLine=function(t){return!1},t.prototype.isContainedByConvexPolygon=function(t){for(var e=0,n=t.halfPlanes;e<n.length;e++){var o=n[e];if(!this.isContainedByHalfPlane(o))return!1}return!0},t.getHalfPlanes=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];-1===e.indexOf(r.halfPlane1)&&e.push(r.halfPlane1),-1===e.indexOf(r.halfPlane2)&&e.push(r.halfPlane2)}return e},t.getVerticesNotContainingAnyOther=function(t){for(var e=[],n=0;n<t.length;n++){for(var o=!0,r=0;r<t.length;r++)if(n!==r&&t[r].isContainedByVertex(t[n])){o=!1;break}o&&e.push(t[n])}return e},t.getHalfPlanesNotContainingAnyOther=function(t){for(var e=[],n=0,o=t;n<o.length;n++){for(var r=o[n],i=!0,s=0,a=e;s<a.length;s++)if(a[s].isContainedByHalfPlane(r)){i=!1;break}i&&e.push(r)}return e},t.groupVerticesByPoint=function(t){for(var e=[],n=0,o=t;n<o.length;n++){for(var r=o[n],i=void 0,s=0,a=e;s<a.length;s++){var c=a[s];if(c[0].point.equals(r.point)){i=c;break}}i?i.push(r):e.push([r])}return e},t.getVertices=function(t){for(var e=[],n=0;n<t.length;n++)for(var o=n+1;o<t.length;o++)if(!t[n].complement().isContainedByHalfPlane(t[o])){for(var r=t[n].getIntersectionWith(t[o]),i=!0,s=0;s<t.length;s++)if(s!==n&&s!==o&&!t[s].containsPoint(r.point)){i=!1;break}i&&e.push(r)}return e},t.createTriangleWithInfinityInTwoDirections=function(e,n,o){var r=n.getPerpendicular(),i=o.getPerpendicular();return n.cross(o)<0?new t([new E(e,r.scale(-1)),new E(e,i)]):new t([new E(e,r),new E(e,i.scale(-1))])},t.createFromHalfPlane=function(e){return new t([e])},t.createTriangleWithInfinityInDirection=function(e,n,o){var r=n.minus(e).projectOn(o.getPerpendicular());return new t([new E(e,r),new E(n,r.scale(-1)),E.throughPointsAndContainingPoint(e,n,e.plus(o))])},t.createTriangle=function(e,n,o){return new t([E.throughPointsAndContainingPoint(e,n,o),E.throughPointsAndContainingPoint(e,o,n),E.throughPointsAndContainingPoint(n,o,e)])},t.createRectangle=function(e,n,o,r){var i=[];return Number.isFinite(e)&&(i.push(new E(new s(e,0),new s(o>0?1:-1,0))),Number.isFinite(o)&&i.push(new E(new s(e+o,0),new s(o>0?-1:1,0)))),Number.isFinite(n)&&(i.push(new E(new s(0,n),new s(0,r>0?1:-1))),Number.isFinite(r)&&i.push(new E(new s(0,n+r),new s(0,r>0?-1:1)))),new t(i)},t}(),R=function(){function t(t){this.viewBox=t}return t.prototype.fillText=function(t,e,n,o){var i=void 0===o?function(o){o.fillText(t,e,n)}:function(r){r.fillText(t,e,n,o)};this.viewBox.addDrawing(i,this.getDrawnRectangle(e,n,t),r.Relative,!0)},t.prototype.measureText=function(t){return this.viewBox.measureText(t)},t.prototype.strokeText=function(t,e,n,o){var i=void 0===o?function(o){o.strokeText(t,e,n)}:function(r){r.strokeText(t,e,n,o)};this.viewBox.addDrawing(i,this.getDrawnRectangle(e,n,t),r.Relative,!0)},t.prototype.getDrawnRectangle=function(t,e,n){var o,r=this.viewBox.measureText(n);o=void 0!==r.actualBoundingBoxRight?Math.abs(r.actualBoundingBoxRight-r.actualBoundingBoxLeft):r.width;var i=void 0!==r.actualBoundingBoxAscent?r.actualBoundingBoxAscent+r.actualBoundingBoxDescent:1,s=void 0!==r.actualBoundingBoxAscent?r.actualBoundingBoxAscent:0;return W.createRectangle(t,e-s,o,i)},t}(),k=function(){function t(t){this.viewBox=t}return t.prototype.drawImage=function(){var t,e,n,o,i,s,a,c,u,p=Array.prototype.slice.apply(arguments);arguments.length<=5?(t=p[0],s=p[1],a=p[2],c=p[3],u=p[4]):(t=p[0],e=p[1],n=p[2],o=p[3],i=p[4],s=p[5],a=p[6],c=p[7],u=p[8]);var f=this.getDrawnLength(t.width,e,o,c),l=this.getDrawnLength(t.height,n,i,u),h=W.createRectangle(s,a,f,l),y=this.getDrawImageInstruction(arguments.length,t,e,n,o,i,s,a,c,u);this.viewBox.addDrawing(y,h,r.Relative,!0)},t.prototype.getDrawImageInstruction=function(t,e,n,o,r,i,s,a,c,u){switch(t){case 3:return function(t){t.drawImage(e,s,a)};case 5:return function(t){t.drawImage(e,s,a,c,u)};case 9:return function(t){t.drawImage(e,n,o,r,i,s,a,c,u)};default:throw new TypeError("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': Valid arities are: [3, 5, 9], but ".concat(t," arguments provided."))}},t.prototype.getDrawnLength=function(t,e,n,o){var r=this.getLength(t);return void 0!==o?o:void 0!==e?void 0!==n?n:r-e:r},t.prototype.getLength=function(t){return"number"==typeof t?t:t.baseVal.value},t}(),N=function(){function t(t){this.viewBox=t}return t.prototype.createImageData=function(t,e){},t.prototype.getImageData=function(t,e,n,o){},t.prototype.putImageData=function(t,e,n,o,i,s,a){var c;t=function(t,e,n,o,r){e=void 0===e?0:e,n=void 0===n?0:n,o=void 0===o?t.width:o,r=void 0===r?t.height:r;for(var i=t.data,s=new Uint8ClampedArray(4*o*r),a=0;a<r;a++)for(var c=0;c<o;c++){var u=4*((n+a)*t.width+e+c),p=4*(a*o+c);s[p]=i[u],s[p+1]=i[u+1],s[p+2]=i[u+2],s[p+3]=i[u+3]}return new ImageData(s,o,r)}(t,o,i,s,a);var u=this.viewBox.getDrawingLock();this.viewBox.createPatternFromImageData(t).then((function(t){c=t,u.release()})),this.viewBox.addDrawing((function(o){o.translate(e,n),o.fillStyle=c,o.imageSmoothingEnabled=!1,o.fillRect(0,0,t.width,t.height)}),W.createRectangle(e,n,t.width,t.height),r.Absolute,!1)},t}(),V=function(){function t(t){this.propertyName=t}return t.prototype.changeInstanceValue=function(t,e){return this.valuesAreEqual(t[this.propertyName],e)?t:t.changeProperty(this.propertyName,e)},t.prototype.isEqualForInstances=function(t,e){return this.valuesAreEqual(t[this.propertyName],e[this.propertyName])},t.prototype.valueIsTransformableForInstance=function(t){return!0},t.prototype.changeToNewValue=function(t,e){return e?this.changeToNewValueTransformed(t):this.changeToNewValueUntransformed(t)},t.prototype.getInstructionToChange=function(t,e){var n=t[this.propertyName],o=e[this.propertyName];return this.valuesAreEqual(n,o)&&(t.fillAndStrokeStylesTransformed===e.fillAndStrokeStylesTransformed||this.valuesAreEqualWhenTransformed(n,o))?function(){}:this.changeToNewValue(o,e.fillAndStrokeStylesTransformed)},t}(),M=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),H=function(t){function e(e){return t.call(this,e)||this}return M(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValueTransformed=function(t){var e=this;return function(n,o){n[e.propertyName]=t*o.scale}},e.prototype.changeToNewValueUntransformed=function(t){var e=this;return function(n){n[e.propertyName]=t}},e.prototype.valuesAreEqualWhenTransformed=function(t,e){return 0===t&&0===e},e}(V),q=new H("lineWidth"),G=new H("lineDashOffset"),X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.valuesAreEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},e.prototype.changeToNewValueTransformed=function(t){return function(e,n){e.setLineDash(t.map((function(t){return t*n.scale})))}},e.prototype.changeToNewValueUntransformed=function(t){return function(e){e.setLineDash(t)}},e.prototype.valuesAreEqualWhenTransformed=function(t,e){return 0===t.length&&0===e.length},e}(V),U=new Y("lineDash"),z=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"lineDashOffset",{get:function(){return this.viewBox.state.current.lineDashOffset},set:function(t){this.viewBox.changeState((function(e){return G.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.viewBox.state.current.lineWidth},set:function(t){this.viewBox.changeState((function(e){return q.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t.prototype.getLineDash=function(){return this.viewBox.state.current.lineDash},t.prototype.setLineDash=function(t){t.length%2==1&&(t=t.concat(t)),this.viewBox.changeState((function(e){return U.changeInstanceValue(e,t)}))},t}(),K=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.direction=t}},e}(c))("direction"),J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return J(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.font=t}},e}(c))("font"),$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.textAlign=t}},e}(c))("textAlign"),et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.textBaseline=t}},e}(c))("textBaseline"),ot=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"direction",{set:function(t){this.viewBox.changeState((function(e){return Z.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{set:function(t){this.viewBox.changeState((function(e){return Q.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{set:function(t){this.viewBox.changeState((function(e){return tt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{set:function(t){this.viewBox.changeState((function(e){return nt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t}();function rt(t){return void 0!==t.direction}var it=function(){function t(){}return t.arc=function(t,e,n,o,r,i){return{instruction:function(a,c){var u=c.getRotationAngle(),p=c.apply(new s(t,e)),f=p.x,l=p.y;a.arc(f,l,n*c.scale,o+u,r+u,i)},changeArea:function(o){o.addPosition(new s(t-n,e-n)),o.addPosition(new s(t-n,e+n)),o.addPosition(new s(t+n,e-n)),o.addPosition(new s(t+n,e+n))},positionChange:new s(t,e).plus(a.rotation(0,0,r).apply(new s(n,0))),initialPoint:new s(t,e).plus(a.rotation(0,0,o).apply(new s(n,0)))}},t.arcTo=function(t,e,n,o,r){var i=new s(t,e),a=new s(n,o);return{instruction:function(t,e){var n=e.apply(i),o=e.apply(a);t.arcTo(n.x,n.y,o.x,o.y,r*e.scale)},changeArea:function(t){t.addPosition(i),t.addPosition(a)},positionChange:new s(n,o)}},t.ellipse=function(t,e,n,o,r,i,c,u){return{instruction:function(a,p){var f=p.apply(new s(t,e)),l=p.getRotationAngle();a.ellipse(f.x,f.y,n*p.scale,o*p.scale,r+l,i,c,u)},changeArea:function(r){r.addPosition(new s(t-n,e-o)),r.addPosition(new s(t-n,e+o)),r.addPosition(new s(t+n,e-o)),r.addPosition(new s(t+n,e+o))},positionChange:new s(t,e).plus(a.rotation(0,0,c).before(new a(n,0,0,o,0,0)).before(a.rotation(0,0,r)).apply(new s(1,0))),initialPoint:new s(t,e).plus(a.rotation(0,0,i).before(new a(n,0,0,o,0,0)).before(a.rotation(0,0,r)).apply(new s(1,0)))}},t.bezierCurveTo=function(t,e,n,o,r,i){return{instruction:function(a,c){var u=c.apply(new s(t,e)),p=c.apply(new s(n,o)),f=c.apply(new s(r,i));a.bezierCurveTo(u.x,u.y,p.x,p.y,f.x,f.y)},changeArea:function(a,c){rt(c)||(a.addPosition(new s((c.x+t)/2,(c.y+e)/2)),a.addPosition(new s((t+n)/2,(e+o)/2)),a.addPosition(new s((n+r)/2,(o+i)/2)),a.addPosition(new s(r,i)))},positionChange:new s(r,i)}},t.quadraticCurveTo=function(t,e,n,o){return{instruction:function(r,i){var a=i.apply(new s(t,e)),c=i.apply(new s(n,o));r.quadraticCurveTo(a.x,a.y,c.x,c.y)},changeArea:function(r,i){rt(i)||(r.addPosition(new s((i.x+t)/2,(i.y+e)/2)),r.addPosition(new s((t+n)/2,(e+o)/2)),r.addPosition(new s(n,o)))},positionChange:new s(n,o)}},t}(),st=function(){function t(t){this.viewBox=t}return t.prototype.arc=function(t,e,n,o,r,i){this.viewBox.addPathInstruction(it.arc(t,e,n,o,r,i))},t.prototype.arcTo=function(t,e,n,o,r){this.viewBox.addPathInstruction(it.arcTo(t,e,n,o,r))},t.prototype.closePath=function(){this.viewBox.closePath()},t.prototype.ellipse=function(t,e,n,o,r,i,s,a){this.viewBox.addPathInstruction(it.ellipse(t,e,n,o,r,i,s,a))},t.prototype.lineTo=function(t,e){this.viewBox.lineTo(new s(t,e))},t.prototype.lineToInfinityInDirection=function(t,e){this.viewBox.lineTo({direction:new s(t,e)})},t.prototype.moveTo=function(t,e){this.viewBox.moveTo(new s(t,e))},t.prototype.moveToInfinityInDirection=function(t,e){this.viewBox.moveTo({direction:new s(t,e)})},t.prototype.quadraticCurveTo=function(t,e,n,o){this.viewBox.addPathInstruction(it.quadraticCurveTo(t,e,n,o))},t.prototype.bezierCurveTo=function(t,e,n,o,r,i){this.viewBox.addPathInstruction(it.bezierCurveTo(t,e,n,o,r,i))},t.prototype.rect=function(t,e,n,o){this.viewBox.rect(t,e,n,o)},t}(),at=function(){function t(t,e){this.canvas=t,this.canvasState=new i(e),this.canvasTransform=new f(e),this.canvasCompositing=new l,this.canvasStrokeStyles=new b(e),this.canvasShadowStyles=new x(e),this.canvasFilters=new j,this.canvasRect=new A(e),this.canvasDrawPath=new B(e),this.canvasUserInterface=new L,this.canvasText=new R(e),this.canvasDrawImage=new k(e),this.canvasImageData=new N(e),this.canvasPathDrawingStyles=new z(e),this.canvasTextDrawingStyles=new ot(e),this.canvasPath=new st(e)}return t.prototype.getContextAttributes=function(){return this.canvas.getContext("2d").getContextAttributes()},t.prototype.save=function(){this.canvasState.save()},t.prototype.restore=function(){this.canvasState.restore()},t.prototype.getTransform=function(){return this.canvasTransform.getTransform()},t.prototype.resetTransform=function(){this.canvasTransform.resetTransform()},t.prototype.rotate=function(t){this.canvasTransform.rotate(t)},t.prototype.scale=function(t,e){this.canvasTransform.scale(t,e)},t.prototype.setTransform=function(t,e,n,o,r,i){this.canvasTransform.setTransform(t,e,n,o,r,i)},t.prototype.transform=function(t,e,n,o,r,i){this.canvasTransform.transform(t,e,n,o,r,i)},t.prototype.translate=function(t,e){this.canvasTransform.translate(t,e)},Object.defineProperty(t.prototype,"globalAlpha",{set:function(t){this.canvasCompositing.globalAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalCompositeOperation",{set:function(t){this.canvasCompositing.globalCompositeOperation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingEnabled",{set:function(t){this.canvasImageSmoothing.imageSmoothingEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingQuality",{set:function(t){this.canvasImageSmoothing.imageSmoothingQuality=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillStyle",{set:function(t){this.canvasStrokeStyles.fillStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeStyle",{set:function(t){this.canvasStrokeStyles.strokeStyle=t},enumerable:!1,configurable:!0}),t.prototype.createLinearGradient=function(t,e,n,o){return this.canvasStrokeStyles.createLinearGradient(t,e,n,o)},t.prototype.createPattern=function(t,e){return this.canvasStrokeStyles.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,o,r,i){return this.canvasStrokeStyles.createRadialGradient(t,e,n,o,r,i)},t.prototype.createConicGradient=function(t,e,n){return this.canvasStrokeStyles.createConicGradient(t,e,n)},Object.defineProperty(t.prototype,"shadowBlur",{set:function(t){this.canvasShadowStyles.shadowBlur=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{set:function(t){this.canvasShadowStyles.shadowColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetX",{set:function(t){this.canvasShadowStyles.shadowOffsetX=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{set:function(t){this.canvasShadowStyles.shadowOffsetY=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filter",{set:function(t){this.canvasFilters.filter=t},enumerable:!1,configurable:!0}),t.prototype.clearRect=function(t,e,n,o){this.canvasRect.clearRect(t,e,n,o)},t.prototype.fillRect=function(t,e,n,o){this.canvasRect.fillRect(t,e,n,o)},t.prototype.strokeRect=function(t,e,n,o){this.canvasRect.strokeRect(t,e,n,o)},t.prototype.beginPath=function(){this.canvasDrawPath.beginPath()},t.prototype.clip=function(t,e){this.canvasDrawPath.clip(t,e)},t.prototype.fill=function(t,e){this.canvasDrawPath.fill(t,e)},t.prototype.isPointInPath=function(t,e,n,o){return this.canvasDrawPath.isPointInPath(t,e,n,o)},t.prototype.isPointInStroke=function(t,e,n){return this.canvasDrawPath.isPointInStroke(t,e,n)},t.prototype.stroke=function(t){this.canvasDrawPath.stroke(t)},t.prototype.drawFocusIfNeeded=function(t,e){this.canvasUserInterface.drawFocusIfNeeded(t,e)},t.prototype.scrollPathIntoView=function(t){this.canvasUserInterface.scrollPathIntoView(t)},t.prototype.fillText=function(t,e,n,o){this.canvasText.fillText(t,e,n,o)},t.prototype.measureText=function(t){return this.canvasText.measureText(t)},t.prototype.strokeText=function(t,e,n,o){this.canvasText.strokeText(t,e,n,o)},t.prototype.drawImage=function(){this.canvasDrawImage.drawImage.apply(this.canvasDrawImage,arguments)},t.prototype.createImageData=function(t,e){return this.canvasImageData.createImageData(t,e)},t.prototype.getImageData=function(t,e,n,o){return this.canvasImageData.getImageData(t,e,n,o)},t.prototype.putImageData=function(t,e,n,o,r,i,s){this.canvasImageData.putImageData(t,e,n,o,r,i,s)},Object.defineProperty(t.prototype,"lineCap",{set:function(t){this.canvasPathDrawingStyles.lineCap=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{set:function(t){this.canvasPathDrawingStyles.lineDashOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{set:function(t){this.canvasPathDrawingStyles.lineJoin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{set:function(t){this.canvasPathDrawingStyles.lineWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{set:function(t){this.canvasPathDrawingStyles.miterLimit=t},enumerable:!1,configurable:!0}),t.prototype.getLineDash=function(){return this.canvasPathDrawingStyles.getLineDash()},t.prototype.setLineDash=function(t){this.canvasPathDrawingStyles.setLineDash(t)},Object.defineProperty(t.prototype,"direction",{set:function(t){this.canvasTextDrawingStyles.direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{set:function(t){this.canvasTextDrawingStyles.font=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{set:function(t){this.canvasTextDrawingStyles.textAlign=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{set:function(t){this.canvasTextDrawingStyles.textBaseline=t},enumerable:!1,configurable:!0}),t.prototype.arc=function(t,e,n,o,r,i){this.canvasPath.arc(t,e,n,o,r,i)},t.prototype.arcTo=function(t,e,n,o,r){this.canvasPath.arcTo(t,e,n,o,r)},t.prototype.bezierCurveTo=function(t,e,n,o,r,i){this.canvasPath.bezierCurveTo(t,e,n,o,r,i)},t.prototype.closePath=function(){this.canvasPath.closePath()},t.prototype.ellipse=function(t,e,n,o,r,i,s,a){this.canvasPath.ellipse(t,e,n,o,r,i,s)},t.prototype.lineTo=function(t,e){this.canvasPath.lineTo(t,e)},t.prototype.lineToInfinityInDirection=function(t,e){this.canvasPath.lineToInfinityInDirection(t,e)},t.prototype.moveTo=function(t,e){this.canvasPath.moveTo(t,e)},t.prototype.moveToInfinityInDirection=function(t,e){this.canvasPath.moveToInfinityInDirection(t,e)},t.prototype.quadraticCurveTo=function(t,e,n,o){this.canvasPath.quadraticCurveTo(t,e,n,o)},t.prototype.rect=function(t,e,n,o){if(!Number.isFinite(t)&&!Number.isFinite(e))throw new Error("The starting coordinates provided (".concat(t," and ").concat(e,") do not determine a direction."));this.canvasPath.rect(t,e,n,o)},t}(),ct=function(){function t(t,e,n){this.area=t,this.latestClippedPath=e,this.previouslyClippedPaths=n}return t.prototype.withClippedPath=function(e){return new t(e.getClippedArea(this.area),e,this)},Object.defineProperty(t.prototype,"initialState",{get:function(){return this.previouslyClippedPaths?this.previouslyClippedPaths.initialState:this.latestClippedPath.initialState},enumerable:!1,configurable:!0}),t.prototype.except=function(e){if(e!==this)return this.previouslyClippedPaths?new t(this.area,this.latestClippedPath,this.previouslyClippedPaths.except(e)):this},t.prototype.contains=function(t){return!!t&&(this===t||!!this.previouslyClippedPaths&&this.previouslyClippedPaths.contains(t))},t.prototype.getInstructionToRecreate=function(t){var e=this,n=function(t,n){e.latestClippedPath.execute(t,n)};if(this.previouslyClippedPaths){var o=this.previouslyClippedPaths.getInstructionToRecreate(t),r=this.previouslyClippedPaths.latestClippedPath.state.getInstructionToConvertToState(this.latestClippedPath.initialState,t);return function(t,e){o(t,e),r(t,e),n(t,e)}}return n},t}(),ut=[Z,g,G,U,q,m,tt,nt,p,Q,I,_,w],pt=function(){function t(t){this.fillStyle=t.fillStyle,this.lineWidth=t.lineWidth,this.lineDash=t.lineDash,this.strokeStyle=t.strokeStyle,this.lineDashOffset=t.lineDashOffset,this.transformation=t.transformation,this.direction=t.direction,this.font=t.font,this.textAlign=t.textAlign,this.textBaseline=t.textBaseline,this.clippedPaths=t.clippedPaths,this.fillAndStrokeStylesTransformed=t.fillAndStrokeStylesTransformed,this.shadowOffset=t.shadowOffset,this.shadowColor=t.shadowColor,this.shadowBlur=t.shadowBlur}return t.prototype.changeProperty=function(e,n){var o=this,r={fillStyle:o.fillStyle,lineWidth:o.lineWidth,lineDash:o.lineDash,strokeStyle:o.strokeStyle,lineDashOffset:o.lineDashOffset,transformation:o.transformation,direction:o.direction,font:o.font,textAlign:o.textAlign,textBaseline:o.textBaseline,clippedPaths:o.clippedPaths,fillAndStrokeStylesTransformed:o.fillAndStrokeStylesTransformed,shadowOffset:o.shadowOffset,shadowColor:o.shadowColor,shadowBlur:o.shadowBlur};return r[e]=n,new t(r)},Object.defineProperty(t.prototype,"clippingRegion",{get:function(){return this.clippedPaths?this.clippedPaths.area:void 0},enumerable:!1,configurable:!0}),t.prototype.equals=function(t){for(var e=0,n=ut;e<n.length;e++)if(!n[e].isEqualForInstances(this,t))return!1;return(!this.clippedPaths&&!t.clippedPaths||this.clippedPaths&&this.clippedPaths===t.clippedPaths)&&this.fillAndStrokeStylesTransformed===t.fillAndStrokeStylesTransformed},t.prototype.getMaximumLineWidth=function(){return this.lineWidth*this.transformation.getMaximumLineWidthScale()},t.prototype.getLineDashPeriod=function(){return this.lineDash.reduce((function(t,e){return t+e}),0)},t.prototype.isTransformable=function(){for(var t=0,e=ut;t<e.length;t++)if(!e[t].valueIsTransformableForInstance(this))return!1;return!0},t.prototype.getInstructionToConvertToState=function(t,e){var n=this,o=ut.map((function(o){return o.getInstructionToChange(n,t,e)}));return function(t,e){for(var n=0;n<o.length;n++)o[n](t,e)}},t.prototype.withClippedPath=function(t){var e=this.clippedPaths?this.clippedPaths.withClippedPath(t):new ct(t.getClippedArea(),t);return this.changeProperty("clippedPaths",e)},t.default=new t({fillStyle:"#000",lineWidth:1,lineDash:[],strokeStyle:"#000",lineDashOffset:0,transformation:a.identity,direction:"inherit",font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic",clippedPaths:void 0,fillAndStrokeStylesTransformed:!1,shadowOffset:s.origin,shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:0}),t.setDefault=function(){},t}(),ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colorStops=[],e}return ft(e,t),e.prototype.addColorStopsToGradient=function(t){for(var e=0,n=this.colorStops;e<n.length;e++){var o=n[e];t.addColorStop(o.offset,o.color)}},e.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},e.prototype.getInstructionToSetTransformed=function(t){var e=this;return function(n,o){n[t]=e.createTransformedGradient(o)}},e.prototype.getInstructionToSetUntransformed=function(t){var e=this;return function(n){n[t]=e.createGradient()}},e}(h),ht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yt=function(t){function e(e,n,o,r,i){var s=t.call(this)||this;return s.context=e,s.x0=n,s.y0=o,s.x1=r,s.y1=i,s}return ht(e,t),e.prototype.createTransformedGradient=function(t){var e=t.apply(new s(this.x0,this.y0)),n=e.x,o=e.y,r=t.apply(new s(this.x1,this.y1)),i=r.x,a=r.y,c=this.context.createLinearGradient(n,o,i,a);return this.addColorStopsToGradient(c),c},e.prototype.createGradient=function(){var t=this.context.createLinearGradient(this.x0,this.y0,this.x1,this.y1);return this.addColorStopsToGradient(t),t},e}(lt),dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vt=function(t){function e(e,n,o,r,i,s,a){var c=t.call(this)||this;return c.context=e,c.x0=n,c.y0=o,c.r0=r,c.x1=i,c.y1=s,c.r1=a,c}return dt(e,t),e.prototype.createTransformedGradient=function(t){var e=t.apply(new s(this.x0,this.y0)),n=e.x,o=e.y,r=t.apply(new s(this.x1,this.y1)),i=r.x,a=r.y,c=this.r0*t.scale,u=this.r1*t.scale,p=this.context.createRadialGradient(n,o,c,i,a,u);return this.addColorStopsToGradient(p),p},e.prototype.createGradient=function(){var t=this.context.createRadialGradient(this.x0,this.y0,this.r0,this.x1,this.y1,this.r1);return this.addColorStopsToGradient(t),t},e}(lt),gt=function(){function t(t){this.initiallyWithState=t,this.added=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.added.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentlyWithState",{get:function(){return this.addedLast?this.addedLast:this.initiallyWithState},enumerable:!1,configurable:!0}),t.prototype.reconstructState=function(t,e){e.setInitialState(t)},Object.defineProperty(t.prototype,"stateOfFirstInstruction",{get:function(){return this.initiallyWithState.stateOfFirstInstruction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.currentlyWithState.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this.initiallyWithState.initialState},enumerable:!1,configurable:!0}),t.prototype.addClippedPath=function(t){this.currentlyWithState.addClippedPath(t)},t.prototype.add=function(t){this.added.push(t),this.addedLast=t},t.prototype.removeAll=function(t){for(var e;(e=this.added.findIndex(t))>-1;)this.removeAtIndex(e)},t.prototype.contains=function(t){return!!this.added.find(t)},t.prototype.setInitialState=function(t){this.initiallyWithState.setInitialState(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.initiallyWithState.setInitialStateWithClippedPaths(t)},t.prototype.execute=function(t,e){this.initiallyWithState.execute(t,e);for(var n=0,o=this.added;n<o.length;n++)o[n].execute(t,e)},t.prototype.beforeIndex=function(t){return 0===t?this.initiallyWithState.state:this.added[t-1].state},t.prototype.removeAtIndex=function(t){t===this.added.length-1?1===this.added.length?this.addedLast=void 0:this.addedLast=this.added[t-1]:this.reconstructState(this.beforeIndex(t),this.added[t+1]),this.added.splice(t,1)},t}(),mt=function(){function t(t){this.currentState=t,this.instructions=[]}return t.prototype.restore=function(){this.addChangeToState(this.currentState.restored(),(function(t){t.restore()}))},t.prototype.save=function(){this.addChangeToState(this.currentState.saved(),(function(t){t.save()}))},t.prototype.changeCurrentInstanceTo=function(t,e){if(!this.currentState.current.equals(t)){var n=this.currentState.current.getInstructionToConvertToState(t,e),o=this.currentState.withCurrentState(t);this.addChangeToState(o,n)}},t.prototype.addChangeToState=function(t,e){this.currentState=t,e&&this.instructions.push(e)},Object.defineProperty(t.prototype,"instruction",{get:function(){var t=this;if(0!==this.instructions.length)return function(e,n){for(var o=0,r=t.instructions;o<r.length;o++)(0,r[o])(e,n)}},enumerable:!1,configurable:!0}),t}(),bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bt(e,t),e.prototype.changeCurrentInstanceTo=function(n,o){if(!this.currentState.current.equals(n)){if(!e.canConvert(this.currentState.current,n)){if(!(this.currentState.stack.length>0))return void t.prototype.changeCurrentInstanceTo.call(this,n,o);this.restore(),this.save()}if(n.clippedPaths){var r=this.currentState,i=r.current.clippedPaths;if(n.clippedPaths===i)t.prototype.changeCurrentInstanceTo.call(this,n,o);else{var s=n.clippedPaths.except(i);this.convertToState(s.initialState,o),this.addChangeToState(s.latestClippedPath.state,s.getInstructionToRecreate(o)),this.convertToState(r.replaceCurrent(n),o)}}else t.prototype.changeCurrentInstanceTo.call(this,n,o)}},e.prototype.convertToState=function(t,e){var n=this.currentState.getInstructionToConvertToState(t,e);this.addChangeToState(t,n)},e.canConvert=function(t,e){return!t.clippedPaths||!!e.clippedPaths&&e.clippedPaths.contains(t.clippedPaths)},e}(mt),wt=function(){function t(t,e){void 0===e&&(e=[]),this.current=t,this.stack=e}return t.prototype.replaceCurrent=function(e){return new t(e,this.stack)},t.prototype.withCurrentState=function(e){return new t(e,this.stack)},t.prototype.currentlyTransformed=function(t){return this.withCurrentState(this.current.changeProperty("fillAndStrokeStylesTransformed",t))},t.prototype.withClippedPath=function(e){return new t(this.current.withClippedPath(e),this.stack)},t.prototype.saved=function(){return new t(this.current,(this.stack||[]).concat([this.current]))},t.prototype.restored=function(){return this.stack&&0!==this.stack.length?new t(this.stack[this.stack.length-1],this.stack.slice(0,this.stack.length-1)):this},t.prototype.convertToLastSavedInstance=function(t,e){for(var n=this.stack.length-1;n>e;n--)t.restore()},t.prototype.convertFromLastSavedInstance=function(t,e,n){for(var o=e+1;o<this.stack.length;o++)t.changeCurrentInstanceTo(this.stack[o],n),t.save();t.changeCurrentInstanceTo(this.current,n)},t.prototype.getInstructionToConvertToStateUsingConversion=function(e,n,o){var r=t.findIndexOfHighestCommon(this.stack,n.stack);return this.convertToLastSavedInstance(e,r),n.convertFromLastSavedInstance(e,r,o),e.instruction},t.prototype.getInstructionToConvertToState=function(t,e){return this.getInstructionToConvertToStateUsingConversion(new mt(this),t,e)},t.prototype.getInstructionToClearStack=function(){var t=this.stack.length;return function(e){for(var n=0;n<t;n++)e.restore()}},t.prototype.getInstructionToConvertToStateWithClippedPath=function(t,e){return this.getInstructionToConvertToStateUsingConversion(new Pt(this),t,e)},t.findIndexOfHighestCommon=function(t,e){for(var n=0,o=Math.min(t.length-1,e.length-1);n<=o;){if(!t[n].equals(e[n]))return n-1;n++}return n-1},t}(),Ot=new wt(pt.default,[]),Ct=function(){function t(t,e,n){this.initialState=t,this.state=e,this.rectangle=n,this.stateConversion=function(){}}return t.prototype.setInitialState=function(t){this.initialState=t;var e=this.initialState.getInstructionToConvertToState(this.state,this.rectangle);this.stateConversion=e},Object.defineProperty(t.prototype,"stateOfFirstInstruction",{get:function(){return this.state},enumerable:!1,configurable:!0}),t.prototype.addClippedPath=function(t){this.state=this.state.withClippedPath(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.initialState=t;var e=this.initialState.getInstructionToConvertToStateWithClippedPath(this.state,this.rectangle);this.stateConversion=e},t.prototype.execute=function(t,e){this.stateConversion&&this.stateConversion(t,e),this.executeInstruction(t,e)},t}(),It=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tt=function(t){function e(e,n,o,r,i){var s=t.call(this,e,n,i)||this;return s.instruction=o,s.stateConversion=r,s}return It(e,t),e.prototype.executeInstruction=function(t,e){this.instruction(t,e)},e.prototype.copy=function(){return new e(this.initialState,this.state,this.instruction,this.stateConversion,this.rectangle)},e.create=function(t,n,o){return new e(t,t,n,(function(){}),o)},e}(Ct),St=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_t=function(t){function e(e,n,o,r,i,s){var a=t.call(this,e,n,o,r,s)||this;return a.area=i,a}return St(e,t),e.prototype.hasDrawingAcrossBorderOf=function(t){return!1},e.prototype.intersects=function(t){return this.area.intersects(t)},e.prototype.isContainedBy=function(t){return t.contains(this.area)},e.createClearRect=function(t,n,o,r,i,s,a,c){return new e(t,t,(function(t,e){o.clearRect(t,e,r,i,s,a)}),(function(){}),n,c)},e}(Tt),xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jt=function(t){function e(e,n){var o=t.call(this,e)||this;return o.rectangle=n,o}return xt(e,t),e.prototype.reconstructState=function(t,e){e.setInitialStateWithClippedPaths(t)},e.prototype.hasDrawingAcrossBorderOf=function(t){return this.contains((function(e){return e.hasDrawingAcrossBorderOf(t)}))},e.prototype.intersects=function(t){return this.contains((function(e){return e.intersects(t)}))},e.prototype.addClearRect=function(t,e,n,o,r,i){var s=this.rectangle.getForPath().getInfinity(e),a=_t.createClearRect(e,t,s,n,o,r,i,this.rectangle);a.setInitialState(this.state),this.add(a)},e.prototype.clearContentsInsideArea=function(t){this.removeAll((function(e){return e.isContainedBy(t)}))},e.prototype.isContainedBy=function(t){return!this.contains((function(e){return!e.isContainedBy(t)}))},e.create=function(t){return new e(Tt.create(Ot,pt.setDefault,t),t)},e}(gt);function At(t,e){return rt(t)?e.applyToPointAtInfinity(t):e.apply(t)}var Bt=function(){function t(t,e){this.areaBuilder=t,this.transformation=e}return t.prototype.addPosition=function(t){this.areaBuilder.addPosition(At(t,this.transformation))},t}(),Lt=new(function(){function t(){}return t.prototype.intersectWith=function(t){return this},t.prototype.intersectWithConvexPolygon=function(t){return this},t.prototype.intersects=function(t){return!1},t.prototype.intersectWithLineSegment=function(t){return this},t.prototype.intersectWithRay=function(t){return this},t.prototype.intersectWithLine=function(t){return this},t.prototype.expandToInclude=function(t){return t},t.prototype.transform=function(t){return this},t.prototype.contains=function(t){return!1},t.prototype.isContainedByConvexPolygon=function(t){return!0},t.prototype.isContainedByRay=function(t){return!0},t.prototype.isContainedByLineSegment=function(t){return!0},t.prototype.isContainedByLine=function(t){return!0},t.prototype.intersectsRay=function(t){return!1},t.prototype.intersectsConvexPolygon=function(t){return!1},t.prototype.intersectsLineSegment=function(t){return!1},t.prototype.intersectsLine=function(t){return!1},t.prototype.expandToIncludePoint=function(t){return this},t.prototype.expandToIncludeInfinityInDirection=function(t){return this},t.prototype.expandToIncludePolygon=function(t){return t},t}()),Dt=function(){function t(t,e){this.base=t,this.direction=e}return t.prototype.pointIsOnSameLine=function(t){return 0===t.minus(this.base).cross(this.direction)},t.prototype.comesBefore=function(t,e){return e.minus(t).dot(this.direction)>=0},t.prototype.lineSegmentIsOnSameLine=function(t){return 0===this.direction.cross(t.direction)&&this.pointIsOnSameLine(t.point1)},t.prototype.getPointsInSameDirection=function(t,e){return this.comesBefore(e,t)?{point1:e,point2:t}:{point1:t,point2:e}},t.prototype.pointIsBetweenPoints=function(t,e,n){return t.minus(e).dot(this.direction)*t.minus(n).dot(this.direction)<=0},t.prototype.intersectsConvexPolygon=function(t){if(this.isContainedByConvexPolygon(t))return!0;for(var e=0,n=t.getIntersectionsWithLine(this.base,this.direction);e<n.length;e++){var o=n[e];if(this.interiorContainsPoint(o.point))return!0}return!1},t}(),Et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.intersectWith=function(t){return t.intersectWithLine(this)},e.prototype.intersectWithConvexPolygon=function(t){if(!this.intersectsConvexPolygon(t))return Lt;if(this.isContainedByConvexPolygon(t))return this;for(var e,n,o=0,r=t.getIntersectionsWithLine(this.base,this.direction);o<r.length;o++){var i=r[o];(!e&&!n||!e&&this.comesBefore(i.point,n)||!n&&this.comesBefore(e,i.point)||e&&n&&this.pointIsBetweenPoints(i.point,e,n))&&(i.halfPlane.normalTowardInterior.dot(this.direction)>0?e=i.point:n=i.point)}return e&&n?new Nt(e,n):e?new Rt(e,this.direction):new Rt(n,this.direction.scale(-1))},e.prototype.intersectWithLine=function(t){return this.intersectsLine(t)?this:Lt},e.prototype.intersectWithLineSegment=function(t){return this.lineSegmentIsOnSameLine(t)?t:Lt},e.prototype.intersectWithRay=function(t){return this.intersectsRay(t)?t:Lt},e.prototype.isContainedByConvexPolygon=function(t){return t.containsPoint(this.base)&&t.containsInfinityInDirection(this.direction)&&t.containsInfinityInDirection(this.direction.scale(-1))},e.prototype.isContainedByLine=function(t){return this.intersectsSubsetOfLine(t)},e.prototype.isContainedByLineSegment=function(t){return!1},e.prototype.isContainedByRay=function(t){return!1},e.prototype.contains=function(t){return t.isContainedByLine(this)},e.prototype.intersectsLine=function(t){return this.intersectsSubsetOfLine(t)},e.prototype.intersectsSubsetOfLine=function(t){return this.pointIsOnSameLine(t.base)&&0===this.direction.cross(t.direction)},e.prototype.intersectsLineSegment=function(t){return this.lineSegmentIsOnSameLine(t)},e.prototype.intersectsRay=function(t){return this.intersectsSubsetOfLine(t)},e.prototype.intersects=function(t){return t.intersectsLine(this)},e.prototype.expandToIncludePoint=function(t){return this.pointIsOnSameLine(t)?this:W.createFromHalfPlane(E.throughPointsAndContainingPoint(this.base,this.base.plus(this.direction),t))},e.prototype.expandToIncludeInfinityInDirection=function(t){var e=t.cross(this.direction),n=this.direction.getPerpendicular();return 0===e?this:e>0?W.createFromHalfPlane(new E(this.base,n.scale(-1))):W.createFromHalfPlane(new E(this.base,n))},e.prototype.transform=function(t){var n=t.apply(this.base);return new e(n,t.apply(this.base.plus(this.direction)).minus(n))},e.prototype.interiorContainsPoint=function(t){return this.pointIsOnSameLine(t)},e}(Dt),Wt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e.prototype.intersectWith=function(t){return t.intersectWithRay(this)},e.prototype.intersectWithConvexPolygon=function(t){if(!this.intersectsConvexPolygon(t))return Lt;if(this.isContainedByConvexPolygon(t))return this;for(var n,o=t.getIntersectionsWithLine(this.base,this.direction),r=this.base,i=0,s=o;i<s.length;i++){var a=s[i];(!n&&this.comesBefore(r,a.point)||n&&this.pointIsBetweenPoints(a.point,r,n))&&(a.halfPlane.normalTowardInterior.dot(this.direction)>0?r=a.point:n=a.point)}return n?new Nt(r,n):new e(r,this.direction)},e.prototype.intersectWithRay=function(t){return this.isContainedByRay(t)?this:t.isContainedByRay(this)?t:this.interiorContainsPoint(t.base)?new Nt(this.base,t.base):Lt},e.prototype.intersectWithLine=function(t){return t.intersectWithRay(this)},e.prototype.intersectWithLineSegment=function(t){if(t.isContainedByRay(this))return t;if(!this.lineSegmentIsOnSameLine(t))return Lt;var e=this.getPointsInSameDirection(t.point1,t.point2).point2;return this.comesBefore(e,this.base)?Lt:new Nt(this.base,e)},e.prototype.isContainedByConvexPolygon=function(t){return t.containsPoint(this.base)&&t.containsInfinityInDirection(this.direction)},e.prototype.isContainedByRay=function(t){return t.containsPoint(this.base)&&t.containsInfinityInDirection(this.direction)},e.prototype.isContainedByLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.isContainedByLineSegment=function(t){return!1},e.prototype.contains=function(t){return t.isContainedByRay(this)},e.prototype.intersectsRay=function(t){return this.isContainedByRay(t)||t.isContainedByRay(this)||this.interiorContainsPoint(t.base)},e.prototype.intersectsLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.intersectsLineSegment=function(t){if(t.isContainedByRay(this))return!0;if(!this.lineSegmentIsOnSameLine(t))return!1;var e=this.getPointsInSameDirection(t.point1,t.point2).point2;return!this.comesBefore(e,this.base)},e.prototype.intersects=function(t){return t.intersectsRay(this)},e.prototype.expandToIncludePoint=function(t){return this.containsPoint(t)?this:this.pointIsOnSameLine(t)?new e(t,this.direction):W.createTriangleWithInfinityInDirection(this.base,t,this.direction)},e.prototype.expandToIncludeInfinityInDirection=function(t){return t.inSameDirectionAs(this.direction)?this:0===this.direction.cross(t)?new Ft(this.base,this.direction):W.createTriangleWithInfinityInTwoDirections(this.base,this.direction,t)},e.prototype.transform=function(t){var n=t.apply(this.base);return new e(n,t.apply(this.base.plus(this.direction)).minus(n))},e.prototype.interiorContainsPoint=function(t){return this.pointIsOnSameLine(t)&&!this.comesBefore(t,this.base)},e.prototype.containsInfinityInDirection=function(t){return this.direction.inSameDirectionAs(t)},e.prototype.containsPoint=function(t){return this.pointIsOnSameLine(t)&&this.comesBefore(this.base,t)},e}(Dt),kt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nt=function(t){function e(e,n){var o=t.call(this,e,n.minus(e))||this;return o.point1=e,o.point2=n,o}return kt(e,t),e.prototype.intersectWith=function(t){return t.intersectWithLineSegment(this)},e.prototype.intersectWithLineSegment=function(t){if(this.isContainedByLineSegment(t))return this;if(t.isContainedByLineSegment(this))return t;if(!this.lineSegmentIsOnSameLine(t))return Lt;var n=this.getPointsInSameDirection(t.point1,t.point2),o=n.point1,r=n.point2;return this.comesBefore(r,this.point1)||this.comesBefore(this.point2,o)?Lt:this.comesBefore(this.point1,o)?new e(o,this.point2):new e(this.point1,r)},e.prototype.intersectWithRay=function(t){return t.intersectWithLineSegment(this)},e.prototype.intersectWithLine=function(t){return t.intersectWithLineSegment(this)},e.prototype.isContainedByRay=function(t){return t.containsPoint(this.point1)&&t.containsPoint(this.point2)},e.prototype.isContainedByLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.isContainedByLineSegment=function(t){return t.containsPoint(this.point1)&&t.containsPoint(this.point2)},e.prototype.intersectWithConvexPolygon=function(t){if(!this.intersectsConvexPolygon(t))return Lt;if(this.isContainedByConvexPolygon(t))return this;for(var n=t.getIntersectionsWithLine(this.point1,this.direction),o=this.point1,r=this.point2,i=0,s=n;i<s.length;i++){var a=s[i];this.pointIsBetweenPoints(a.point,o,r)&&(a.halfPlane.normalTowardInterior.dot(this.direction)>0?o=a.point:r=a.point)}return new e(o,r)},e.prototype.isContainedByConvexPolygon=function(t){return t.containsPoint(this.point1)&&t.containsPoint(this.point2)},e.prototype.contains=function(t){return t.isContainedByLineSegment(this)},e.prototype.pointIsStrictlyBetweenPoints=function(t,e,n){return t.minus(e).dot(this.direction)*t.minus(n).dot(this.direction)<0},e.prototype.containsPoint=function(t){return this.pointIsOnSameLine(t)&&this.pointIsBetweenPoints(t,this.point1,this.point2)},e.prototype.interiorContainsPoint=function(t){return this.pointIsOnSameLine(t)&&this.pointIsStrictlyBetweenPoints(t,this.point1,this.point2)},e.prototype.intersectsRay=function(t){return t.intersectsLineSegment(this)},e.prototype.intersectsLineSegment=function(t){if(this.isContainedByLineSegment(t)||t.isContainedByLineSegment(this))return!0;if(!this.lineSegmentIsOnSameLine(t))return!1;var e=this.getPointsInSameDirection(t.point1,t.point2),n=e.point1,o=e.point2;return!this.comesBefore(o,this.point1)&&!this.comesBefore(this.point2,n)},e.prototype.intersectsLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.intersects=function(t){return t.intersectsLineSegment(this)},e.prototype.expandToIncludePoint=function(t){return this.containsPoint(t)?this:this.pointIsOnSameLine(t)?this.comesBefore(t,this.point1)?new e(t,this.point2):new e(this.point1,t):W.createTriangle(this.point1,t,this.point2)},e.prototype.expandToIncludeInfinityInDirection=function(t){return t.inSameDirectionAs(this.direction)?new Rt(this.point1,t):0===t.cross(this.direction)?new Rt(this.point2,t):W.createTriangleWithInfinityInDirection(this.point1,this.point2,t)},e.prototype.transform=function(t){return new e(t.apply(this.point1),t.apply(this.point2))},e}(Dt),Vt=new(function(){function t(){}return t.prototype.addPoint=function(t){return F},t.prototype.addPointAtInfinity=function(t){return this},t.prototype.addArea=function(t){return F},t}()),Mt=function(){function t(t){this.towardsMiddle=t}return t.prototype.addPoint=function(t){return W.createFromHalfPlane(new E(t,this.towardsMiddle))},t.prototype.addPointAtInfinity=function(t){return t.dot(this.towardsMiddle)>=0?this:Vt},t.prototype.addArea=function(t){var e=this.towardsMiddle.getPerpendicular();return t.expandToIncludeInfinityInDirection(this.towardsMiddle).expandToIncludeInfinityInDirection(e).expandToIncludeInfinityInDirection(e.scale(-1))},t}(),Ht=function(){function t(t,e){this.direction1=t,this.direction2=e}return t.prototype.addPoint=function(t){return W.createTriangleWithInfinityInTwoDirections(t,this.direction1,this.direction2)},t.prototype.addPointAtInfinity=function(e){return e.isInSmallerAngleBetweenPoints(this.direction1,this.direction2)?this:0===e.cross(this.direction1)?new Mt(this.direction2.projectOn(this.direction1.getPerpendicular())):0===e.cross(this.direction2)?new Mt(this.direction1.projectOn(this.direction2.getPerpendicular())):this.direction1.isInSmallerAngleBetweenPoints(e,this.direction2)?new t(e,this.direction2):this.direction2.isInSmallerAngleBetweenPoints(e,this.direction1)?new t(e,this.direction1):Vt},t.prototype.addArea=function(t){return t.expandToIncludeInfinityInDirection(this.direction1).expandToIncludeInfinityInDirection(this.direction2)},t}(),qt=function(){function t(t){this.direction=t}return t.prototype.addPoint=function(t){return new Ft(t,this.direction)},t.prototype.addPointAtInfinity=function(t){return 0===t.cross(this.direction)?this:new Mt(t.projectOn(this.direction.getPerpendicular()))},t.prototype.addArea=function(t){return t.expandToIncludeInfinityInDirection(this.direction).expandToIncludeInfinityInDirection(this.direction.scale(-1))},t}(),Gt=function(){function t(t){this.direction=t}return t.prototype.addPointAtInfinity=function(t){return t.inSameDirectionAs(this.direction)?this:0===t.cross(this.direction)?new qt(this.direction):new Ht(this.direction,t)},t.prototype.addPoint=function(t){return new Rt(t,this.direction)},t.prototype.addArea=function(t){return t.expandToIncludeInfinityInDirection(this.direction)},t}(),Xt=function(){function t(t,e,n){this._area=t,this.firstPoint=e,this.subsetOfLineAtInfinity=n}return Object.defineProperty(t.prototype,"area",{get:function(){return this._area||Lt},enumerable:!1,configurable:!0}),t.prototype.addPoint=function(t){this._area?this._area=this._area.expandToIncludePoint(t):this.firstPoint?t.equals(this.firstPoint)||(this._area=new Nt(this.firstPoint,t)):this.subsetOfLineAtInfinity?this._area=this.subsetOfLineAtInfinity.addPoint(t):this.firstPoint=t},t.prototype.addPosition=function(t){rt(t)?this.addInfinityInDirection(t.direction):this.addPoint(t)},t.prototype.addInfinityInDirection=function(t){this._area?this._area=this._area.expandToIncludeInfinityInDirection(t):this.firstPoint?this._area=new Rt(this.firstPoint,t):this.subsetOfLineAtInfinity?(this.subsetOfLineAtInfinity=this.subsetOfLineAtInfinity.addPointAtInfinity(t),this.subsetOfLineAtInfinity===Vt&&(this._area=F)):this.subsetOfLineAtInfinity=new Gt(t)},t.prototype.transformedWith=function(t){return new Bt(this,t)},t.prototype.copy=function(){return new t(this._area,this.firstPoint,this.subsetOfLineAtInfinity)},t}(),Yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ut=function(t){function e(e,n,o,r,i,s){var a=t.call(this,e,o,s)||this;return a.infinity=n,a.instruction=r,a.stateConversion=i,a}return Yt(e,t),e.prototype.executeInstruction=function(t,e){this.instruction(t,e,this.infinity)},e.prototype.replaceInstruction=function(t){this.instruction=t},e.prototype.copy=function(t){return new e(this.initialState,t.getInfinity(this.state),this.state,this.instruction,this.stateConversion,this.rectangle)},e.create=function(t,n,o,r){return new e(t,n,t,o,(function(){}),r)},e}(Ct),zt=function(){function t(t){this.shape=t}return t.prototype.getInstructionToDrawLineTo=function(t,e){return this.getInstructionToExtendShapeWithLineTo(this.shape.transform(e.current.transformation.inverse()),t)},t.prototype.getInstructionToMoveToBeginning=function(t){return this.getInstructionToMoveToBeginningOfShape(this.shape.transform(t.current.transformation.inverse()))},Object.defineProperty(t.prototype,"currentPosition",{get:function(){return this.shape.currentPosition},enumerable:!1,configurable:!0}),t.prototype.moveToInfinityFromPointInDirection=function(t,e){return function(n,o,r){r.moveToInfinityFromPointInDirection(n,o,t,e)}},t.prototype.lineFromInfinityFromPointToInfinityFromPoint=function(t,e,n){return function(o,r,i){i.drawLineFromInfinityFromPointToInfinityFromPoint(o,r,t,e,n)}},t.prototype.lineFromInfinityFromPointToPoint=function(t,e){return function(n,o,r){r.drawLineFromInfinityFromPointToPoint(n,o,t,e)}},t.prototype.lineToInfinityFromPointInDirection=function(t,e){return function(n,o,r){r.drawLineToInfinityFromPointInDirection(n,o,t,e)}},t.prototype.lineToInfinityFromInfinityFromPoint=function(t,e,n){return function(o,r,i){i.drawLineToInfinityFromInfinityFromPoint(o,r,t,e,n)}},t.prototype.lineTo=function(t){return function(e,n){var o=n.apply(t),r=o.x,i=o.y;e.lineTo(r,i)}},t.prototype.moveTo=function(t){return function(e,n){var o=n.apply(t),r=o.x,i=o.y;e.moveTo(r,i)}},t}(),Kt=function(){function t(t,e,n,o){this.initialPosition=t,this.firstFinitePoint=e,this.lastFinitePoint=n,this.currentPosition=o}return t.prototype.transform=function(e){return new t(e.applyToPointAtInfinity(this.initialPosition),e.apply(this.firstFinitePoint),e.apply(this.lastFinitePoint),e.applyToPointAtInfinity(this.currentPosition))},t}(),Zt=function(){function t(t,e,n){this.initialPosition=t,this.firstFinitePoint=e,this.currentPosition=n}return t.prototype.transform=function(e){return new t(e.applyToPointAtInfinity(this.initialPosition),e.apply(this.firstFinitePoint),e.apply(this.currentPosition))},t}();function Jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,n,o){for(var r=0,i=t;r<i.length;r++)(0,i[r])(e,n,o)}}var Qt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$t=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return Qt(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return 0===t.initialPosition.direction.cross(t.currentPosition.direction)?this.moveToInfinityFromPointInDirection(t.firstFinitePoint,t.initialPosition.direction):Jt(this.moveToInfinityFromPointInDirection(t.lastFinitePoint,t.currentPosition.direction),this.lineToInfinityFromInfinityFromPoint(t.lastFinitePoint,t.currentPosition.direction,t.initialPosition.direction),this.lineFromInfinityFromPointToInfinityFromPoint(t.lastFinitePoint,t.firstFinitePoint,t.initialPosition.direction))},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){return rt(e)?this.lineToInfinityFromInfinityFromPoint(t.lastFinitePoint,t.currentPosition.direction,e.direction):Jt(this.lineFromInfinityFromPointToInfinityFromPoint(t.lastFinitePoint,e,t.currentPosition.direction),this.lineFromInfinityFromPointToPoint(e,t.currentPosition.direction))},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!this.shape.initialPosition.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.canAddLineTo=function(t){return!rt(t)||!t.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.addPosition=function(t){return rt(t)?this.pathBuilderProvider.fromPointAtInfinityToPointAtInfinity(new Kt(this.shape.initialPosition,this.shape.firstFinitePoint,this.shape.lastFinitePoint,t)):this.pathBuilderProvider.fromPointAtInfinityToPoint(new Zt(this.shape.initialPosition,this.shape.firstFinitePoint,t))},e}(zt),te=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ee=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return te(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){var e=this.moveToInfinityFromPointInDirection(t.currentPosition,t.initialPosition.direction);return t.currentPosition.equals(t.firstFinitePoint)?e:Jt(e,this.lineFromInfinityFromPointToInfinityFromPoint(t.currentPosition,t.firstFinitePoint,t.initialPosition.direction))},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){return rt(e)?this.lineToInfinityFromPointInDirection(t.currentPosition,e.direction):this.lineTo(e)},e.prototype.canAddLineTo=function(t){return!0},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){return rt(t)?this.pathBuilderProvider.fromPointAtInfinityToPointAtInfinity(new Kt(this.shape.initialPosition,this.shape.firstFinitePoint,this.shape.currentPosition,t)):this.pathBuilderProvider.fromPointAtInfinityToPoint(new Zt(this.shape.initialPosition,this.shape.firstFinitePoint,t))},e}(zt),ne=function(){function t(t,e){this.initialPoint=t,this.currentPosition=e}return t.prototype.transform=function(e){return new t(e.apply(this.initialPoint),e.applyToPointAtInfinity(this.currentPosition))},t}(),oe=function(){function t(t,e){this.initialPoint=t,this.currentPosition=e}return t.prototype.transform=function(e){return new t(e.apply(this.initialPoint),e.apply(this.currentPosition))},t}(),re=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ie=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return re(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return this.moveTo(t.initialPoint)},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){return rt(e)?e.direction.inSameDirectionAs(t.currentPosition.direction)?function(){}:this.lineToInfinityFromInfinityFromPoint(t.initialPoint,t.currentPosition.direction,e.direction):Jt(this.lineFromInfinityFromPointToInfinityFromPoint(t.initialPoint,e,t.currentPosition.direction),this.lineFromInfinityFromPointToPoint(e,t.currentPosition.direction))},e.prototype.canAddLineTo=function(t){return!rt(t)||!t.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){return rt(t)?this.pathBuilderProvider.fromPointToPointAtInfinity(new ne(this.shape.initialPoint,t)):this.pathBuilderProvider.fromPointToPoint(new oe(this.shape.initialPoint,t))},e}(zt),se=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ae=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return se(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return this.moveTo(t.initialPoint)},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){if(rt(e)){var n=this.lineToInfinityFromPointInDirection(t.currentPosition,e.direction);return 0===t.currentPosition.minus(t.initialPoint).cross(e.direction)?n:Jt(n,this.lineFromInfinityFromPointToInfinityFromPoint(t.currentPosition,t.initialPoint,e.direction))}return this.lineTo(e)},e.prototype.canAddLineTo=function(t){return!0},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){return rt(t)?this.pathBuilderProvider.fromPointToPointAtInfinity(new ne(this.shape.initialPoint,t)):this.pathBuilderProvider.fromPointToPoint(new oe(this.shape.initialPoint,t))},e}(zt),ce=function(){function t(t,e,n,o){this.initialPosition=t,this.containsFinitePoint=e,this.positionsSoFar=n,this.currentPosition=o}return t.prototype.transform=function(e){return new t(e.applyToPointAtInfinity(this.initialPosition),this.containsFinitePoint,this.positionsSoFar.map((function(t){return e.applyToPointAtInfinity(t)})),e.applyToPointAtInfinity(this.currentPosition))},t}(),ue=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pe=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return ue(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return t.containsFinitePoint?function(t,e,n){return n.addPathAroundViewbox(t)}:function(){}},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){if(!rt(e)){if(1===t.positionsSoFar.length)return this.lineFromInfinityFromPointToPoint(e,t.positionsSoFar[0].direction);for(var n,o=t.positionsSoFar.slice(1),r=t.initialPosition,i=[],s=0,a=o;s<a.length;s++){var c=a[s];i.push(this.lineToInfinityFromInfinityFromPoint(e,r.direction,c.direction)),r=c}return Jt((n=i,function(t,e,o){for(var r=0,i=n;r<i.length;r++)(0,i[r])(t,e,o)}),this.lineFromInfinityFromPointToPoint(e,r.direction))}},e.prototype.canAddLineTo=function(t){return!rt(t)||!t.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.containsFinitePoint=function(){return this.shape.containsFinitePoint},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){if(rt(t)){var e=t.direction.isOnSameSideOfOriginAs(this.shape.initialPosition.direction,this.shape.currentPosition.direction)?this.shape.containsFinitePoint:!this.shape.containsFinitePoint;return this.pathBuilderProvider.atInfinity(new ce(this.shape.initialPosition,e,this.shape.positionsSoFar.concat([t]),t))}return this.pathBuilderProvider.fromPointAtInfinityToPoint(new Zt(this.shape.initialPosition,t,t))},e}(zt),fe=function(){function t(){}return t.prototype.fromPointAtInfinityToPointAtInfinity=function(t){return new $t(this,t)},t.prototype.fromPointAtInfinityToPoint=function(t){return new ee(this,t)},t.prototype.fromPointToPointAtInfinity=function(t){return new ie(this,t)},t.prototype.fromPointToPoint=function(t){return new ae(this,t)},t.prototype.atInfinity=function(t){return new pe(this,t)},t.prototype.getBuilderFromPosition=function(t){return rt(t)?new pe(this,new ce(t,!1,[t],t)):new ae(this,new oe(t,t))},t}(),le=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),he=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i._initiallyWithState=e,i.pathInfinityProvider=n,i.pathInstructionBuilder=o,i.rectangle=r,i}return le(e,t),Object.defineProperty(e.prototype,"currentPosition",{get:function(){return this.pathInstructionBuilder.currentPosition},enumerable:!1,configurable:!0}),e.prototype.addInstruction=function(t){t.setInitialState(this.state),this.add(t)},e.prototype.closePath=function(){var t=Tt.create(this.state,(function(t){t.closePath()}),this.rectangle);t.setInitialState(this.state),this.add(t)},e.prototype.copy=function(t){for(var n=new e(this._initiallyWithState.copy(t),t,this.pathInstructionBuilder,this.rectangle),o=0,r=this.added;o<r.length;o++){var i=r[o];n.add(i.copy(t))}return n},e.prototype.containsFinitePoint=function(){return this.pathInstructionBuilder.containsFinitePoint()},e.prototype.isClosable=function(){return this.pathInstructionBuilder.isClosable()},e.prototype.canAddLineTo=function(t){return this.pathInstructionBuilder.canAddLineTo(t)},e.prototype.lineTo=function(t,e){var n=At(t,e.current.transformation);rt(t)&&!this.pathInstructionBuilder.containsFinitePoint()||this.addInstructionToDrawLineTo(t,e),this.pathInstructionBuilder=this.pathInstructionBuilder.addPosition(n);var o=this.pathInstructionBuilder.getInstructionToMoveToBeginning(this._initiallyWithState.state);this._initiallyWithState.replaceInstruction((function(t,e,n){o(t,e,n)}))},e.prototype.addInstructionToDrawLineTo=function(t,e){var n=this.pathInstructionBuilder.getInstructionToDrawLineTo(t,e),o=this.pathInfinityProvider.getInfinity(e),r=Ut.create(e,o,n,this.rectangle);r.setInitialState(this.state),this.add(r)},e.prototype.addPathInstruction=function(t,e,n){var o,r;t.initialPoint&&(o=this.pathInstructionBuilder.currentPosition,r=t.initialPoint,!(o?r?rt(o)?rt(r)&&o.direction.equals(r.direction):!rt(r)&&o.equals(r):!o:!r))&&this.lineTo(t.initialPoint,n),t.positionChange&&(this.pathInstructionBuilder=this.pathInstructionBuilder.addPosition(At(t.positionChange,n.current.transformation))),e.setInitialState(this.state),this.add(e)},e.create=function(t,n,o,r){var i=o.getInfinity(t),s=At(n,t.current.transformation),a=(new fe).getBuilderFromPosition(s),c=a.getInstructionToMoveToBeginning(t);return new e(Ut.create(t,i,c,r),o,a,r)},e}(gt),ye={direction:new s(0,1)},de={direction:new s(0,-1)},ve={direction:new s(-1,0)},ge={direction:new s(1,0)};function me(t,e){return!!Number.isFinite(t)||!Number.isFinite(e)&&(t<0&&e>0||t>0&&e<0)}function be(t,e,n,o){return me(t,n)&&me(e,o)}var Pe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),we=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r._initiallyWithState=e,r.rectangle=n,r.pathInfinityProvider=o,r.areaBuilder=new Xt,r}return Pe(e,t),Object.defineProperty(e.prototype,"area",{get:function(){return this.areaBuilder.area},enumerable:!1,configurable:!0}),e.prototype.getCurrentlyDrawableArea=function(){if(this.area)return this.state.current.clippingRegion?this.state.current.clippingRegion.intersectWith(this.area):this.area},e.prototype.containsFinitePoint=function(){for(var t=0,e=this.added;t<e.length;t++)if(e[t].containsFinitePoint())return!0;return!1},e.prototype.currentSubpathIsClosable=function(){return 0===this.added.length||this.added[this.added.length-1].isClosable()},e.prototype.allSubpathsAreClosable=function(){if(0===this.added.length)return!0;for(var t=0,e=this.added;t<e.length;t++)if(!e[t].isClosable())return!1;return!0},e.prototype.fillPath=function(t,e){this.drawPath(t,e)},e.prototype.strokePath=function(t,e){this.pathInfinityProvider.addDrawnLineWidth(e.current.getMaximumLineWidth()),this.pathInfinityProvider.addLineDashPeriod(e.current.getLineDashPeriod()),this.drawPath(t,e)},e.prototype.drawPath=function(t,e){if(0!==this.added.length){var n=this.added[this.added.length-1],o=this.getCurrentlyDrawableArea();this.drawnArea=o;var r=Tt.create(e,t,this.rectangle);n.addInstruction(r)}},e.prototype.clipPath=function(t,e){if(0!==this.added.length){var n=this.added[this.added.length-1],o=Tt.create(e,t,this.rectangle);n.addInstruction(o);var r=this.recreatePath();this.addClippedPath(r)}},e.prototype.closePath=function(){0!==this.added.length&&this.added[this.added.length-1].closePath()},e.prototype.moveTo=function(t,e){var n=At(t,e.current.transformation);this.areaBuilder.addPosition(n);var o=he.create(e,t,this.pathInfinityProvider,this.rectangle);o.setInitialState(this.state),this.add(o)},e.prototype.canAddLineTo=function(t,e){if(0===this.added.length)return!0;var n=At(t,e.current.transformation);return this.added[this.added.length-1].canAddLineTo(n)},e.prototype.lineTo=function(t,e){if(0!==this.added.length){var n=this.added[this.added.length-1],o=At(t,e.current.transformation);this.areaBuilder.addPosition(o),n.lineTo(t,e)}else this.moveTo(t,e)},e.prototype.moveToPositionDeterminedBy=function(t,e,n){Number.isFinite(t)?Number.isFinite(e)?this.moveTo(new s(t,e),n):this.moveTo(e<0?de:ye,n):this.moveTo(t<0?ve:ge,n)},e.prototype.rect=function(t,e,n,o,r){if(!Number.isFinite(t)&&!Number.isFinite(e))return this.moveTo({direction:new s(1,0)},r),this.lineTo({direction:new s(0,1)},r),void this.lineTo({direction:new s(-1,-1)},r);this.moveToPositionDeterminedBy(t,e,r),be(t,e,n,o)&&(Number.isFinite(t)?Number.isFinite(e)?(Number.isFinite(n)?(this.lineTo(new s(t+n,e),r),Number.isFinite(o)?(this.lineTo(new s(t+n,e+o),r),this.lineTo(new s(t,e+o),r)):this.lineTo(o>0?ye:de,r)):(this.lineTo(n>0?ge:ve,r),Number.isFinite(o)?this.lineTo(new s(t,e+o),r):this.lineTo(o>0?ye:de,r)),this.lineTo(new s(t,e),r)):(Number.isFinite(n)?this.lineTo(new s(t+n,0),r):this.lineTo(n>0?ge:ve,r),this.lineTo(o>0?ye:de,r),this.lineTo(new s(t,0),r),this.lineTo(e<0?de:ye,r)):(this.lineTo(new s(0,e),r),this.lineTo(n>0?ge:ve,r),Number.isFinite(o)?this.lineTo(new s(0,e+o),r):this.lineTo(o>0?ye:de,r),this.lineTo(t<0?ve:ge,r)),this.closePath(),this.moveToPositionDeterminedBy(t,e,r))},e.prototype.addPathInstruction=function(t,e){if(0===this.added.length){if(!t.initialPoint)return;this.moveTo(t.initialPoint,e)}var n=this.added[this.added.length-1],o=At(n.currentPosition,e.current.transformation.inverse());t.changeArea(this.areaBuilder.transformedWith(e.current.transformation),o);var r=Tt.create(e,t.instruction,this.rectangle);n.addPathInstruction(t,r,e)},e.prototype.hasDrawingAcrossBorderOf=function(t){return!t.contains(this.area)&&this.area.intersects(t)},e.prototype.isContainedBy=function(t){return t.contains(this.drawnArea)},e.prototype.intersects=function(t){return!!this.area&&this.area.intersects(t)},e.prototype.getClippedArea=function(t){return t?this.area.intersectWith(t):this.area},e.prototype.recreatePath=function(){for(var t=this.rectangle.getForPath(),n=new e(this._initiallyWithState.copy(),this.rectangle,t),o=0,r=this.added;o<r.length;o++){var i=r[o];n.add(i.copy(t))}return n.areaBuilder=this.areaBuilder.copy(),n.setInitialState(n.stateOfFirstInstruction),n},e.create=function(t,n,o){return new e(Tt.create(t,(function(t){t.beginPath()}),n),n,o)},e}(gt),Oe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ce=function(t){function e(e,n,o,r,i,s){var a=t.call(this,e,n,o,r,s)||this;return a.area=i,a}return Oe(e,t),e.prototype.hasDrawingAcrossBorderOf=function(t){return this.intersects(t)&&!this.isContainedBy(t)},e.prototype.intersects=function(t){return this.area.intersects(t)},e.prototype.isContainedBy=function(t){return t.contains(this.area)},e.createDrawing=function(t,n,o,r){return new e(t,t,n,(function(){}),o,r)},e}(Tt);function Ie(t,e){return!Number.isFinite(t)&&!Number.isFinite(e)&&(t<0&&e>0||t>0&&e<0)}function Te(t,e,n,o){return Ie(t,n)&&Ie(e,o)}var Se,_e=function(){function t(t,e){this.onChange=t,this.rectangle=e,this.previousInstructionsWithPath=jt.create(e),this.state=this.previousInstructionsWithPath.state}return t.prototype.beginPath=function(){this.replaceCurrentInstructionsWithPath(we.create(this.state,this.rectangle,this.rectangle.getForPath()))},t.prototype.changeState=function(t){this.state=this.state.withCurrentState(t(this.state.current))},t.prototype.saveState=function(){this.state=this.state.saved(),this.setInstructionToRestoreState()},t.prototype.restoreState=function(){this.state=this.state.restored(),this.setInstructionToRestoreState()},t.prototype.allSubpathsAreClosable=function(){return!this.currentInstructionsWithPath||this.currentInstructionsWithPath.allSubpathsAreClosable()},t.prototype.currentPathContainsFinitePoint=function(){return this.currentInstructionsWithPath&&this.currentInstructionsWithPath.containsFinitePoint()},t.prototype.currentSubpathIsClosable=function(){return!this.currentInstructionsWithPath||this.currentInstructionsWithPath.currentSubpathIsClosable()},t.prototype.fillPath=function(t){this.drawPath(t,(function(t,e,n){t.fillPath(e,n)}))},t.prototype.strokePath=function(){this.drawPath((function(t){t.stroke()}),(function(t,e,n){t.strokePath(e,n)}))},t.prototype.fillRect=function(t,e,n,o,r){this.drawRect(t,e,n,o,r,(function(t,e,n){t.fillPath(e,n)}))},t.prototype.strokeRect=function(t,e,n,o){this.drawRect(t,e,n,o,(function(t){t.stroke()}),(function(t,e,n){t.strokePath(e,n)}))},t.prototype.drawPath=function(t,e){if(this.currentInstructionsWithPath){var n=this.state.current.isTransformable();n||(t=this.rectangle.transformRelatively(t)),this.state=this.state.currentlyTransformed(n);var o=this.currentInstructionsWithPath.recreatePath();e(this.currentInstructionsWithPath,t,this.state),this.previousInstructionsWithPath.add(this.currentInstructionsWithPath),o.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.currentInstructionsWithPath=o,this.setInstructionToRestoreState(),this.onChange()}},t.prototype.drawRect=function(t,e,n,o,r,i){this.state.current.isTransformable()||(r=this.rectangle.transformRelatively(r));var s=this.state.currentlyTransformed(this.state.current.isTransformable()),a=we.create(s,this.rectangle,this.rectangle.getForPath());a.rect(t,e,n,o,s),i(a,r,s),this.drawBeforeCurrentPath(a),this.onChange()},t.prototype.addDrawing=function(t,e,n,o){n===r.Relative?(t=this.rectangle.transformRelatively(t),e=e.transform(this.state.current.transformation)):n===r.Absolute&&(t=this.rectangle.transformAbsolutely(t));var i=e;this.state.current.clippingRegion&&o&&(i=e.intersectWith(this.state.current.clippingRegion));var s=Ce.createDrawing(this.state.currentlyTransformed(!1),t,i,this.rectangle);this.drawBeforeCurrentPath(s),this.onChange()},t.prototype.clipPath=function(t){this.clipCurrentPath(t)},t.prototype.replaceCurrentInstructionsWithPath=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0,r=e;o<r.length;o++){var i=r[o];i.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.previousInstructionsWithPath.add(i)}t.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.currentInstructionsWithPath=t,this.setInstructionToRestoreState()},t.prototype.clipCurrentPath=function(t){this.currentInstructionsWithPath&&(this.currentInstructionsWithPath.clipPath(t,this.state),this.state=this.currentInstructionsWithPath.state)},t.prototype.setInstructionToRestoreState=function(){var t=this.previousInstructionsWithPath.state;this.instructionToRestoreState=t.getInstructionToClearStack()},t.prototype.drawBeforeCurrentPath=function(t){if(this.currentInstructionsWithPath){var e=this.currentInstructionsWithPath.recreatePath();e.setInitialState(this.currentInstructionsWithPath.state),this.replaceCurrentInstructionsWithPath(e,t)}else t.setInitialState(this.previousInstructionsWithPath.state),this.previousInstructionsWithPath.add(t),this.state=this.previousInstructionsWithPath.state},t.prototype.addPathInstruction=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.addPathInstruction(t,this.state)},t.prototype.closePath=function(){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.closePath()},t.prototype.moveTo=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.moveTo(t,this.state)},t.prototype.canAddLineTo=function(t){return!this.currentInstructionsWithPath||this.currentInstructionsWithPath.canAddLineTo(t,this.state)},t.prototype.lineTo=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.lineTo(t,this.state)},t.prototype.rect=function(t,e,n,o){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.rect(t,e,n,o,this.state)},t.prototype.intersects=function(t){return this.previousInstructionsWithPath.intersects(t)||this.currentInstructionsWithPath&&this.currentInstructionsWithPath.intersects(t)},t.prototype.clearContentsInsideArea=function(t){this.previousInstructionsWithPath.clearContentsInsideArea(t),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state)},t.prototype.clearArea=function(t,e,n,o){if(be(t,e,n,o)){var r=Te(t,e,n,o)?F:W.createRectangle(t,e,n,o),i=r.transform(this.state.current.transformation);this.intersects(i)&&(this.clearContentsInsideArea(i),this.previousInstructionsWithPath.hasDrawingAcrossBorderOf(i)&&(this.previousInstructionsWithPath.addClearRect(r,this.state,t,e,n,o),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.setInitialStateWithClippedPaths(this.state)),this.onChange())}},t.prototype.execute=function(t,e){this.previousInstructionsWithPath.length&&this.previousInstructionsWithPath.execute(t,e),this.instructionToRestoreState&&this.instructionToRestoreState(t,e)},t}(),xe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),je=function(t){function e(e,n,o,r){var i=t.call(this)||this;return i.context=e,i.startAngle=n,i.x=o,i.y=r,i}return xe(e,t),e.prototype.createTransformedGradient=function(t){var e=t.apply(new s(this.x,this.y)),n=e.x,o=e.y,r=t.getRotationAngle(),i=this.context.createConicGradient(this.startAngle+r,n,o);return this.addColorStopsToGradient(i),i},e.prototype.createGradient=function(){var t=this.context.createConicGradient(this.startAngle,this.x,this.y);return this.addColorStopsToGradient(t),t},e}(lt),Ae=function(){function t(t,e,n,o,r){var i=this;this.canvasRectangle=t,this.context=e,this.drawingIterationProvider=n,this.drawLockProvider=o,this.isTransforming=r,this.instructionSet=new _e((function(){return i.draw()}),t)}return Object.defineProperty(t.prototype,"width",{get:function(){return this.canvasRectangle.viewboxWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvasRectangle.viewboxHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.instructionSet.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformation",{get:function(){return this.canvasRectangle.transformation},set:function(t){this.canvasRectangle.transformation=t,this.draw()},enumerable:!1,configurable:!0}),t.prototype.getDrawingLock=function(){return this.drawLockProvider()},t.prototype.changeState=function(t){this.instructionSet.changeState(t)},t.prototype.measureText=function(t){this.context.save(),pt.default.getInstructionToConvertToState(this.state.currentlyTransformed(!1).current,this.canvasRectangle)(this.context,a.identity);var e=this.context.measureText(t);return this.context.restore(),e},t.prototype.saveState=function(){this.instructionSet.saveState()},t.prototype.restoreState=function(){this.instructionSet.restoreState()},t.prototype.beginPath=function(){this.instructionSet.beginPath()},t.prototype.createPatternFromImageData=function(t){return e=this,n=void 0,r=function(){var e;return function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(n){switch(n.label){case 0:return[4,createImageBitmap(t)];case 1:return e=n.sent(),[2,this.context.createPattern(e,"no-repeat")]}}))},new((o=void 0)||(o=Promise))((function(t,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}));var e,n,o,r},t.prototype.addDrawing=function(t,e,n,o){this.instructionSet.addDrawing(t,e,n,o)},t.prototype.addPathInstruction=function(t){this.instructionSet.addPathInstruction(t)},t.prototype.closePath=function(){this.instructionSet.currentSubpathIsClosable()&&this.instructionSet.closePath()},t.prototype.moveTo=function(t){this.instructionSet.moveTo(t)},t.prototype.lineTo=function(t){this.instructionSet.canAddLineTo(t)&&this.instructionSet.lineTo(t)},t.prototype.rect=function(t,e,n,o){this.instructionSet.rect(t,e,n,o)},t.prototype.currentPathCanBeFilled=function(){return this.instructionSet.allSubpathsAreClosable()&&this.instructionSet.currentPathContainsFinitePoint()},t.prototype.fillPath=function(t){this.instructionSet.fillPath(t)},t.prototype.strokePath=function(){this.instructionSet.strokePath()},t.prototype.fillRect=function(t,e,n,o,r){be(t,e,n,o)&&this.instructionSet.fillRect(t,e,n,o,r)},t.prototype.strokeRect=function(t,e,n,o){be(t,e,n,o)&&!Te(t,e,n,o)&&this.instructionSet.strokeRect(t,e,n,o)},t.prototype.clipPath=function(t){this.instructionSet.clipPath(t)},t.prototype.clearArea=function(t,e,n,o){this.instructionSet.clearArea(t,e,n,o)},t.prototype.createLinearGradient=function(t,e,n,o){return new yt(this.context,t,e,n,o)},t.prototype.createRadialGradient=function(t,e,n,o,r,i){return new vt(this.context,t,e,n,o,r,i)},t.prototype.createConicGradient=function(t,e,n){return new je(this.context,t,e,n)},t.prototype.createPattern=function(t,e){return new d(this.context.createPattern(t,e))},t.prototype.draw=function(){var t=this;this.drawingIterationProvider.provideDrawingIteration((function(){t.isTransforming()||t.canvasRectangle.measure(),t.context.restore(),t.context.save(),t.context.clearRect(0,0,t.width,t.height),t.canvasRectangle.applyInitialTransformation(t.context),t.instructionSet.execute(t.context,t.transformation)}))},t}(),Be=function(){function t(t,e){var n=this;this.context=e,this.initialTransformation=e.transformation,this.angularVelocity=Math.PI/100,this.point=t.onMoved((function(){n.setTransformation()}),!1)}return t.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(a.rotation(this.point.initial.x,this.point.initial.y,(this.point.initial.x-this.point.current.x)*this.angularVelocity))},t.prototype.withAnchor=function(t){return this},t.prototype.withoutAnchor=function(t){this.point.cancel()},t.prototype.end=function(){this.point.cancel()},t}(),Le=function(){function t(t,e,n,o,r){this.transformable=t,this.centerX=e,this.centerY=n,this.onFinish=r,this.initialTransformation=t.transformation,this.maxScaleLogStep=.1,this.currentScaleLog=0,this.targetScaleLog=Math.log(o),this.makeStep()}return t.prototype.makeStep=function(){var t=this,e=this.targetScaleLog-this.currentScaleLog;Math.abs(e)<=this.maxScaleLogStep?(this.currentScaleLog+=e,this.setTransformToCurrentScaleLog(),this.onFinish()):(this.currentScaleLog+=e<0?-this.maxScaleLogStep:this.maxScaleLogStep,this.setTransformToCurrentScaleLog(),this.stepTimeout=setTimeout((function(){return t.makeStep()}),20))},t.prototype.setTransformToCurrentScaleLog=function(){this.transformable.transformation=this.initialTransformation.before(a.zoom(this.centerX,this.centerY,Math.exp(this.currentScaleLog)))},t.prototype.cancel=function(){void 0!==this.stepTimeout&&clearTimeout(this.stepTimeout)},t}(),De=function(){function t(t,e){var n=this;this.anchor=t,this.context=e,this.initialTransformation=e.transformation,this.point=t.onMoved((function(){n.setTransformation()}),!0)}return t.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(this.getTranslation())},t.prototype.getTranslation=function(){return a.translation(this.point.current.x-this.point.initial.x,this.point.current.y-this.point.initial.y)},t.prototype.withAnchor=function(t){return t===this.anchor?this:this.context.getGestureForTwoAnchors(this.point.cancel(),t)},t.prototype.withoutAnchor=function(t){this.point.cancel()},t}(),Ee=function(){function t(t,e,n){var o=this;this.context=n,this.initialTransformation=n.transformation,this.point1=t.onMoved((function(){return o.setTransformation()}),this.fixesFirstAnchorOnInfiniteCanvas()),this.point2=e.onMoved((function(){return o.setTransformation()}),this.fixesSecondAnchorOnInfiniteCanvas())}return t.prototype.withAnchor=function(t){return this},t.prototype.withoutAnchor=function(t){var e=this.point1.cancel(),n=this.point2.cancel();return t===e?this.context.getGestureForOneAnchor(n):t===n?this.context.getGestureForOneAnchor(e):void 0},t}(),Fe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),We=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return Fe(e,t),e.prototype.fixesFirstAnchorOnInfiniteCanvas=function(){return!0},e.prototype.fixesSecondAnchorOnInfiniteCanvas=function(){return!1},e.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(a.translateZoom(this.point1.initial.x,this.point1.initial.y,this.point2.initial.x,this.point2.initial.y,this.point1.current.x,this.point1.current.y,this.point2.current.x,this.point2.current.y))},e}(Ee),Re=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return Re(e,t),e.prototype.fixesFirstAnchorOnInfiniteCanvas=function(){return!0},e.prototype.fixesSecondAnchorOnInfiniteCanvas=function(){return!0},e.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(a.translateRotateZoom(this.point1.initial.x,this.point1.initial.y,this.point2.initial.x,this.point2.initial.y,this.point1.current.x,this.point1.current.y,this.point2.current.x,this.point2.current.y))},e}(Ee),Ne=function(){function t(){this.mapped=[]}return t.prototype.onRemoved=function(t){},t.prototype.add=function(t){var e=this;this.mapped.some((function(n){return e.mapsTo(n,t)}))||this.mapped.push(this.map(t))},t.prototype.remove=function(t){var e=this,n=this.mapped.findIndex((function(n){return e.mapsTo(n,t)}));if(-1!==n){var o=this.mapped.splice(n,1)[0];this.onRemoved(o)}},t}(),Ve=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ve(e,t),e.prototype.map=function(t,e){return{listener:t,removedCallback:e}},e.prototype.mapsTo=function(t,e){return t.listener===e},e.prototype.onRemoved=function(t){t.removedCallback&&t.removedCallback()},e.prototype.addListener=function(t){this.add(t)},e.prototype.removeListener=function(t){this.remove(t)},e.prototype.dispatch=function(t){for(var e=0,n=this.mapped.map((function(t){return t.listener}));e<n.length;e++)(0,n[e])(t)},e}(Ne),He=function(){function t(t,e){this.setNewValue=t,this.timeoutInMs=e,this._changing=!1,this._firstChange=new Me,this._subsequentChange=new Me,this._changeEnd=new Me}return Object.defineProperty(t.prototype,"firstChange",{get:function(){return this._firstChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subsequentChange",{get:function(){return this._subsequentChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changeEnd",{get:function(){return this._changeEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changing",{get:function(){return this._changing},enumerable:!1,configurable:!0}),t.prototype.refreshTimeout=function(){var t=this;void 0!==this.currentTimeout&&clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout((function(){t._changing=!1,t.currentTimeout=void 0,t._changeEnd.dispatch()}),this.timeoutInMs)},t.prototype.setValue=function(t){this.setNewValue(t),this._changing||(this._changing=!0,this._firstChange.dispatch()),this._subsequentChange.dispatch(),this.refreshTimeout()},t}(),qe=function(){function t(t,e){var n=this;this.viewBox=t,this.config=e,this._transformationChangeMonitor=new He((function(t){return n.viewBox.transformation=t}),100)}return Object.defineProperty(t.prototype,"isTransforming",{get:function(){return this._transformationChangeMonitor.changing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationStart",{get:function(){return this._transformationChangeMonitor.firstChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationChange",{get:function(){return this._transformationChangeMonitor.subsequentChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationEnd",{get:function(){return this._transformationChangeMonitor.changeEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformation",{get:function(){return this.viewBox.transformation},set:function(t){this._transformationChangeMonitor.setValue(t)},enumerable:!1,configurable:!0}),t.prototype.getGestureForOneAnchor=function(t){return new De(t,this)},t.prototype.getGestureForTwoAnchors=function(t,e){return this.config.rotationEnabled?new ke(t,e,this):new We(t,e,this)},t.prototype.releaseAnchor=function(t){this.gesture&&(this.gesture=this.gesture.withoutAnchor(t))},t.prototype.zoom=function(t,e,n){var o=this;this._zoom&&this._zoom.cancel(),this._zoom=new Le(this,t,e,n,(function(){o._zoom=void 0}))},t.prototype.addRotationAnchor=function(t){this.gesture=new Be(t,this)},t.prototype.addAnchor=function(t){if(this.gesture){var e=this.gesture.withAnchor(t);e&&(this.gesture=e)}else this.gesture=this.getGestureForOneAnchor(t)},t}(),Ge=function(){function t(){this.animationFrameRequested=!1}return t.prototype.provideDrawingIteration=function(t){var e=this;this.animationFrameRequested||(this.animationFrameRequested=!0,requestAnimationFrame((function(){t(),e.animationFrameRequested=!1})))},t}(),Xe=function(){function t(t){this.drawingIterationProvider=t,this._drawHappened=new Me}return Object.defineProperty(t.prototype,"drawHappened",{get:function(){return this._drawHappened},enumerable:!1,configurable:!0}),t.prototype.provideDrawingIteration=function(t){var e=this;this.drawingIterationProvider.provideDrawingIteration((function(){t(),e._drawHappened.dispatch()}))},t}(),Ye=function(){function t(t){this.drawingIterationProvider=t,this._locks=[]}return t.prototype.removeLock=function(t){var e=this._locks.indexOf(t);this._locks.splice(e,1),0===this._locks.length&&this._draw&&this.drawingIterationProvider.provideDrawingIteration(this._draw)},t.prototype.provideDrawingIteration=function(t){this._locks.length?this._draw=t:this.drawingIterationProvider.provideDrawingIteration(t)},t.prototype.getLock=function(){var t,e=this;return t={release:function(){e.removeLock(t)}},this._locks.push(t),t},t}(),Ue=function(){function t(t,e,n,o){this.rectangle=t,this.state=e,this.getLineDashPeriod=n,this.getDrawnLineWidth=o}return t.prototype.addPathAroundViewbox=function(t){this.rectangle.addPathAroundViewbox(t,this.getDrawnLineWidth())},t.prototype.getTransformedViewbox=function(){return this.rectangle.getViewboxFromState(this.state,this.getDrawnLineWidth())},t.prototype.clearRect=function(t,e,n,o,r,i){var a=this.getTransformedViewbox(),c=e.a,u=e.b,p=e.c,f=e.d,l=e.e,h=e.f;t.save(),t.transform(c,u,p,f,l,h);var y=Number.isFinite(n)?n:a.getPointInFrontInDirection(new s(0,0),n>0?ge.direction:ve.direction).x,d=Number.isFinite(r)?n+r:a.getPointInFrontInDirection(new s(0,0),r>0?ge.direction:ve.direction).x,v=Number.isFinite(o)?o:a.getPointInFrontInDirection(new s(0,0),o>0?ye.direction:de.direction).y,g=Number.isFinite(i)?o+i:a.getPointInFrontInDirection(new s(0,0),i>0?ye.direction:de.direction).y;t.clearRect(y,v,d-y,g-v),t.restore()},t.prototype.moveToInfinityFromPointInDirection=function(t,e,n,o){var r=this.getTransformedViewbox().getPointInFrontInDirection(n,o);this.moveToTransformed(t,r,e)},t.prototype.drawLineToInfinityFromInfinityFromPoint=function(t,e,n,o,r){var i=this.getTransformedViewbox(),s=i.getPointInFrontInDirection(n,o),a=i.getPointInFrontInDirection(n,r),c=i.expandToIncludePoint(n).expandToIncludePoint(s).expandToIncludePoint(a).vertices.map((function(t){return t.point})).filter((function(t){return!t.equals(s)&&!t.equals(a)&&!t.equals(n)&&t.minus(n).isInSmallerAngleBetweenPoints(o,r)}));c.sort((function(t,e){return t.minus(n).isInSmallerAngleBetweenPoints(e.minus(n),o)?-1:1}));for(var u=s,p=0,f=0,l=c;f<l.length;f++){var h=l[f];p+=h.minus(u).mod(),this.lineToTransformed(t,h,e),u=h}p+=a.minus(u).mod(),this.lineToTransformed(t,a,e),this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,p,a,r)},t.prototype.drawLineFromInfinityFromPointToInfinityFromPoint=function(t,e,n,o,r){var i=this.getTransformedViewbox(),s=i.getPointInFrontInDirection(n,r),a=i.getPointInFrontInDirection(o,r);this.lineToTransformed(t,a,e);var c=a.minus(s).mod();this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,c,a,r)},t.prototype.drawLineFromInfinityFromPointToPoint=function(t,e,n,o){var r=this.getTransformedViewbox().getPointInFrontInDirection(n,o),i=n.minus(r).mod();this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,i,r,o),this.lineToTransformed(t,n,e)},t.prototype.drawLineToInfinityFromPointInDirection=function(t,e,n,o){var r=this.getTransformedViewbox().getPointInFrontInDirection(n,o);this.lineToTransformed(t,r,e);var i=r.minus(n).mod();this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,i,r,o)},t.prototype.ensureDistanceCoveredIsMultipleOfLineDashPeriod=function(t,e,n,o,r){var i=this.getLineDashPeriod();if(0!==i){var s=this.getDistanceLeft(n,i);if(0!==s){var a=o.plus(r.scale(s/(2*r.mod())));this.lineToTransformed(t,a,e),this.lineToTransformed(t,o,e)}}},t.prototype.lineToTransformed=function(t,e,n){var o=n.apply(e),r=o.x,i=o.y;t.lineTo(r,i)},t.prototype.moveToTransformed=function(t,e,n){var o=n.apply(e),r=o.x,i=o.y;t.moveTo(r,i)},t.prototype.getDistanceLeft=function(t,e){if(0===e)return 0;var n=t/e|0;return t-e*n==0?0:(n+1)*e-t},t}(),ze=function(){function t(t){this.canvasRectangle=t,this.drawnLineWidth=0,this.lineDashPeriod=0}return t.prototype.addDrawnLineWidth=function(t){this.drawnLineWidth=t},t.prototype.addLineDashPeriod=function(t){this.lineDashPeriod=t},t.prototype.getInfinity=function(t){var e=this;return new Ue(this.canvasRectangle,t,(function(){return e.lineDashPeriod}),(function(){return e.drawnLineWidth}))},t}();!function(t){t[t.CSS=0]="CSS",t[t.CANVAS=1]="CANVAS"}(Se||(Se={}));var Ke=function(){function t(t,e){this.base=t,this.inverseBase=e}return t.prototype.representTransformation=function(t){return this.base.before(t).before(this.inverseBase)},t.prototype.inverseRepresentTransformation=function(t){return this.inverseBase.before(t).before(this.base)},t.identity=new t(a.identity,a.identity),t}(),Ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.infiniteCanvasContext=o,r}return Ze(e,t),Object.defineProperty(e.prototype,"userTransformation",{get:function(){return this.infiniteCanvasContext.base},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infiniteCanvasContextBase",{get:function(){return this.infiniteCanvasContext.base},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inverseInfiniteCanvasContextBase",{get:function(){return this.infiniteCanvasContext.inverseBase},enumerable:!1,configurable:!0}),e.prototype.representInfiniteCanvasContextTransformation=function(t){return this.infiniteCanvasContext.inverseRepresentTransformation(t)},e.prototype.executeInTransformedInfiniteCanvasContext=function(t,e){var n=this.infiniteCanvasContextBase,o=n.a,r=n.b,i=n.c,s=n.d,a=n.e,c=n.f;e.save(),e.transform(o,r,i,s,a,c),t(e,this.userTransformation),e.restore()},e}(Ke),Qe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.withBase=function(t,n){return new e(t,n,this.infiniteCanvasContext)},e.prototype.withUserTransformation=function(t,n){return new e(this.base,this.inverseBase,new Ke(t,n))},e.create=function(t){return new e(t.inverseScreenTransformation,t.screenTransformation,Ke.identity)},e}(Je),tn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),en=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.canvasContextSystem=o,r.infiniteCanvasContextBase=o.infiniteCanvasContextBase.before(o.base),r.inverseInfiniteCanvasContextBase=o.inverseBase.before(o.inverseInfiniteCanvasContextBase),r}return tn(e,t),Object.defineProperty(e.prototype,"userTransformation",{get:function(){return this.canvasContextSystem.userTransformation},enumerable:!1,configurable:!0}),e.prototype.setTransformationToTransformInfiniteCanvasContext=function(t,e){var n=this.canvasContextSystem.representInfiniteCanvasContextTransformation(e).before(this.canvasContextSystem.base),o=n.a,r=n.b,i=n.c,s=n.d,a=n.e,c=n.f;t.setTransform(o,r,i,s,a,c)},e.prototype.setCanvasContextTransformation=function(t){if(!this.canvasContextSystem.base.equals(a.identity)){var e=this.canvasContextSystem.base,n=e.a,o=e.b,r=e.c,i=e.d,s=e.e,c=e.f;t.setTransform(n,o,r,i,s,c)}},e.prototype.rebaseToInfiniteCanvasContext=function(t,e){var n=t.before(this.infiniteCanvasContextBase);return e.transform(n.inverse())},e.prototype.executeInTransformedInfiniteCanvasContext=function(t,e){this.canvasContextSystem.executeInTransformedInfiniteCanvasContext(t,e)},e.prototype.executeInUntransformedInfiniteCanvasContext=function(t,e){var n=this.infiniteCanvasContextBase,o=n.a,r=n.b,i=n.c,s=n.d,a=n.e,c=n.f;e.save(),e.setTransform(o,r,i,s,a,c),t(e,this.userTransformation),e.restore()},e}(Ke),nn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),on=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nn(e,t),e.prototype.withScreenTransformation=function(t,n){return new e(t,n,this.canvasContextSystem.withBase(n,t))},e.prototype.withUserTransformation=function(t,n){return new e(this.base,this.inverseBase,this.canvasContextSystem.withUserTransformation(t,n))},e.create=function(t){return new e(t.screenTransformation,t.inverseScreenTransformation,$e.create(t))},e}(en),rn=function(){function t(t){this.screen=t,this.infiniteCanvasContextBase=t.infiniteCanvasContextBase.before(t.base),this.inverseInfiniteCanvasContextBase=t.inverseBase.before(t.inverseInfiniteCanvasContextBase)}return Object.defineProperty(t.prototype,"userTransformation",{get:function(){return this.screen.userTransformation},enumerable:!1,configurable:!0}),t.prototype.setTransformationToTransformInfiniteCanvasContext=function(t,e){this.screen.setTransformationToTransformInfiniteCanvasContext(t,e)},t.prototype.setCanvasContextTransformation=function(t){this.screen.setCanvasContextTransformation(t)},t.prototype.rebaseFromScreenContextToInfiniteCanvasContext=function(t,e){return this.screen.rebaseToInfiniteCanvasContext(t,e)},t.prototype.executeInTransformedInfiniteCanvasContext=function(t,e){this.screen.executeInTransformedInfiniteCanvasContext(t,e)},t.prototype.executeInUntransformedInfiniteCanvasContext=function(t,e){this.screen.executeInUntransformedInfiniteCanvasContext(t,e)},t}(),sn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),an=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sn(e,t),e.prototype.withUserTransformation=function(t){return new e(this.screen.withUserTransformation(t,t.inverse()))},e.prototype.withScreenTransformation=function(t,n){return new e(this.screen.withScreenTransformation(t,n))},e.create=function(t){return new e(on.create(t))},e}(rn),cn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cn(e,t),e.prototype.changeUserTransformation=function(t,n,o){var r=this.infiniteCanvasContext.base.before(this.base).before(t),i=o.before(r);return new e(i,i.inverse(),new Ke(n,o))},e.create=function(){return new e(a.identity,a.identity,Ke.identity)},e}(Je),pn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pn(e,t),e.prototype.withBase=function(t,n){return new e(t,n,this.canvasContextSystem)},e.prototype.withUserTransformation=function(t,n){var o=this.userTransformation.inverse().before(t),r=this.representTransformation(o);return new e(this.base,this.inverseBase,this.canvasContextSystem.changeUserTransformation(r,t,n))},e.create=function(t){return new e(t.screenTransformation,t.inverseScreenTransformation,un.create())},e}(en),ln=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ln(e,t),e.prototype.withUserTransformation=function(t){return new e(this.screen.withUserTransformation(t,t.inverse()))},e.prototype.withScreenTransformation=function(t,n){return new e(this.screen.withBase(t,n))},e.create=function(t){return new e(fn.create(t))},e}(rn);function yn(t){var e=t.viewboxWidth,n=t.viewboxHeight,o=t.screenWidth,r=t.screenHeight,i=W.createRectangle(0,0,e,n),s=new a(o/e,0,0,r/n,0,0);return{screenWidth:o,screenHeight:r,viewboxWidth:e,viewboxHeight:n,polygon:i,screenTransformation:s,inverseScreenTransformation:s.inverse()}}var dn=function(){function t(t,e){this.measurementProvider=t,this.config=e,this.unitsUsed=e.units===Se.CSS?Se.CSS:Se.CANVAS;var n=yn(this.measurementProvider.measure());this.addMeasurement(n),this.coordinateSystems=e.units===Se.CSS?an.create(n):hn.create(n)}return Object.defineProperty(t.prototype,"transformation",{get:function(){return this.coordinateSystems.userTransformation},set:function(t){this.coordinateSystems=this.coordinateSystems.withUserTransformation(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"infiniteCanvasContextBase",{get:function(){return this.coordinateSystems.infiniteCanvasContextBase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inverseInfiniteCanvasContextBase",{get:function(){return this.coordinateSystems.inverseInfiniteCanvasContextBase},enumerable:!1,configurable:!0}),t.prototype.isChange=function(t){return t.viewboxWidth!==this.viewboxWidth||t.viewboxHeight!==this.viewboxHeight||t.screenWidth!==this.screenWidth||t.screenHeight!==this.screenHeight},t.prototype.addMeasurement=function(t){this.viewboxWidth=t.viewboxWidth,this.viewboxHeight=t.viewboxHeight,this.screenWidth=t.screenWidth,this.screenHeight=t.screenHeight,this.polygon=t.polygon},t.prototype.measure=function(){var t,e,n=this.config.units===Se.CSS?Se.CSS:Se.CANVAS;n===Se.CANVAS&&this.unitsUsed===Se.CSS&&(this.coordinateSystems=(t=this.coordinateSystems,new hn(new fn(t.screen.base,t.screen.inverseBase,new un(a.identity,a.identity,t.screen.canvasContextSystem.infiniteCanvasContext))))),n===Se.CSS&&this.unitsUsed===Se.CANVAS&&(this.coordinateSystems=(e=this.coordinateSystems,new an(new on(e.screen.base,e.screen.inverseBase,new $e(e.screen.inverseBase,e.screen.base,e.screen.canvasContextSystem.infiniteCanvasContext))))),this.unitsUsed=n;var o=this.measurementProvider.measure();if(this.isChange(o)){var r=yn(o);this.addMeasurement(r),this.coordinateSystems=this.coordinateSystems.withScreenTransformation(r.screenTransformation,r.inverseScreenTransformation)}},t.prototype.getTransformationInstruction=function(t){var e=this;return function(n){e.coordinateSystems.setTransformationToTransformInfiniteCanvasContext(n,t)}},t.prototype.getCSSPosition=function(t,e){var n=this.measurementProvider.measure(),o=n.left,r=n.top;return new s(t-o,e-r)},t.prototype.getForPath=function(){return new ze(this)},t.prototype.getViewboxFromState=function(t,e){return this.coordinateSystems.rebaseFromScreenContextToInfiniteCanvasContext(t.current.transformation,this.polygon.expandByDistance(e*this.transformation.scale))},t.prototype.applyInitialTransformation=function(t){this.coordinateSystems.setCanvasContextTransformation(t)},t.prototype.transformRelatively=function(t){var e=this;return function(n){e.coordinateSystems.executeInTransformedInfiniteCanvasContext(t,n)}},t.prototype.transformAbsolutely=function(t){var e=this;return function(n){e.coordinateSystems.executeInUntransformedInfiniteCanvasContext(t,n)}},t.prototype.addPathAroundViewbox=function(t,e){var n=this.viewboxWidth+2*e,o=this.viewboxHeight+2*e;t.save(),t.setTransform(1,0,0,1,0,0),t.rect(-e,-e,n,o),t.restore()},t}(),vn=function(){function t(t){this.canvas=t}return t.prototype.measure=function(){var t=this.canvas.getBoundingClientRect();return{left:t.left,top:t.top,screenWidth:t.width,screenHeight:t.height,viewboxWidth:this.canvas.width,viewboxHeight:this.canvas.height}},t}(),gn=function(){function t(t){this.canvas=t,this.listeners=[]}return t.prototype.notifyListeners=function(){for(var t=0,e=this.listeners;t<e.length;t++)(0,e[t])()},t.prototype.createObserver=function(){var t=this;this.observer=new ResizeObserver((function(){return t.notifyListeners()})),this.observer.observe(this.canvas)},t.prototype.addListener=function(t){this.listeners.push(t),this.observer||this.createObserver()},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>-1&&(this.listeners.splice(e,1),0===this.listeners.length&&(this.observer.disconnect(),this.observer=void 0))},t}();function mn(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}}var bn=function(){return bn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},bn.apply(this,arguments)},Pn={transformationstart:null,transformationchange:null,transformationend:null},wn={auxclick:null,click:null,contextmenu:null,dblclick:null,mouseenter:null,mouseleave:null,mouseout:null,mouseover:null,mouseup:null},On={gotpointercapture:null,lostpointercapture:null,pointerenter:null,pointerout:null,pointerover:null},Cn={drag:null,dragend:null,dragenter:null,dragleave:null,dragover:null,dragstart:null,drop:null},In={touchcancel:null,touchend:null},Tn=bn(bn(bn(bn({},wn),On),Cn),In),Sn={mousedown:null,mousemove:null,pointerdown:null,pointermove:null,pointerleave:null,pointercancel:null,pointerup:null,wheel:null,touchstart:null,touchmove:null,wheelignored:null,touchignored:null};function _n(t){return Pn.hasOwnProperty(t)}function xn(t){return Tn.hasOwnProperty(t)||Sn.hasOwnProperty(t)}function jn(t){return Sn.hasOwnProperty(t)}function An(t){return wn.hasOwnProperty(t)}function Bn(t){return On.hasOwnProperty(t)}function Ln(t){return Cn.hasOwnProperty(t)}function Dn(t){return In.hasOwnProperty(t)}var En=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fn=function(t){function e(e){var n=t.call(this)||this;return n.source=e,n}return En(e,t),e.prototype.map=function(t){var e=this,n=function(){e.remove(t),t.removedCallback&&t.removedCallback()};return this.source.addListener(t.listener,n),{listener:t.listener,removedCallback:n}},e.prototype.mapsTo=function(t,e){return t.listener===e.listener},e.prototype.onRemoved=function(t){t.removedCallback(),this.source.removeListener(t.listener)},e.prototype.addListener=function(t,e){this.add({listener:t,removedCallback:e})},e.prototype.removeListener=function(t){this.remove({listener:t})},e}(Ne),Wn=function(t){function e(e,n){var o=t.call(this)||this;return o.transform=n,o.old=new Fn(e),o}return En(e,t),e.prototype.map=function(t){var e=this,n={oldListener:void 0,newListener:t.listener,removedCallback:function(){t.removedCallback&&t.removedCallback()}};return n.oldListener=this.transform(t.listener,(function(e){return n.removedCallback=function(){t.removedCallback&&t.removedCallback(),e()}})),this.old.addListener(n.oldListener,(function(){return e.removeListener(t.listener)})),n},e.prototype.mapsTo=function(t,e){return t.newListener===e.listener},e.prototype.onRemoved=function(t){this.old.removeListener(t.oldListener),t.removedCallback()},e.prototype.addListener=function(t,e){this.add({listener:t,removedCallback:e})},e.prototype.removeListener=function(t){this.remove({listener:t})},e}(Ne);function Rn(t,e){return new Wn(t,e)}function kn(t,e){return Rn(t,(function(t){return function(n){t(e(n))}}))}var Nn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Vn(t){return!!t&&"function"==typeof t.handleEvent}var Mn=function(t){function e(e){var n=t.call(this)||this;return n.source=e,n}return Nn(e,t),e.prototype.mapsTo=function(t,e){return t.listenerObject===e.listenerObject},e.prototype.map=function(t){var e=this,n=t.listenerObject,o=t.removedCallback,r=function(t){n.handleEvent(t)},i=function(){e.remove(t),o&&o()};return this.source.addListener(r,i),{listener:r,listenerObject:n,removedCallback:i}},e.prototype.onRemoved=function(t){this.source.removeListener(t.listener),t.removedCallback()},e}(Ne),Hn=function(){function t(t){this.source=t,this.listenerObjectCollection=new Mn(t)}return t.prototype.addListener=function(t,e){Vn(t)?this.listenerObjectCollection.add({listenerObject:t,removedCallback:e}):this.source.addListener(t,e)},t.prototype.removeListener=function(t){Vn(t)?this.listenerObjectCollection.remove({listenerObject:t}):this.source.removeListener(t)},t}();function qn(t){return new Hn(t)}var Gn=function(){function t(t){var e=this;this.source=t,this.firstDispatcher=new Me,this.secondDispatcher=new Me,this.numberOfListeners=0,this.sourceListener=function(t){return e.dispatchEvent(t)}}return t.prototype.add=function(){0===this.numberOfListeners&&this.source.addListener(this.sourceListener),this.numberOfListeners++},t.prototype.remove=function(){this.numberOfListeners--,0===this.numberOfListeners&&this.source.removeListener(this.sourceListener)},t.prototype.dispatchEvent=function(t){this.firstDispatcher.dispatch(t),this.secondDispatcher.dispatch(t)},t.prototype.build=function(){var t=this;return{first:Rn(this.firstDispatcher,(function(e,n){return t.add(),n((function(){return t.remove()})),e})),second:Rn(this.secondDispatcher,(function(e,n){return t.add(),n((function(){return t.remove()})),e}))}},t}();function Xn(t){return new Gn(t).build()}function Yn(t,e){return Rn(t,(function(t){return function(n){e(n)&&t(n)}}))}var Un=function(){function t(t,e){t=function(t,e){return Rn(t,(function(t){return function(n){t.apply(e,[n])}}))}(t,e),this._onceSource=qn(function(t){var e=Rn(t,(function(t){return function(n){t(n),e.removeListener(t)}}));return e}(t)),this.source=qn(t)}return t.prototype.addListener=function(t,e){e&&e.once?this._onceSource.addListener(t):this.source.addListener(t)},t.prototype.removeListener=function(t){this.source.removeListener(t),this._onceSource.removeListener(t)},t}(),zn=function(){function t(t,e){this.captureSource=t,this.bubbleSource=e}return Object.defineProperty(t.prototype,"on",{get:function(){return this.onEventHandler},set:function(t){t?(this.wrappedOnEventHandler=function(e){return t.apply(this,[e])},this.onEventHandler=t,this.bubbleSource.addListener(this.wrappedOnEventHandler)):(this.bubbleSource.removeListener(this.wrappedOnEventHandler),this.wrappedOnEventHandler=null,this.onEventHandler=null)},enumerable:!1,configurable:!0}),t.prototype.addListener=function(t,e){var n=e&&("boolean"==typeof e?void 0:e);("boolean"==typeof e?e:e&&e.capture)?this.captureSource.addListener(t,n):this.bubbleSource.addListener(t,n)},t.prototype.removeListener=function(t,e){("boolean"==typeof e?e:e&&e.capture)?this.captureSource.removeListener(t):this.bubbleSource.removeListener(t)},t}();function Kn(t,e,n,o){return function(t,e,n){return new zn(new Un(t,n),new Un(e,n))}(kn(Yn(t,(function(t){return!t.immediatePropagationStopped})),(function(t){return t.getResultEvent(n)})),kn(Yn(e,(function(t){return!t.propagationStopped&&!t.immediatePropagationStopped})),(function(t){return t.getResultEvent(n)})),o)}function Zn(t){var e=Xn(t),n=e.first,o=Xn(e.second);return{captureSource:n,bubbleSource:o.first,afterBubble:o.second}}var Jn=function(){function t(t,e){this.rectangle=t,this.infiniteCanvas=e,this.cache={}}return t.prototype.map=function(t,e){return function(t,e,n){var o=Zn(t);return Kn(o.captureSource,o.bubbleSource,e,n)}(kn(t,e),this.rectangle,this.infiniteCanvas)},t.prototype.setOn=function(t,e){if(e)this.cache[t]||(this.cache[t]=this.getEventSource(t)),this.cache[t].on=e;else{if(!this.cache[t])return;this.cache[t].on=null}},t.prototype.getOn=function(t){return this.cache[t]?this.cache[t].on:null},t.prototype.addEventListener=function(t,e,n){this.cache[t]||(this.cache[t]=this.getEventSource(t)),function(t,e,n){Vn(e),t.addListener(e,n)}(this.cache[t],e,n)},t.prototype.removeEventListener=function(t,e,n){this.cache[t]&&function(t,e,n){Vn(e),t.removeListener(e,n)}(this.cache[t],e,n)},t}(),Qn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qn(e,t),e.prototype.getEventSource=function(t){return this.cache&&this.cache[t]||(this.cache=this.createEvents()),this.cache[t]},e}(Jn),to=function(){function t(t,e){this.canvasEvent=t,this.preventableDefault=e}return Object.defineProperty(t.prototype,"bubbles",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTrusted",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventPhase",{get:function(){return Event.AT_TARGET},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this.preventableDefault.cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this.preventableDefault.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AT_TARGET",{get:function(){return Event.AT_TARGET},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BUBBLING_PHASE",{get:function(){return Event.BUBBLING_PHASE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CAPTURING_PHASE",{get:function(){return Event.CAPTURING_PHASE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NONE",{get:function(){return Event.NONE},enumerable:!1,configurable:!0}),t.prototype.initEvent=function(t,e,n){},t.prototype.preventDefault=function(){this.preventableDefault.preventDefault()},t.prototype.stopImmediatePropagation=function(){this.canvasEvent.stopImmediatePropagation()},t.prototype.stopPropagation=function(){this.canvasEvent.stopPropagation()},t}(),eo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),no=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.type=o,r}return eo(e,t),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"returnValue",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return[]},e}(to),oo=function(){function t(t){this.preventableDefault=t,this.propagationStopped=!1,this.immediatePropagationStopped=!1}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return this.preventableDefault.infiniteCanvasDefaultPrevented},enumerable:!1,configurable:!0}),t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=!0},t.prototype.getResultEvent=function(t){return this.resultEvent||(this.resultEvent=this.createResultEvent(t)),this.resultEvent},t}(),ro=function(){function t(){}return Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this._defaultPrevented=!0},t}(),io=function(){function t(){}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){},t}(),so=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ao=function(t){function e(e){return t.call(this,e?new ro:new io)||this}return so(e,t),e}(oo),co=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),uo=function(t){function e(e,n){var o=t.call(this,e,n,"draw")||this;return o.transformation=e.transformation,o.inverseTransformation=e.inverseTransformation,o}return co(e,t),e}(no),po=function(t){function e(){return t.call(this,!1)||this}return co(e,t),e.prototype.createResultEvent=function(t){return this.transformation=mn(t.inverseInfiniteCanvasContextBase),this.inverseTransformation=mn(t.infiniteCanvasContextBase),new uo(this,this.preventableDefault)},e}(ao),fo=function(t){function e(e,n,o){var r=t.call(this,n,o)||this;return r.drawingIterationProvider=e,r}return co(e,t),e.prototype.createEvents=function(){return{draw:this.map(this.drawingIterationProvider.drawHappened,(function(){return new po}))}},e}($n),lo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ho=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.transformation=e.transformation,r.inverseTransformation=e.inverseTransformation,r}return lo(e,t),e}(no),yo=function(t){function e(e){var n=t.call(this,!1)||this;return n.type=e,n}return lo(e,t),e.prototype.createResultEvent=function(t){return this.transformation=mn(t.inverseInfiniteCanvasContextBase),this.inverseTransformation=mn(t.infiniteCanvasContextBase),new ho(this,this.preventableDefault,this.type)},e}(ao),vo=function(t){function e(e,n,o){var r=t.call(this,n,o)||this;return r.transformer=e,r}return lo(e,t),e.prototype.createEvents=function(){return{transformationstart:this.map(this.transformer.transformationStart,(function(){return new yo("transformationstart")})),transformationchange:this.map(this.transformer.transformationChange,(function(){return new yo("transformationchange")})),transformationend:this.map(this.transformer.transformationEnd,(function(){return new yo("transformationend")}))}},e}($n);function go(t,e){return{addListener:function(n){t.addEventListener(e,n)},removeListener:function(n){t.removeEventListener(e,n)}}}var mo=function(){function t(t){this.event=t}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeDefaultPrevented",{get:function(){return this.event.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeCancelable",{get:function(){return this.event.cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this.event.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this.event.cancelable},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.event.preventDefault()},t}(),bo=function(){function t(t){this.event=t}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeDefaultPrevented",{get:function(){return this.event.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeCancelable",{get:function(){return this.event.cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(t){this._defaultPrevented=!0,t&&this.event.preventDefault()},t}(),Po=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wo=function(t){function e(e,n){var o=t.call(this,n?new bo(e):new mo(e))||this;return o.event=e,o}return Po(e,t),e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.event&&this.event.stopPropagation()},e.prototype.stopImmediatePropagation=function(){t.prototype.stopImmediatePropagation.call(this),this.event&&this.event.stopImmediatePropagation()},e}(oo),Oo=function(){function t(t,e,n,o){this.offsetX=t,this.offsetY=e,this.movementX=n,this.movementY=o}return t.prototype.toInfiniteCanvasCoordinates=function(e){var n=e.inverseInfiniteCanvasContextBase.apply(new s(this.offsetX,this.offsetY)),o=n.x,r=n.y,i=e.inverseInfiniteCanvasContextBase.untranslated().apply(new s(this.movementX,this.movementY));return new t(o,r,i.x,i.y)},t.create=function(e){return new t(e.offsetX,e.offsetY,e.movementX,e.movementY)},t}(),Co=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Io=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.event=o,r}return Co(e,t),Object.defineProperty(e.prototype,"nativeDefaultPrevented",{get:function(){return this.preventableDefault.nativeDefaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeCancelable",{get:function(){return this.preventableDefault.nativeCancelable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return this.event.cancelBubble},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composed",{get:function(){return this.event.composed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.event.currentTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"returnValue",{get:function(){return this.event.returnValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return this.event.srcElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.event.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this.event.timeStamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.event.type},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(t){this.preventableDefault.preventDefault(t)},e.prototype.composedPath=function(){return this.event.composedPath()},e}(to),To=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return To(e,t),Object.defineProperty(e.prototype,"detail",{get:function(){return this.event.detail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.event.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"which",{get:function(){return this.event.which},enumerable:!1,configurable:!0}),e.prototype.initUIEvent=function(t,e,n,o,r){},e}(Io),_o=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xo=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.offsetX=r.offsetX,i.offsetY=r.offsetY,i.movementX=r.movementX,i.movementY=r.movementY,i}return _o(e,t),Object.defineProperty(e.prototype,"altKey",{get:function(){return this.event.altKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this.event.button},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){return this.event.buttons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.event.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.event.clientY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this.event.ctrlKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metaKey",{get:function(){return this.event.metaKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.event.pageX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.event.pageY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relatedTarget",{get:function(){return this.event.relatedTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.event.screenX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.event.screenY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this.event.shiftKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.event.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.event.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(t){return this.event.getModifierState(t)},e.prototype.initMouseEvent=function(t,e,n,o,r,i,s,a,c,u,p,f,l,h,y){},e}(So),jo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ao=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=Oo.create(e),o}return jo(e,t),e.prototype.createResultEvent=function(t){return new xo(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(wo),Bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lo=function(t){function e(e,n,o,r,i,s){var a=t.call(this,e,n,o,r)||this;return a.width=i,a.height=s,a}return Bo(e,t),e.prototype.toInfiniteCanvasCoordinates=function(n){var o=t.prototype.toInfiniteCanvasCoordinates.call(this,n),r=o.offsetX,i=o.offsetY,a=o.movementX,c=o.movementY,u=n.inverseInfiniteCanvasContextBase.untranslated().apply(new s(this.width,this.height));return new e(r,i,a,c,u.x,u.y)},e.create=function(n){var o=t.create.call(this,n);return new e(o.offsetX,o.offsetY,o.movementX,o.movementY,n.width,n.height)},e}(Oo),Do=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Eo=function(t){function e(e,n,o,r){return t.call(this,e,n,o,r)||this}return Do(e,t),Object.defineProperty(e.prototype,"isPrimary",{get:function(){return this.event.isPrimary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.event.pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerType",{get:function(){return this.event.pointerType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pressure",{get:function(){return this.event.pressure},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tangentialPressure",{get:function(){return this.event.tangentialPressure},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tiltX",{get:function(){return this.event.tiltX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tiltY",{get:function(){return this.event.tiltY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"twist",{get:function(){return this.event.twist},enumerable:!1,configurable:!0}),e.prototype.getCoalescedEvents=function(){return console.warn("`PointerEvent.getCoalescedEvents()` is currently not supported by InfiniteCanvas"),[]},e.prototype.getPredictedEvents=function(){return console.warn("`PointerEvent.getPredictedEvents()` is currently not supported by InfiniteCanvas"),[]},e}(xo),Fo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wo=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=Lo.create(e),o}return Fo(e,t),e.prototype.createResultEvent=function(t){return new Eo(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(wo),Ro=function(t,e){this.initial=t,this.cancel=e,this.current=t},ko=function(){function t(t){this.point=t,this.moveEventDispatcher=new Me,this._fixedOnInfiniteCanvas=!1}return Object.defineProperty(t.prototype,"fixedOnInfiniteCanvas",{get:function(){return this._fixedOnInfiniteCanvas},enumerable:!1,configurable:!0}),t.prototype.removeHandler=function(t){this.moveEventDispatcher.removeListener(t)},t.prototype.moveTo=function(t,e){var n=new s(t,e);this.point=n,this.moveEventDispatcher.dispatch(n)},t.prototype.onMoved=function(t,e){var n,o=this;this._fixedOnInfiniteCanvas=e;var r=function(e){n.current=e,t()};return this.moveEventDispatcher.addListener(r),n=new Ro(this.point,(function(){return o.removeHandler(r),o._fixedOnInfiniteCanvas=!1,o}))},t}(),No=function(){function t(t){this.pointerEvent=t,this._defaultPrevented=!1,this.anchor=new ko(new s(t.offsetX,t.offsetY))}return Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"touchId",{get:function(){return this._touchId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.pointerEvent.pointerId},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this._defaultPrevented=!0},t.prototype.setTouchId=function(t){this._touchId=t},t.prototype.updatePointerEvent=function(t){this.pointerEvent=t,this.anchor.moveTo(t.offsetX,t.offsetY)},t}(),Vo=function(){function t(){this.anchors=[]}return t.prototype.find=function(t){return this.anchors.find(t)},t.prototype.getAll=function(t){return this.anchors.filter(t)},t.prototype.getAnchorForTouch=function(t){return this.anchors.find((function(e){return e.touchId===t}))},t.prototype.addAnchorForPointerEvent=function(t){var e=new No(t);this.anchors.push(e)},t.prototype.updateAnchorForPointerEvent=function(t){var e=this.getAnchorForPointerEvent(t);e?e.updatePointerEvent(t):this.addAnchorForPointerEvent(t)},t.prototype.getAnchorForPointerEvent=function(t){return this.anchors.find((function(e){return e.pointerId===t.pointerId}))},t.prototype.removeAnchor=function(t){var e=this.anchors.findIndex((function(e){return e===t}));e>-1&&this.anchors.splice(e,1)},t}(),Mo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ho=function(t){function e(e,n,o,r,i,s){var a=t.call(this,e,n,o,r)||this;return a.deltaX=i,a.deltaY=s,a}return Mo(e,t),e.prototype.toInfiniteCanvasCoordinates=function(n){var o=t.prototype.toInfiniteCanvasCoordinates.call(this,n),r=o.offsetX,i=o.offsetY,a=o.movementX,c=o.movementY,u=n.inverseInfiniteCanvasContextBase.untranslated().apply(new s(this.deltaX,this.deltaY));return new e(r,i,a,c,u.x,u.y)},e.create=function(n){var o=t.create.call(this,n);return new e(o.offsetX,o.offsetY,o.movementX,o.movementY,n.deltaX,n.deltaY)},e}(Oo),qo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Go=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o,r)||this;return i.deltaX=r.deltaX,i.deltaY=r.deltaY,i}return qo(e,t),Object.defineProperty(e.prototype,"deltaMode",{get:function(){return this.event.deltaMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deltaZ",{get:function(){return this.event.deltaZ},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DOM_DELTA_LINE",{get:function(){return this.event.DOM_DELTA_LINE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DOM_DELTA_PAGE",{get:function(){return this.event.DOM_DELTA_PAGE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DOM_DELTA_PIXEL",{get:function(){return this.event.DOM_DELTA_PIXEL},enumerable:!1,configurable:!0}),e}(xo),Xo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yo=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=Ho.create(e),o}return Xo(e,t),e.prototype.createResultEvent=function(t){return new Go(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(wo);function Uo(t,e){for(var n=[],o=0;o<t.length;o++){var r=t[o];e&&!e(r)||n.push(r)}return n}var zo=function(){function t(t,e,n,o,r,i){this.x=t,this.y=e,this.radiusX=n,this.radiusY=o,this.rotationAngle=r,this.identifier=i}return t.prototype.toInfiniteCanvasCoordinates=function(e){var n=e.inverseInfiniteCanvasContextBase,o=n.apply(new s(this.x,this.y));return new t(o.x,o.y,this.radiusX*n.scale,this.radiusY*n.scale,this.rotationAngle+n.getRotationAngle(),this.identifier)},t.create=function(e,n){var o=n.getCSSPosition(e.clientX,e.clientY);return new t(o.x,o.y,e.radiusX,e.radiusY,e.rotationAngle,e.identifier)},t}(),Ko=function(){function t(){this.translatedProps=[],this.createdProps=[]}return t.prototype.toInfiniteCanvasCoordinates=function(t,e){var n=this.translatedProps.find((function(e){return e.identifier===t.identifier}));return n||(n=t.toInfiniteCanvasCoordinates(e),this.translatedProps.push(n),n)},t.prototype.createProps=function(t,e){var n=this.createdProps.find((function(e){return e.identifier===t.identifier}));return n||(n=zo.create(t,e),this.createdProps.push(n),n)},t.prototype.dispose=function(){this.translatedProps.splice(0,this.translatedProps.length),this.createdProps.splice(0,this.createdProps.length)},t}(),Zo=function(){function t(t,e,n){this.targetTouches=t,this.changedTouches=e,this.touches=n}return t.prototype.toInfiniteCanvasCoordinates=function(e){var n=new Ko,o=new t(this.targetTouches.map((function(t){return n.toInfiniteCanvasCoordinates(t,e)})),this.changedTouches.map((function(t){return n.toInfiniteCanvasCoordinates(t,e)})),this.touches.map((function(t){return n.toInfiniteCanvasCoordinates(t,e)})));return n.dispose(),o},t.create=function(e,n,o){var r=new Ko,i=n.map((function(t){return r.createProps(t,e)})),s=o.map((function(t){return r.createProps(t,e)}));return r.dispose(),new t(i,s,i)},t}(),Jo=function(){function t(t,e){this.touch=t,this.infiniteCanvasX=e.x,this.infiniteCanvasY=e.y,this.radiusX=e.radiusX,this.radiusY=e.radiusY,this.rotationAngle=e.rotationAngle}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.touch.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.touch.clientY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"force",{get:function(){return this.touch.force},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.touch.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.touch.pageX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.touch.pageY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.touch.screenX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.touch.screenY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.touch.target},enumerable:!1,configurable:!0}),t}(),Qo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qo(e,t),e.prototype.item=function(t){return this[t]},e}(Array);function tr(t,e){for(var n=t.length,o=0;o<n;o++){var r=t[o];if(r.identifier===e)return r}}function er(t,e){for(var n=0,o=t;n<o.length;n++){var r=tr(o[n],e);if(r)return r}}function nr(t,e){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],s=er(t,i.identifier);s&&n.push(new Jo(s,i))}return new($o.bind.apply($o,function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}([void 0],n,!1)))}var or=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.touches=nr([o.touches],r.touches),i.targetTouches=nr([o.touches],r.targetTouches),i.changedTouches=nr([o.touches,o.changedTouches],r.changedTouches),i}return Qo(e,t),Object.defineProperty(e.prototype,"altKey",{get:function(){return this.event.altKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this.event.ctrlKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metaKey",{get:function(){return this.event.metaKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this.event.shiftKey},enumerable:!1,configurable:!0}),e}(So),rr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ir=function(t){function e(e,n,o){var r=t.call(this,e,o)||this;return r.props=n,r}return rr(e,t),e.prototype.createResultEvent=function(t){return new or(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e.create=function(t,n,o,r,i){return new e(n,Zo.create(t,o,r),i)},e}(wo),sr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ar=function(){function t(t,e){this.source=t,this.listener=e,t.addListener(e)}return t.prototype.remove=function(){this.source.removeListener(this.listener)},t}(),cr=function(){function t(t,e,n,o){var r;this.listener=n,this.onRemoved=o,this.otherSubscription=new ar(e,(function(t){r=t})),this.subscription=new ar(t,(function(t){n([t,r])}))}return t.prototype.remove=function(){this.subscription.remove(),this.otherSubscription.remove(),this.onRemoved&&this.onRemoved()},t}(),ur=function(t){function e(e,n){var o=t.call(this)||this;return o.source=e,o.otherSource=n,o}return sr(e,t),e.prototype.map=function(t){return new cr(this.source,this.otherSource,t.listener,t.onRemoved)},e.prototype.mapsTo=function(t,e){return t.listener===e.listener},e.prototype.onRemoved=function(t){t.remove()},e.prototype.addListener=function(t,e){this.add({listener:t,onRemoved:e})},e.prototype.removeListener=function(t){this.remove({listener:t})},e}(Ne);function pr(t,e){return new ur(t,e)}function fr(t,e){return Rn(t,(function(t){var n=!1,o=[];function r(){n||0===o.length||(n=!0,e(o.shift()).addListener(t,(function(){n=!1,r()})))}return function(t){o.push(t),r()}}))}var lr=function(){function t(t){this.sequence=t}return t.prototype.addListener=function(t,e){for(var n=0,o=this.sequence;n<o.length;n++)t(o[n]);e&&e()},t.prototype.removeListener=function(t){},t}(),hr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yr=function(t){function e(e){var n=t.call(this,!0)||this;return n.type=e,n}return hr(e,t),e.prototype.createResultEvent=function(){return new no(this,this.preventableDefault,this.type)},e}(ao),dr=function(t){function e(e,n,o,r,i){var s=t.call(this,o,r)||this;s.transformer=n,s.config=i,s.anchorSet=new Vo;var a=go(e,"pointerdown"),c=go(e,"pointerleave"),u=go(e,"pointermove"),p=go(e,"pointerup"),f=go(e,"pointercancel"),l=Yn(go(e,"touchmove"),(function(t){return function(t,e){for(var n=0;n<t.length;n++)if(o=t[n],!s.hasFixedAnchorForTouch(o.identifier))return!0;var o;return!1}(t.targetTouches)}));a.addListener((function(t){return s.anchorSet.updateAnchorForPointerEvent(t)})),u.addListener((function(t){return s.anchorSet.updateAnchorForPointerEvent(t)})),p.addListener((function(t){return s.removePointer(t)})),c.addListener((function(t){return s.removePointer(t)}));var h=kn(go(e,"mousedown"),(function(t){return new Ao(t,!0)})),y=kn(go(e,"wheel"),(function(t){return new Yo(t,!0)})),d=kn(go(e,"touchstart"),(function(t){var e=Uo(t.targetTouches),n=Uo(t.changedTouches);return ir.create(s.rectangle,t,e,n,!0)})),v=Zn(kn(a,(function(t){return new Wo(t,!0)}))),g=v.captureSource,m=v.bubbleSource,b=v.afterBubble,P=Zn(h),w=P.captureSource,O=P.bubbleSource,C=P.afterBubble,I=Zn(d),T=I.captureSource,S=I.bubbleSource,_=I.afterBubble,x=Zn(y),j=x.captureSource,A=x.bubbleSource,B=x.afterBubble,L=Zn(kn(Yn(B,(function(t){return!s.config.greedyGestureHandling&&!t.event.ctrlKey&&!t.infiniteCanvasDefaultPrevented})),(function(){return new yr("wheelignored")}))),D=L.captureSource,E=L.bubbleSource,F=L.afterBubble;B.addListener((function(t){t.infiniteCanvasDefaultPrevented||s.zoom(t.event)})),F.addListener((function(t){t.infiniteCanvasDefaultPrevented||console.warn("use ctrl + scroll to zoom")})),pr(C,b).addListener((function(t){var e=t[0],n=t[1];e.infiniteCanvasDefaultPrevented||n.infiniteCanvasDefaultPrevented||s.transformUsingPointer(e.event,n.event)}));var W=pr(Yn(_,(function(t){return 1===t.event.changedTouches.length})),b);W.addListener((function(t){var e=t[0],n=t[1],o=e.event.changedTouches[0],r=s.anchorSet.getAnchorForPointerEvent(n.event);if(r)if(r.setTouchId(o.identifier),e.infiniteCanvasDefaultPrevented||n.infiniteCanvasDefaultPrevented)r.preventDefault();else if(s.config.greedyGestureHandling)s.rectangle.measure(),s.transformer.addAnchor(r.anchor),e.event.preventDefault();else{var i=s.anchorSet.find((function(t){return void 0!==t.touchId&&t!==r&&!t.defaultPrevented}));if(!i)return;s.rectangle.measure(),s.transformer.addAnchor(i.anchor),s.transformer.addAnchor(r.anchor),e.event.preventDefault()}}));var R=Yn(pr(f,W),(function(t){var e=t[0],n=t[1],o=(n[0],n[1]);return e.pointerId===o.event.pointerId}));R.addListener((function(t){var e=t[0];s.removePointer(e)}));var k=kn(Yn(R,(function(t){t[0];var e=t[1],n=e[0],o=e[1];return!s.config.greedyGestureHandling&&!n.infiniteCanvasDefaultPrevented&&!o.infiniteCanvasDefaultPrevented})),(function(){return new yr("touchignored")})),N=Zn(k),V=N.captureSource,M=N.bubbleSource;return N.afterBubble.addListener((function(t){t.infiniteCanvasDefaultPrevented||console.warn("use two fingers to move")})),s.cache={mousemove:s.map(Yn(go(e,"mousemove"),(function(){return!s.mouseAnchorIsFixed()})),(function(t){return new Ao(t)})),mousedown:Kn(w,O,o,r),pointerdown:Kn(g,m,o,r),pointermove:s.map(fr(Yn(u,(function(){return s.hasNonFixedAnchorForSomePointer()})),(function(){return t=s.anchorSet.getAll((function(t){return!t.anchor.fixedOnInfiniteCanvas})).map((function(t){return t.pointerEvent})),new lr(t);var t})),(function(t){return new Wo(t)})),pointerleave:s.map(c,(function(t){return new Wo(t)})),pointerup:s.map(p,(function(t){return new Wo(t)})),pointercancel:s.map(f,(function(t){return new Wo(t)})),wheel:Kn(j,A,o,r),wheelignored:Kn(D,E,o,r),touchstart:Kn(T,S,o,r),touchignored:Kn(V,M,o,r),touchmove:s.map(l,(function(t){var e=Uo(t.targetTouches),n=Uo(t.targetTouches,(function(t){return!s.hasFixedAnchorForTouch(t.identifier)}));return ir.create(s.rectangle,t,e,n)}))},s}return hr(e,t),e.prototype.getEventSource=function(t){return this.cache[t]},e.prototype.mouseAnchorIsFixed=function(){var t=this.anchorSet.find((function(t){return"mouse"===t.pointerEvent.pointerType}));return!!t&&t.anchor.fixedOnInfiniteCanvas},e.prototype.hasFixedAnchorForTouch=function(t){var e=this.anchorSet.getAnchorForTouch(t);return!!e&&e.anchor.fixedOnInfiniteCanvas},e.prototype.hasNonFixedAnchorForSomePointer=function(){return!!this.anchorSet.find((function(t){return!t.anchor.fixedOnInfiniteCanvas}))},e.prototype.transformUsingPointer=function(t,e){this.rectangle.measure();var n=this.anchorSet.getAnchorForPointerEvent(e);1===e.button&&this.config.rotationEnabled?(t.preventDefault(),this.transformer.addRotationAnchor(n.anchor)):0===e.button&&this.transformer.addAnchor(n.anchor)},e.prototype.removePointer=function(t){var e=this.anchorSet.getAnchorForPointerEvent(t);e&&(this.transformer.releaseAnchor(e.anchor),this.anchorSet.removeAnchor(e))},e.prototype.zoom=function(t){if(this.config.greedyGestureHandling||t.ctrlKey){var e=t.offsetX,n=t.offsetY,o=t.deltaY,r=Math.pow(2,-o/300);this.rectangle.measure(),this.transformer.zoom(e,n,r),t.preventDefault()}},e}(Jn),vr=function(){function t(t,e){this.handledOrFilteredEventCollection=t,this.mappingCollection=e}return t.prototype.setOn=function(t,e){jn(t)?this.handledOrFilteredEventCollection.setOn(t,e):this.mappingCollection.setOn(t,e)},t.prototype.getOn=function(t){return jn(t)?this.handledOrFilteredEventCollection.getOn(t):this.mappingCollection.getOn(t)},t.prototype.addEventListener=function(t,e,n){jn(t)?this.handledOrFilteredEventCollection.addEventListener(t,e,n):this.mappingCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){jn(t)?this.handledOrFilteredEventCollection.removeEventListener(t,e,n):this.mappingCollection.removeEventListener(t,e,n)},t}(),gr=function(){function t(t,e,n,o){this.mappedMouseEventCollection=t,this.mappedTouchEventCollection=e,this.mappedOnlyPointerEventCollection=n,this.mappedDragEventCollection=o}return t.prototype.setOn=function(t,e){An(t)?this.mappedMouseEventCollection.setOn(t,e):Dn(t)?this.mappedTouchEventCollection.setOn(t,e):Bn(t)?this.mappedOnlyPointerEventCollection.setOn(t,e):Ln(t)&&this.mappedDragEventCollection.setOn(t,e)},t.prototype.getOn=function(t){return An(t)?this.mappedMouseEventCollection.getOn(t):Dn(t)?this.mappedTouchEventCollection.getOn(t):Bn(t)?this.mappedOnlyPointerEventCollection.getOn(t):Ln(t)?this.mappedDragEventCollection.getOn(t):void 0},t.prototype.addEventListener=function(t,e,n){An(t)?this.mappedMouseEventCollection.addEventListener(t,e,n):Dn(t)?this.mappedTouchEventCollection.addEventListener(t,e,n):Bn(t)?this.mappedOnlyPointerEventCollection.addEventListener(t,e,n):Ln(t)&&this.mappedDragEventCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){An(t)?this.mappedMouseEventCollection.removeEventListener(t,e,n):Dn(t)?this.mappedTouchEventCollection.removeEventListener(t,e,n):Bn(t)?this.mappedOnlyPointerEventCollection.removeEventListener(t,e,n):Ln(t)&&this.mappedDragEventCollection.removeEventListener(t,e,n)},t}(),mr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),br=function(t){function e(e,n,o,r){var i=t.call(this,o,r)||this;return i.canvasEl=e,i.createInternalEvent=n,i.cache={},i}return mr(e,t),e.prototype.getEventSource=function(t){return this.cache[t]||(this.cache[t]=this.createEventSource(t)),this.cache[t]},e.prototype.createEventSource=function(t){var e=this;return this.map(go(this.canvasEl,t),(function(t){return e.createInternalEvent(t)}))},e}(Jn),Pr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pr(e,t),Object.defineProperty(e.prototype,"dataTransfer",{get:function(){return this.event.dataTransfer},enumerable:!1,configurable:!0}),e}(xo),Or=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cr=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=Oo.create(e),o}return Or(e,t),e.prototype.createResultEvent=function(t){return new wr(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(wo),Ir=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ir(e,t),e.prototype.createResultEvent=function(){return this.event},e}(wo),Sr=function(){function t(t,e,n,o){this.drawEventCollection=t,this.transformationEventCollection=e,this.pointerEventCollection=n,this.unmappedEventCollection=o}return t.prototype.setOn=function(t,e){"draw"===t?this.drawEventCollection.setOn("draw",e):_n(t)?this.transformationEventCollection.setOn(t,e):xn(t)?this.pointerEventCollection.setOn(t,e):this.unmappedEventCollection.setOn(t,e)},t.prototype.getOn=function(t){return"draw"===t?this.drawEventCollection.getOn("draw"):_n(t)?this.transformationEventCollection.getOn(t):xn(t)?this.pointerEventCollection.getOn(t):this.unmappedEventCollection.getOn(t)},t.prototype.addEventListener=function(t,e,n){"draw"===t?this.drawEventCollection.addEventListener("draw",e,n):_n(t)?this.transformationEventCollection.addEventListener(t,e,n):xn(t)?this.pointerEventCollection.addEventListener(t,e,n):this.unmappedEventCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){"draw"===t?this.drawEventCollection.removeEventListener("draw",e,n):_n(t)?this.transformationEventCollection.removeEventListener(t,e,n):xn(t)?this.pointerEventCollection.removeEventListener(t,e,n):this.unmappedEventCollection.removeEventListener(t,e,n)},t.create=function(e,n,o,r,i,s){var a=new fo(s,o,r),c=new vo(n,o,r),u=new dr(e,n,o,r,i);return new t(a,c,new vr(u,new gr(new br(e,(function(t){return new Ao(t)}),o,r),new br(e,(function(t){var e=Uo(t.targetTouches),n=Uo(t.changedTouches);return ir.create(o,t,e,n)}),o,r),new br(e,(function(t){return new Wo(t)}),o,r),new br(e,(function(t){return new Cr(t)}),o,r))),new br(e,(function(t){return new Tr(t)}),o,r))},t}(),_r=function(){function t(t,e){var n=this;this.canvas=t,this.config={rotationEnabled:!0,greedyGestureHandling:!1,units:Se.CANVAS},e&&Object.assign(this.config,e),this.canvasResizeObserver=new gn(t),this.canvasResizeListener=function(){null!==n.canvas.parentElement&&n.viewBox.draw()};var o,r=new Xe(new Ge),i=new Ye(r);this.rectangle=new dn(new vn(t),this.config),this.viewBox=new Ae(this.rectangle,t.getContext("2d"),i,(function(){return i.getLock()}),(function(){return o.isTransforming})),o=new qe(this.viewBox,this.config),this.eventCollection=Sr.create(t,o,this.rectangle,this,this.config,r),e&&e.units===Se.CSS&&this.canvasResizeObserver.addListener(this.canvasResizeListener)}return t.prototype.setUnits=function(t){t===Se.CSS&&this.config.units!==Se.CSS&&this.canvasResizeObserver.addListener(this.canvasResizeListener),t!==Se.CSS&&this.config.units===Se.CSS&&this.canvasResizeObserver.removeListener(this.canvasResizeListener),this.config.units=t,this.rectangle.measure(),this.viewBox.draw()},t.prototype.getContext=function(){return this.context||(this.context=new at(this.canvas,this.viewBox)),this.context},Object.defineProperty(t.prototype,"transformation",{get:function(){return mn(this.rectangle.inverseInfiniteCanvasContextBase)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inverseTransformation",{get:function(){return mn(this.rectangle.infiniteCanvasContextBase)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationEnabled",{get:function(){return this.config.rotationEnabled},set:function(t){this.config.rotationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"units",{get:function(){return this.config.units},set:function(t){this.setUnits(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"greedyGestureHandling",{get:function(){return this.config.greedyGestureHandling},set:function(t){this.config.greedyGestureHandling=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransformationstart",{get:function(){return this.eventCollection.getOn("transformationstart")},set:function(t){this.eventCollection.setOn("transformationstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransformationchange",{get:function(){return this.eventCollection.getOn("transformationchange")},set:function(t){this.eventCollection.setOn("transformationchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransformationend",{get:function(){return this.eventCollection.getOn("transformationend")},set:function(t){this.eventCollection.setOn("transformationend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondraw",{get:function(){return this.eventCollection.getOn("draw")},set:function(t){this.eventCollection.setOn("draw",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwheelignored",{get:function(){return this.eventCollection.getOn("wheelignored")},set:function(t){this.eventCollection.setOn("wheelignored",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchignored",{get:function(){return this.eventCollection.getOn("touchignored")},set:function(t){this.eventCollection.setOn("touchignored",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncopy",{get:function(){return this.eventCollection.getOn("copy")},set:function(t){this.eventCollection.setOn("copy",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncut",{get:function(){return this.eventCollection.getOn("cut")},set:function(t){this.eventCollection.setOn("cut",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpaste",{get:function(){return this.eventCollection.getOn("paste")},set:function(t){this.eventCollection.setOn("paste",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onabort",{get:function(){return this.eventCollection.getOn("abort")},set:function(t){this.eventCollection.setOn("abort",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationcancel",{get:function(){return this.eventCollection.getOn("animationcancel")},set:function(t){this.eventCollection.setOn("animationcancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationend",{get:function(){return this.eventCollection.getOn("animationend")},set:function(t){this.eventCollection.setOn("animationend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationiteration",{get:function(){return this.eventCollection.getOn("animationiteration")},set:function(t){this.eventCollection.setOn("animationiteration",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationstart",{get:function(){return this.eventCollection.getOn("animationstart")},set:function(t){this.eventCollection.setOn("animationstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onauxclick",{get:function(){return this.eventCollection.getOn("auxclick")},set:function(t){this.eventCollection.setOn("auxclick",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onblur",{get:function(){return this.eventCollection.getOn("blur")},set:function(t){this.eventCollection.setOn("blur",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncanplay",{get:function(){return this.eventCollection.getOn("canplay")},set:function(t){this.eventCollection.setOn("canplay",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncanplaythrough",{get:function(){return this.eventCollection.getOn("canplaythrough")},set:function(t){this.eventCollection.setOn("canplaythrough",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onchange",{get:function(){return this.eventCollection.getOn("change")},set:function(t){this.eventCollection.setOn("change",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onclick",{get:function(){return this.eventCollection.getOn("click")},set:function(t){this.eventCollection.setOn("click",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onclose",{get:function(){return this.eventCollection.getOn("close")},set:function(t){this.eventCollection.setOn("close",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncontextmenu",{get:function(){return this.eventCollection.getOn("contextmenu")},set:function(t){this.eventCollection.setOn("contextmenu",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncuechange",{get:function(){return this.eventCollection.getOn("cuechange")},set:function(t){this.eventCollection.setOn("cuechange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondblclick",{get:function(){return this.eventCollection.getOn("dblclick")},set:function(t){this.eventCollection.setOn("dblclick",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondrag",{get:function(){return this.eventCollection.getOn("drag")},set:function(t){this.eventCollection.setOn("drag",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragend",{get:function(){return this.eventCollection.getOn("dragend")},set:function(t){this.eventCollection.setOn("dragend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragenter",{get:function(){return this.eventCollection.getOn("dragenter")},set:function(t){this.eventCollection.setOn("dragenter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onformdata",{get:function(){return this.eventCollection.getOn("formdata")},set:function(t){this.eventCollection.setOn("formdata",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkitanimationend",{get:function(){return this.eventCollection.getOn("webkitanimationend")},set:function(t){this.eventCollection.setOn("webkitanimationend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkitanimationstart",{get:function(){return this.eventCollection.getOn("webkitanimationstart")},set:function(t){this.eventCollection.setOn("webkitanimationstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkitanimationiteration",{get:function(){return this.eventCollection.getOn("webkitanimationiteration")},set:function(t){this.eventCollection.setOn("webkitanimationiteration",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkittransitionend",{get:function(){return this.eventCollection.getOn("webkittransitionend")},set:function(t){this.eventCollection.setOn("webkittransitionend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onslotchange",{get:function(){return this.eventCollection.getOn("slotchange")},set:function(t){this.eventCollection.setOn("slotchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragleave",{get:function(){return this.eventCollection.getOn("dragleave")},set:function(t){this.eventCollection.setOn("dragleave",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragover",{get:function(){return this.eventCollection.getOn("dragover")},set:function(t){this.eventCollection.setOn("dragover",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragstart",{get:function(){return this.eventCollection.getOn("dragstart")},set:function(t){this.eventCollection.setOn("dragstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondrop",{get:function(){return this.eventCollection.getOn("drop")},set:function(t){this.eventCollection.setOn("drop",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondurationchange",{get:function(){return this.eventCollection.getOn("durationchange")},set:function(t){this.eventCollection.setOn("durationchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onemptied",{get:function(){return this.eventCollection.getOn("emptied")},set:function(t){this.eventCollection.setOn("emptied",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onended",{get:function(){return this.eventCollection.getOn("ended")},set:function(t){this.eventCollection.setOn("ended",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onerror",{get:function(){return this.eventCollection.getOn("error")},set:function(t){this.eventCollection.setOn("error",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onfocus",{get:function(){return this.eventCollection.getOn("focus")},set:function(t){this.eventCollection.setOn("focus",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ongotpointercapture",{get:function(){return this.eventCollection.getOn("gotpointercapture")},set:function(t){this.eventCollection.setOn("gotpointercapture",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oninput",{get:function(){return this.eventCollection.getOn("input")},set:function(t){this.eventCollection.setOn("input",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oninvalid",{get:function(){return this.eventCollection.getOn("invalid")},set:function(t){this.eventCollection.setOn("invalid",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onkeydown",{get:function(){return this.eventCollection.getOn("keydown")},set:function(t){this.eventCollection.setOn("keydown",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onkeypress",{get:function(){return this.eventCollection.getOn("keypress")},set:function(t){this.eventCollection.setOn("keypress",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onkeyup",{get:function(){return this.eventCollection.getOn("keyup")},set:function(t){this.eventCollection.setOn("keyup",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onload",{get:function(){return this.eventCollection.getOn("load")},set:function(t){this.eventCollection.setOn("load",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onloadeddata",{get:function(){return this.eventCollection.getOn("loadeddata")},set:function(t){this.eventCollection.setOn("loadeddata",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onloadedmetadata",{get:function(){return this.eventCollection.getOn("loadedmetadata")},set:function(t){this.eventCollection.setOn("loadedmetadata",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onloadstart",{get:function(){return this.eventCollection.getOn("loadstart")},set:function(t){this.eventCollection.setOn("loadstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onlostpointercapture",{get:function(){return this.eventCollection.getOn("lostpointercapture")},set:function(t){this.eventCollection.setOn("lostpointercapture",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmousedown",{get:function(){return this.eventCollection.getOn("mousedown")},set:function(t){this.eventCollection.setOn("mousedown",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseenter",{get:function(){return this.eventCollection.getOn("mouseenter")},set:function(t){this.eventCollection.setOn("mouseenter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseleave",{get:function(){return this.eventCollection.getOn("mouseleave")},set:function(t){this.eventCollection.setOn("mouseleave",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmousemove",{get:function(){return this.eventCollection.getOn("mousemove")},set:function(t){this.eventCollection.setOn("mousemove",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseout",{get:function(){return this.eventCollection.getOn("mouseout")},set:function(t){this.eventCollection.setOn("mouseout",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseover",{get:function(){return this.eventCollection.getOn("mouseover")},set:function(t){this.eventCollection.setOn("mouseover",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseup",{get:function(){return this.eventCollection.getOn("mouseup")},set:function(t){this.eventCollection.setOn("mouseup",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpause",{get:function(){return this.eventCollection.getOn("pause")},set:function(t){this.eventCollection.setOn("pause",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onplay",{get:function(){return this.eventCollection.getOn("play")},set:function(t){this.eventCollection.setOn("play",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onplaying",{get:function(){return this.eventCollection.getOn("playing")},set:function(t){this.eventCollection.setOn("playing",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointercancel",{get:function(){return this.eventCollection.getOn("pointercancel")},set:function(t){this.eventCollection.setOn("pointercancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerdown",{get:function(){return this.eventCollection.getOn("pointerdown")},set:function(t){this.eventCollection.setOn("pointerdown",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerenter",{get:function(){return this.eventCollection.getOn("pointerenter")},set:function(t){this.eventCollection.setOn("pointerenter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerleave",{get:function(){return this.eventCollection.getOn("pointerleave")},set:function(t){this.eventCollection.setOn("pointerleave",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointermove",{get:function(){return this.eventCollection.getOn("pointermove")},set:function(t){this.eventCollection.setOn("pointermove",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerout",{get:function(){return this.eventCollection.getOn("pointerout")},set:function(t){this.eventCollection.setOn("pointerout",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerover",{get:function(){return this.eventCollection.getOn("pointerover")},set:function(t){this.eventCollection.setOn("pointerover",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerup",{get:function(){return this.eventCollection.getOn("pointerup")},set:function(t){this.eventCollection.setOn("pointerup",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onprogress",{get:function(){return this.eventCollection.getOn("progress")},set:function(t){this.eventCollection.setOn("progress",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onratechange",{get:function(){return this.eventCollection.getOn("ratechange")},set:function(t){this.eventCollection.setOn("ratechange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onreset",{get:function(){return this.eventCollection.getOn("reset")},set:function(t){this.eventCollection.setOn("reset",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onresize",{get:function(){return this.eventCollection.getOn("resize")},set:function(t){this.eventCollection.setOn("resize",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onscroll",{get:function(){return this.eventCollection.getOn("scroll")},set:function(t){this.eventCollection.setOn("scroll",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onsecuritypolicyviolation",{get:function(){return this.eventCollection.getOn("securitypolicyviolation")},set:function(t){this.eventCollection.setOn("securitypolicyviolation",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onseeked",{get:function(){return this.eventCollection.getOn("seeked")},set:function(t){this.eventCollection.setOn("seeked",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onseeking",{get:function(){return this.eventCollection.getOn("seeking")},set:function(t){this.eventCollection.setOn("seeking",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onselect",{get:function(){return this.eventCollection.getOn("select")},set:function(t){this.eventCollection.setOn("select",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onselectionchange",{get:function(){return this.eventCollection.getOn("selectionchange")},set:function(t){this.eventCollection.setOn("selectionchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onselectstart",{get:function(){return this.eventCollection.getOn("selectstart")},set:function(t){this.eventCollection.setOn("selectstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onstalled",{get:function(){return this.eventCollection.getOn("stalled")},set:function(t){this.eventCollection.setOn("stalled",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onsubmit",{get:function(){return this.eventCollection.getOn("submit")},set:function(t){this.eventCollection.setOn("submit",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onsuspend",{get:function(){return this.eventCollection.getOn("suspend")},set:function(t){this.eventCollection.setOn("suspend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontimeupdate",{get:function(){return this.eventCollection.getOn("timeupdate")},set:function(t){this.eventCollection.setOn("timeupdate",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontoggle",{get:function(){return this.eventCollection.getOn("toggle")},set:function(t){this.eventCollection.setOn("toggle",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchcancel",{get:function(){return this.eventCollection.getOn("touchcancel")},set:function(t){this.eventCollection.setOn("touchcancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchend",{get:function(){return this.eventCollection.getOn("touchend")},set:function(t){this.eventCollection.setOn("touchend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchmove",{get:function(){return this.eventCollection.getOn("touchmove")},set:function(t){this.eventCollection.setOn("touchmove",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchstart",{get:function(){return this.eventCollection.getOn("touchstart")},set:function(t){this.eventCollection.setOn("touchstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitioncancel",{get:function(){return this.eventCollection.getOn("transitioncancel")},set:function(t){this.eventCollection.setOn("transitioncancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitionend",{get:function(){return this.eventCollection.getOn("transitionend")},set:function(t){this.eventCollection.setOn("transitionend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitionrun",{get:function(){return this.eventCollection.getOn("transitionrun")},set:function(t){this.eventCollection.setOn("transitionrun",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitionstart",{get:function(){return this.eventCollection.getOn("transitionstart")},set:function(t){this.eventCollection.setOn("transitionstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onvolumechange",{get:function(){return this.eventCollection.getOn("volumechange")},set:function(t){this.eventCollection.setOn("volumechange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwaiting",{get:function(){return this.eventCollection.getOn("waiting")},set:function(t){this.eventCollection.setOn("waiting",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwheel",{get:function(){return this.eventCollection.getOn("wheel")},set:function(t){this.eventCollection.setOn("wheel",t)},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(t,e,n){this.eventCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){this.eventCollection.removeEventListener(t,e,n)},t.CANVAS_UNITS=Se.CANVAS,t.CSS_UNITS=Se.CSS,t}()},225:(t,e,n)=>{var{InfiniteCanvas:o}=n(306);t.exports=o}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(225)})()));