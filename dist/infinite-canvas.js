!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.InfiniteCanvas=e():t.InfiniteCanvas=e()}(this,(()=>(()=>{var t={582:(t,e,n)=>{"use strict";n.r(e),n.d(e,{InfiniteCanvas:()=>Jr});var o=function(){function t(t){this.viewBox=t}return t.prototype.restore=function(){this.viewBox.restoreState()},t.prototype.save=function(){this.viewBox.saveState()},t}(),r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.mod=function(){return Math.sqrt(this.modSq())},t.prototype.modSq=function(){return this.x*this.x+this.y*this.y},t.prototype.minus=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.plus=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.getPerpendicular=function(){return new t(-this.y,this.x)},t.prototype.scale=function(e){return new t(e*this.x,e*this.y)},t.prototype.projectOn=function(t){return t.scale(this.dot(t)/t.modSq())},t.prototype.matrix=function(e,n,o,r){return new t(e*this.x+n*this.y,o*this.x+r*this.y)},t.prototype.inSameDirectionAs=function(t){return 0===this.cross(t)&&this.dot(t)>=0},t.prototype.isInOppositeDirectionAs=function(t){return 0===this.cross(t)&&this.dot(t)<0},t.prototype.isOnSameSideOfOriginAs=function(t,e){return this.isInSmallerAngleBetweenPoints(t,e)||t.isInSmallerAngleBetweenPoints(this,e)||e.isInSmallerAngleBetweenPoints(this,t)},t.prototype.isInSmallerAngleBetweenPoints=function(t,e){var n=t.cross(e);return n>0?t.cross(this)>=0&&this.cross(e)>=0:n<0?t.cross(this)<=0&&this.cross(e)<=0:!(t.dot(e)>0)||0===this.cross(t)&&this.dot(t)>0},t.origin=new t(0,0),t}();function i(t){return t.toFixed(10).replace(/\.?0+$/,"")}var a,s=function(){function t(t,e,n,o,r,i){this.a=t,this.b=e,this.c=n,this.d=o,this.e=r,this.f=i,this.scale=Math.sqrt(t*o-e*n)}return t.prototype.getMaximumLineWidthScale=function(){var t=this.a+this.c,e=this.b+this.d,n=this.a-this.c,o=this.b-this.d;return Math.sqrt(Math.max(t*t+e*e,n*n+o*o))},t.prototype.getRotationAngle=function(){var t=this.a/this.scale,e=this.b/this.scale;if(0===t)return e>0?Math.PI/2:3*Math.PI/2;var n=Math.atan(e/t);return t>0?e>0?n:0===e?0:2*Math.PI+n:e>0?Math.PI+n:0===e?Math.PI:Math.PI+n},t.prototype.applyToPointAtInfinity=function(t){return{direction:this.untranslated().apply(t.direction)}},t.prototype.apply=function(t){return new r(this.a*t.x+this.c*t.y+this.e,this.b*t.x+this.d*t.y+this.f)},t.prototype.untranslated=function(){var e=this.apply(r.origin),n=e.x,o=e.y;return this.before(t.translation(-n,-o))},t.prototype.before=function(e){return new t(e.a*this.a+e.c*this.b,e.b*this.a+e.d*this.b,e.a*this.c+e.c*this.d,e.b*this.c+e.d*this.d,e.a*this.e+e.c*this.f+e.e,e.b*this.e+e.d*this.f+e.f)},t.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f},t.prototype.inverse=function(){var e=this.a*this.d-this.b*this.c;if(0==e)throw"error calculating inverse: zero determinant";return new t(this.d/e,-this.b/e,-this.c/e,this.a/e,(this.c*this.f-this.d*this.e)/e,(this.b*this.e-this.a*this.f)/e)},t.translation=function(e,n){return new t(1,0,0,1,e,n)},t.scale=function(e){return new t(e,0,0,e,0,0)},t.zoom=function(e,n,o,r,i){var a=1-o;return void 0!==r?new t(o,0,0,o,e*a+r,n*a+i):new t(o,0,0,o,e*a,n*a)},t.translateZoom=function(e,n,o,r,i,a,s,c){var u=o-e,p=r-n,f=u*u+p*p;if(0===f)throw new Error("divide by 0");var l=s-i,h=c-a,y=l*l+h*h,d=Math.sqrt(y/f);return t.zoom(e,n,d,i-e,a-n)},t.rotation=function(e,n,o){var r=Math.cos(o),i=Math.sin(o),a=1-r;return new t(r,i,-i,r,e*a+n*i,-e*i+n*a)},t.translateRotateZoom=function(e,n,o,r,i,a,s,c){var u=o-e,p=r-n,f=u*u+p*p;if(0===f)throw new Error("divide by 0");var l=s-i,h=c-a,y=e*r-n*o,d=o*u+r*p,v=e*u+n*p,g=(u*l+p*h)/f,m=(u*h-p*l)/f;return new t(g,m,-m,g,(i*d-s*v-y*h)/f,(a*d-c*v+y*l)/f)},t.create=function(e){return e instanceof t?e:new t(e.a,e.b,e.c,e.d,e.e,e.f)},t.prototype.toString=function(){return"x: (".concat(i(this.a),", ").concat(i(this.b),"), y: (").concat(i(this.c),", ").concat(i(this.d),"), d: (").concat(i(this.e),", ").concat(i(this.f),")")},t.identity=new t(1,0,0,1,0,0),t}(),c=function(){function t(t){this.propertyName=t}return t.prototype.changeInstanceValue=function(t,e){return this.valuesAreEqual(t[this.propertyName],e)?t:t.changeProperty(this.propertyName,e)},t.prototype.isEqualForInstances=function(t,e){return this.valuesAreEqual(t[this.propertyName],e[this.propertyName])},t.prototype.getInstructionToChange=function(t,e,n){return this.valuesAreEqual(t[this.propertyName],e[this.propertyName])?function(){}:this.changeToNewValue(e[this.propertyName],n)},t.prototype.valueIsTransformableForInstance=function(t){return!0},t}(),u=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.valuesAreEqual=function(t,e){return t.equals(e)},e.prototype.changeToNewValue=function(t,e){return function(n){var o=e.getTransformationForInstruction(t),r=o.a,i=o.b,a=o.c,s=o.d,c=o.e,u=o.f;n.setTransform(r,i,a,s,c,u)}},e}(c))("transformation"),f=function(){function t(t){this.viewBox=t}return t.prototype.getTransform=function(){if(DOMMatrix){var t=this.viewBox.state.current.transformation;return new DOMMatrix([t.a,t.b,t.c,t.d,t.e,t.f])}},t.prototype.resetTransform=function(){this.viewBox.changeState((function(t){return p.changeInstanceValue(t,s.identity)}))},t.prototype.rotate=function(t){this.addTransformation(s.rotation(0,0,t))},t.prototype.scale=function(t,e){this.addTransformation(new s(t,0,0,e,0,0))},t.prototype.setTransform=function(t,e,n,o,r,i){var a,c,u,f,l,h;"number"==typeof t?(a=t,c=e,u=n,f=o,l=r,h=i):void 0!==t.a?(a=t.a,c=t.b,u=t.c,f=t.d,l=t.e,h=t.f):(a=t.m11,c=t.m12,u=t.m21,f=t.m22,l=t.m41,h=t.m42),this.viewBox.changeState((function(t){return p.changeInstanceValue(t,new s(a,c,u,f,l,h))}))},t.prototype.transform=function(t,e,n,o,r,i){this.addTransformation(new s(t,e,n,o,r,i))},t.prototype.translate=function(t,e){this.addTransformation(s.translation(t,e))},t.prototype.addTransformation=function(t){var e=this.viewBox.state.current.transformation,n=t.before(e);this.viewBox.changeState((function(t){return p.changeInstanceValue(t,n)}))},t}(),l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t,e){return function(e){return e.globalAlpha=t}},e}(c))("globalAlpha"),y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t,e){return function(e){return e.globalCompositeOperation=t}},e}(c))("globalCompositeOperation"),v=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"globalAlpha",{get:function(){return this.viewBox.state.current.globalAlpha},set:function(t){this.viewBox.changeState((function(e){return h.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalCompositeOperation",{get:function(){return this.viewBox.state.current.globalCompositeOperation},set:function(t){this.viewBox.changeState((function(e){return d.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t}(),g=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t,e){return function(e){e.imageSmoothingEnabled=t}},e}(c))("imageSmoothingEnabled"),b=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.imageSmoothingQuality=t}},e}(c))("imageSmoothingQuality"),w=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"imageSmoothingEnabled",{get:function(){return this.viewBox.state.current.imageSmoothingEnabled},set:function(t){this.viewBox.changeState((function(e){return m.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingQuality",{get:function(){return this.viewBox.state.current.imageSmoothingQuality},set:function(t){this.viewBox.changeState((function(e){return P.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t}(),O=function(){},C=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),T=function(t){function e(e){var n=t.call(this)||this;return n.fillStrokeStyle=e,n}return C(e,t),e.prototype.setTransform=function(t){this.fillStrokeStyle.setTransform(t)},e.prototype.getInstructionToSetUntransformed=function(t){var e=this;return function(n){n[t]=e.fillStrokeStyle}},e.prototype.getInstructionToSetTransformed=function(t){var e=this;return function(n){n[t]=e.fillStrokeStyle}},e}(O),I=function(){function t(t){this.propName=t}return t.prototype.changeInstanceValue=function(t,e){return t.changeProperty(this.propName,e)},t.prototype.isEqualForInstances=function(t,e){return t[this.propName]===e[this.propName]},t.prototype.getInstructionToChange=function(t,e){var n=this,o=e[this.propName];return this.isEqualForInstances(t,e)?o instanceof O&&t.fillAndStrokeStylesTransformed!==e.fillAndStrokeStylesTransformed?e.fillAndStrokeStylesTransformed?o.getInstructionToSetTransformed(this.propName):o.getInstructionToSetUntransformed(this.propName):function(){}:o instanceof O?e.fillAndStrokeStylesTransformed?o.getInstructionToSetTransformed(this.propName):o.getInstructionToSetUntransformed(this.propName):function(t){t[n.propName]=e[n.propName]}},t.prototype.valueIsTransformableForInstance=function(t){return!(t[this.propName]instanceof T)},t}(),S=new I("fillStyle"),x=new I("strokeStyle"),_=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"fillStyle",{set:function(t){this.viewBox.changeState((function(e){return S.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeStyle",{set:function(t){this.viewBox.changeState((function(e){return x.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t.prototype.createLinearGradient=function(t,e,n,o){return this.viewBox.createLinearGradient(t,e,n,o)},t.prototype.createPattern=function(t,e){return this.viewBox.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,o,r,i){return this.viewBox.createRadialGradient(t,e,n,o,r,i)},t.prototype.createConicGradient=function(t,e,n){return this.viewBox.createConicGradient(t,e,n)},t}(),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),B=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.shadowColor=t}},e}(c))("shadowColor"),A=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.prototype.changeToNewValue=function(t,e){return function(n){var o=s.translation(t.x,t.y),i=e.translateInfiniteCanvasContextTransformationToBitmapTransformation(o).apply(r.origin),a=i.x,c=i.y;n.shadowOffsetX=a,n.shadowOffsetY=c}},e.prototype.valuesAreEqual=function(t,e){return t.x===e.x&&t.y==e.y},e}(c))("shadowOffset"),L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),D=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.prototype.changeToNewValue=function(t,e){return function(n){var o=s.translation(t,0),i=e.translateInfiniteCanvasContextTransformationToBitmapTransformation(o).apply(r.origin).mod();n.shadowBlur=i}},e.prototype.valuesAreEqual=function(t,e){return t===e},e}(c))("shadowBlur"),F=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"shadowBlur",{get:function(){return this.viewBox.state.current.shadowBlur},set:function(t){this.viewBox.changeState((function(e){return D.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetX",{get:function(){return this.viewBox.state.current.shadowOffset.x},set:function(t){var e=new r(t,this.viewBox.state.current.shadowOffset.y);this.viewBox.changeState((function(t){return E.changeInstanceValue(t,e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{get:function(){return this.viewBox.state.current.shadowOffset.y},set:function(t){var e=new r(this.viewBox.state.current.shadowOffset.x,t);this.viewBox.changeState((function(t){return E.changeInstanceValue(t,e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this.viewBox.state.current.shadowColor},set:function(t){this.viewBox.changeState((function(e){return B.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t}(),W="[+-]?(?:\\d*\\.)?\\d+(?:e[+-]?\\d+)?",k="[+-]?(?:0*\\.)?0+(?:e[+-]?\\d+)?",R="(?:ch|em|ex|ic|rem|vh|vw|vmax|vmin|vb|vi|cqw|cqh|cqi|cqb|cqmin|cqmax|px|cm|mm|Q|in|pc|pt)",N="(?:".concat(k,"|").concat(W).concat(R,")"),V="blur\\((".concat(N,")\\)"),M="[^())\\s]+(?:\\([^)]*?\\))?",q="drop-shadow\\((".concat(N,")\\s+(").concat(N,")\\s*?(?:(?:(").concat(N,")\\s*?(").concat(M,")?)|(").concat(M,"))?\\)"),H="".concat(V,"|").concat(q);function G(t,e){var n=t.match(new RegExp("(?:(".concat(k,")|(").concat(W,")(").concat(R,"))")));return n[1]?0:e.getNumberOfPixels(Number.parseFloat(n[2]),n[3])}var X,Y=function(){function t(t){this.stringRepresentation=t}return t.prototype.toTransformedString=function(){return this.stringRepresentation},t.prototype.getShadowOffset=function(){return null},t}(),z=function(){function t(t,e){this.stringRepresentation=t,this.size=e}return t.prototype.toTransformedString=function(t){var e=t.translateInfiniteCanvasContextTransformationToBitmapTransformation(s.translation(this.size,0)).apply(r.origin).mod();return"blur(".concat(e,"px)")},t.prototype.getShadowOffset=function(){return null},t.tryCreate=function(e,n){var o=e.match(new RegExp(V));return null===o?null:new t(e,G(o[1],n))},t}(),U=function(){function t(t,e,n,o,r){this.stringRepresentation=t,this.offsetX=e,this.offsetY=n,this.blurRadius=o,this.color=r}return t.prototype.toTransformedString=function(t){var e=t.translateInfiniteCanvasContextTransformationToBitmapTransformation(s.translation(this.offsetX,this.offsetY)).apply(r.origin),n=e.x,o=e.y;if(null!==this.blurRadius){var i=t.translateInfiniteCanvasContextTransformationToBitmapTransformation(s.translation(this.blurRadius,0)).apply(r.origin).mod();return this.color?"drop-shadow(".concat(n,"px ").concat(o,"px ").concat(i,"px ").concat(this.color,")"):"drop-shadow(".concat(n,"px ").concat(o,"px ").concat(i,"px)")}return this.color?"drop-shadow(".concat(n,"px ").concat(o,"px ").concat(this.color,")"):"drop-shadow(".concat(n,"px ").concat(o,"px)")},t.prototype.getShadowOffset=function(){return new r(this.offsetX,this.offsetY)},t.tryCreate=function(e,n){var o=e.match(new RegExp(q));return null===o?null:o[5]?new t(e,G(o[1],n),G(o[2],n),null,o[5]):o[4]?new t(e,G(o[1],n),G(o[2],n),G(o[3],n),o[4]):o[3]?new t(e,G(o[1],n),G(o[2],n),G(o[3],n),null):new t(e,G(o[1],n),G(o[2],n),null,null)},t}(),K=function(){function t(t,e){this.stringRepresentation=t,this.parts=e}return t.prototype.toString=function(){return this.parts.map((function(t){return t.stringRepresentation})).join(" ")},t.prototype.toTransformedString=function(t){return this.parts.map((function(e){return e.toTransformedString(t)})).join(" ")},t.prototype.getShadowOffset=function(){for(var t=0,e=this.parts;t<e.length;t++){var n=e[t].getShadowOffset();if(null!==n)return n}return null},t.create=function(e,n){var o=this,r=e.match(new RegExp("".concat(H,"|((?!\\s|").concat(H,").)+"),"g"));return new t(e,r.map((function(t){return o.createPart(t,n)})))},t.createPart=function(t,e){var n=z.tryCreate(t,e);return null!==n||null!=(n=U.tryCreate(t,e))?n:new Y(t)},t.none=new t("none",[new Y("none")]),t}(),Q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.valuesAreEqual=function(t,e){return t.stringRepresentation===e.stringRepresentation},e.prototype.changeToNewValue=function(t,e){return function(n){return n.filter=t.toTransformedString(e)}},e}(c))("filter"),Z=function(){function t(t,e){this.viewBox=t,this.cssLengthConverterFactory=e}return Object.defineProperty(t.prototype,"filter",{get:function(){return this.viewBox.state.current.filter.stringRepresentation},set:function(t){var e=K.create(t,this.cssLengthConverterFactory.create());this.viewBox.changeState((function(t){return J.changeInstanceValue(t,e)}))},enumerable:!1,configurable:!0}),t}(),$=function(){function t(t){this.viewBox=t}return t.prototype.clearRect=function(t,e,n,o){this.viewBox.clearArea(t,e,n,o)},t.prototype.fillRect=function(t,e,n,o){this.viewBox.fillRect(t,e,n,o,(function(t){return t.fill()}))},t.prototype.strokeRect=function(t,e,n,o){this.viewBox.strokeRect(t,e,n,o)},t}(),tt=function(){function t(t){this.viewBox=t}return t.prototype.isFillRule=function(t){return"evenodd"===t||"nonzero"===t},t.prototype.beginPath=function(){this.viewBox.beginPath()},t.prototype.clip=function(t,e){var n=this.isFillRule(t)?function(e){e.clip(t)}:function(t){t.clip()};this.viewBox.clipPath(n)},t.prototype.fill=function(t,e){if(t&&!this.isFillRule(t)||this.viewBox.currentPathCanBeFilled()){var n=this.isFillRule(t)?function(e){e.fill(t)}:function(t){t.fill()};this.viewBox.fillPath(n)}},t.prototype.isPointInPath=function(t,e,n,o){return!0},t.prototype.isPointInStroke=function(t,e,n){return!0},t.prototype.stroke=function(t){this.viewBox.strokePath()},t}(),et=function(){function t(){}return t.prototype.drawFocusIfNeeded=function(t,e){},t.prototype.scrollPathIntoView=function(t){},t}();!function(t){t[t.None=0]="None",t[t.Relative=1]="Relative",t[t.Absolute=2]="Absolute"}(X||(X={}));var nt=function(){function t(t,e,n){this.point=t,this.halfPlane1=e,this.halfPlane2=n,this.normal1=e.normalTowardInterior,this.normal2=n.normalTowardInterior}return t.prototype.isContainedByHalfPlaneWithNormal=function(t){return t.isInSmallerAngleBetweenPoints(this.normal1,this.normal2)},t.prototype.containsPoint=function(t){return this.halfPlane1.containsPoint(t)&&this.halfPlane2.containsPoint(t)},t.prototype.containsLineSegmentWithDirection=function(t){return this.containsPoint(this.point.plus(t))||this.containsPoint(this.point.minus(t))},t.prototype.isContainedByVertex=function(t){return this.isContainedByHalfPlaneWithNormal(t.normal1)&&this.isContainedByHalfPlaneWithNormal(t.normal2)},t}(),ot=function(){function t(t,e){this.base=t,this.normalTowardInterior=e,this.lengthOfNormal=e.mod()}return t.prototype.getDistanceFromEdge=function(t){return t.minus(this.base).dot(this.normalTowardInterior)/this.lengthOfNormal},t.prototype.transform=function(e){var n=e.apply(this.base),o=e.apply(this.base.plus(this.normalTowardInterior.getPerpendicular())),r=e.apply(this.base.plus(this.normalTowardInterior));return t.throughPointsAndContainingPoint(n,o,r)},t.prototype.complement=function(){return new t(this.base,this.normalTowardInterior.scale(-1))},t.prototype.expandByDistance=function(e){return new t(this.base.plus(this.normalTowardInterior.scale(-e/this.normalTowardInterior.mod())),this.normalTowardInterior)},t.prototype.expandToIncludePoint=function(e){return this.containsPoint(e)?this:new t(e,this.normalTowardInterior)},t.prototype.containsPoint=function(t){return this.getDistanceFromEdge(t)>=0},t.prototype.interiorContainsPoint=function(t){return this.getDistanceFromEdge(t)>0},t.prototype.containsInfinityInDirection=function(t){return t.dot(this.normalTowardInterior)>=0},t.prototype.isContainedByHalfPlane=function(t){return this.normalTowardInterior.inSameDirectionAs(t.normalTowardInterior)&&t.getDistanceFromEdge(this.base)>=0},t.prototype.intersectWithLine=function(t,e){return{point:(n=this.base,o=this.normalTowardInterior.getPerpendicular(),r=t,i=e,a=r.minus(n),s=i.cross(o),c=i.getPerpendicular().dot(a)/s,n.plus(o.scale(c))),halfPlane:this};var n,o,r,i,a,s,c},t.prototype.isParallelToLine=function(t,e){return 0===this.normalTowardInterior.getPerpendicular().cross(e)},t.prototype.getIntersectionWith=function(t){var e=this.intersectWithLine(t.base,t.normalTowardInterior.getPerpendicular());return new nt(e.point,this,t)},t.throughPointsAndContainingPoint=function(e,n,o){for(var r=0,i=t.withBorderPoints(e,n);r<i.length;r++){var a=i[r];if(a.containsPoint(o))return a}},t.withBorderPointAndInfinityInDirection=function(e,n){return t.withBorderPoints(e,e.plus(n))},t.withBorderPoints=function(e,n){var o=n.minus(e).getPerpendicular();return[new t(e,o),new t(e,o.scale(-1))]},t}(),rt=new(function(){function t(){}return t.prototype.getVertices=function(){return[]},t.prototype.expandToIncludePoint=function(t){return this},t.prototype.expandToIncludePolygon=function(t){return this},t.prototype.expandToIncludeInfinityInDirection=function(t){return this},t.prototype.expandByDistance=function(t){return this},t.prototype.intersects=function(t){return!0},t.prototype.expandToInclude=function(t){return this},t.prototype.transform=function(t){return this},t.prototype.intersectWithLineSegment=function(t){return t},t.prototype.contains=function(t){return!0},t.prototype.intersectWith=function(t){return t},t.prototype.join=function(t){return this},t.prototype.intersectWithRay=function(t){return t},t.prototype.intersectWithLine=function(t){return t},t.prototype.intersectWithConvexPolygon=function(t){return t},t.prototype.isContainedByRay=function(t){return!1},t.prototype.isContainedByLineSegment=function(t){return!1},t.prototype.isContainedByLine=function(t){return!1},t.prototype.isContainedByConvexPolygon=function(t){return!1},t.prototype.intersectsRay=function(t){return!0},t.prototype.intersectsLineSegment=function(t){return!0},t.prototype.intersectsLine=function(t){return!0},t.prototype.intersectsConvexPolygon=function(t){return!0},t}()),it=function(){function t(e,n){this.vertices=n,this.halfPlanes=e,this.vertices=this.vertices||t.getVertices(this.halfPlanes)}return t.prototype.findVertex=function(t){for(var e=0,n=this.vertices;e<n.length;e++){var o=n[e];if(o.point.equals(t))return o}},t.prototype.intersects=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectWith=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.join=function(t){if(this.contains(t))return this;if(t.contains(this))return t;for(var e=t,n=0,o=this.vertices;n<o.length;n++){var r=o[n];e=e.expandToIncludePoint(r.point)}for(var i=0,a=this.getPointsAtInfinityFromHalfPlanes();i<a.length;i++){var s=a[i];this.containsInfinityInDirection(s)&&(e=e.expandToIncludeInfinityInDirection(s))}return e},t.prototype.intersectWithRay=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.intersectWithLine=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.intersectWithLineSegment=function(t){return t.intersectWithConvexPolygon(this)},t.prototype.contains=function(t){return t.isContainedByConvexPolygon(this)},t.prototype.containsHalfPlane=function(t){for(var e=0,n=this.halfPlanes;e<n.length;e++){var o=n[e];if(!t.isContainedByHalfPlane(o))return!1}return!0},t.prototype.isContainedByHalfPlane=function(t){for(var e=0,n=this.vertices;e<n.length;e++){var o=n[e];if(!t.containsPoint(o.point))return!1}for(var r=t.complement(),i=0,a=this.halfPlanes;i<a.length;i++)if((u=a[i]).isContainedByHalfPlane(t))return!0;for(var s=0,c=this.halfPlanes;s<c.length;s++){var u=c[s];if(this.hasAtMostOneVertex(u)&&(u.isContainedByHalfPlane(r)||r.isContainedByHalfPlane(u)))return!1;var p=u.getIntersectionWith(t),f=this.findVertex(p.point);if(f){if(!f.isContainedByHalfPlaneWithNormal(t.normalTowardInterior))return!1}else if(this.containsPoint(p.point))return!1}return!this.containsHalfPlane(t)},t.prototype.getVertices=function(){return this.vertices.map((function(t){return t.point}))},t.prototype.expandToIncludePoint=function(e){if(this.containsPoint(e))return this;for(var n=new Set(this.halfPlanes),o=0,r=this.halfPlanes;o<r.length;o++){var i=r[o];if(this.hasAtMostOneVertex(i)&&!i.containsPoint(e)){var a=i.expandToIncludePoint(e);n.delete(i),n.add(a)}}for(var s=0,c=this.vertices;s<c.length;s++){var u=c[s],p=u.halfPlane1.containsPoint(e),f=u.halfPlane2.containsPoint(e);if((!p||!f)&&(p||n.delete(u.halfPlane1),f||n.delete(u.halfPlane2),p||f)){var l=e.minus(u.point).getPerpendicular();u.isContainedByHalfPlaneWithNormal(l)||(l=l.scale(-1)),a=new ot(e,l),n.add(a)}}var h=[];return n.forEach((function(t){return h.push(t)})),new t(t.getHalfPlanesNotContainingAnyOther(h))},t.prototype.expandToIncludeInfinityInDirection=function(e){if(this.containsInfinityInDirection(e))return this;var n=this.halfPlanes.filter((function(t){return t.containsInfinityInDirection(e)})).concat(this.getTangentPlanesThroughInfinityInDirection(e));return 0===(n=t.getHalfPlanesNotContainingAnyOther(n)).length?rt:new t(n)},t.prototype.getIntersectionsWithLine=function(t,e){for(var n=[],o=0,r=this.halfPlanes;o<r.length;o++){var i=r[o];if(!i.isParallelToLine(t,e)){var a=i.intersectWithLine(t,e),s=this.findVertex(a.point);s&&!s.containsLineSegmentWithDirection(e)||this.containsPoint(a.point)&&n.push(a)}}return n},t.prototype.expandByDistance=function(e){return new t(this.halfPlanes.map((function(t){return t.expandByDistance(e)})))},t.prototype.transform=function(e){return new t(this.halfPlanes.map((function(t){return t.transform(e)})))},t.prototype.intersectWithConvexPolygon=function(e){if(e.isContainedByConvexPolygon(this))return e;if(this.isContainedByConvexPolygon(e))return this;if(!this.isOutsideConvexPolygon(e)){var n=t.getHalfPlanesNotContainingAnyOther(this.halfPlanes.concat(e.halfPlanes)),o=t.groupVerticesByPoint(t.getVertices(n)).map((function(e){return t.getVerticesNotContainingAnyOther(e)})).reduce((function(t,e){return t.concat(e)}),[]);if(0===o.length)return new t(n);var r=t.getHalfPlanes(o);return new t(r)}},t.prototype.containsInfinityInDirection=function(t){for(var e=0,n=this.halfPlanes;e<n.length;e++)if(!n[e].containsInfinityInDirection(t))return!1;return!0},t.prototype.containsPoint=function(t){for(var e=0,n=this.halfPlanes;e<n.length;e++)if(!n[e].containsPoint(t))return!1;return!0},t.prototype.intersectsRay=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectsLineSegment=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectsLine=function(t){return t.intersectsConvexPolygon(this)},t.prototype.intersectsConvexPolygon=function(t){return!(!this.isContainedByConvexPolygon(t)&&!t.isContainedByConvexPolygon(this)&&this.isOutsideConvexPolygon(t))},t.prototype.isOutsideConvexPolygon=function(t){for(var e=0,n=t.halfPlanes;e<n.length;e++){var o=n[e];if(this.isContainedByHalfPlane(o.complement()))return!0}for(var r=0,i=this.halfPlanes;r<i.length;r++){var a=i[r];if(t.isContainedByHalfPlane(a.complement()))return!0}return!1},t.prototype.hasAtMostOneVertex=function(t){for(var e=0,n=0,o=this.vertices;n<o.length;n++){var r=o[n];if((r.halfPlane1===t||r.halfPlane2===t)&&++e>1)return!1}return!0},t.prototype.getTangentPlanesThroughInfinityInDirection=function(t){for(var e=[],n=0,o=this.vertices;n<o.length;n++)for(var r=o[n],i=0,a=ot.withBorderPointAndInfinityInDirection(r.point,t);i<a.length;i++){var s=a[i];this.isContainedByHalfPlane(s)&&e.push(s)}return e},t.prototype.getPointsAtInfinityFromHalfPlanes=function(){for(var t=[],e=0,n=this.halfPlanes;e<n.length;e++){var o=n[e].normalTowardInterior,r=o.getPerpendicular();t.push(o),t.push(r),t.push(r.scale(-1))}return t},t.prototype.isContainedByRay=function(t){return!1},t.prototype.isContainedByLineSegment=function(t){return!1},t.prototype.isContainedByLine=function(t){return!1},t.prototype.isContainedByConvexPolygon=function(t){for(var e=0,n=t.halfPlanes;e<n.length;e++){var o=n[e];if(!this.isContainedByHalfPlane(o))return!1}return!0},t.getHalfPlanes=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];-1===e.indexOf(r.halfPlane1)&&e.push(r.halfPlane1),-1===e.indexOf(r.halfPlane2)&&e.push(r.halfPlane2)}return e},t.getVerticesNotContainingAnyOther=function(t){for(var e=[],n=0;n<t.length;n++){for(var o=!0,r=0;r<t.length;r++)if(n!==r&&t[r].isContainedByVertex(t[n])){o=!1;break}o&&e.push(t[n])}return e},t.getHalfPlanesNotContainingAnyOther=function(t){for(var e=[],n=0,o=t;n<o.length;n++){for(var r=o[n],i=!0,a=0,s=e;a<s.length;a++)if(s[a].isContainedByHalfPlane(r)){i=!1;break}i&&e.push(r)}return e},t.groupVerticesByPoint=function(t){for(var e=[],n=0,o=t;n<o.length;n++){for(var r=o[n],i=void 0,a=0,s=e;a<s.length;a++){var c=s[a];if(c[0].point.equals(r.point)){i=c;break}}i?i.push(r):e.push([r])}return e},t.getVertices=function(t){for(var e=[],n=0;n<t.length;n++)for(var o=n+1;o<t.length;o++)if(!t[n].complement().isContainedByHalfPlane(t[o])){for(var r=t[n].getIntersectionWith(t[o]),i=!0,a=0;a<t.length;a++)if(a!==n&&a!==o&&!t[a].containsPoint(r.point)){i=!1;break}i&&e.push(r)}return e},t.createTriangleWithInfinityInTwoDirections=function(e,n,o){var r=n.getPerpendicular(),i=o.getPerpendicular();return n.cross(o)<0?new t([new ot(e,r.scale(-1)),new ot(e,i)]):new t([new ot(e,r),new ot(e,i.scale(-1))])},t.createFromHalfPlane=function(e){return new t([e])},t.createTriangleWithInfinityInDirection=function(e,n,o){var r=n.minus(e).projectOn(o.getPerpendicular());return new t([new ot(e,r),new ot(n,r.scale(-1)),ot.throughPointsAndContainingPoint(e,n,e.plus(o))])},t.createTriangle=function(e,n,o){return new t([ot.throughPointsAndContainingPoint(e,n,o),ot.throughPointsAndContainingPoint(e,o,n),ot.throughPointsAndContainingPoint(n,o,e)])},t.createRectangle=function(e,n,o,i){var a=[];return Number.isFinite(e)&&(a.push(new ot(new r(e,0),new r(o>0?1:-1,0))),Number.isFinite(o)&&a.push(new ot(new r(e+o,0),new r(o>0?-1:1,0)))),Number.isFinite(n)&&(a.push(new ot(new r(0,n),new r(0,i>0?1:-1))),Number.isFinite(i)&&a.push(new ot(new r(0,n+i),new r(0,i>0?-1:1)))),new t(a)},t}(),at=function(){function t(t){this.viewBox=t}return t.prototype.fillText=function(t,e,n,o){var r=void 0===o?function(o){o.fillText(t,e,n)}:function(r){r.fillText(t,e,n,o)};this.viewBox.addDrawing(r,this.getDrawnRectangle(e,n,t),X.Relative,!0)},t.prototype.measureText=function(t){return this.viewBox.measureText(t)},t.prototype.strokeText=function(t,e,n,o){var r=void 0===o?function(o){o.strokeText(t,e,n)}:function(r){r.strokeText(t,e,n,o)};this.viewBox.addDrawing(r,this.getDrawnRectangle(e,n,t),X.Relative,!0)},t.prototype.getDrawnRectangle=function(t,e,n){var o,r=this.viewBox.measureText(n);o=void 0!==r.actualBoundingBoxRight?Math.abs(r.actualBoundingBoxRight-r.actualBoundingBoxLeft):r.width;var i=void 0!==r.actualBoundingBoxAscent?r.actualBoundingBoxAscent+r.actualBoundingBoxDescent:1,a=void 0!==r.actualBoundingBoxAscent?r.actualBoundingBoxAscent:0;return it.createRectangle(t,e-a,o,i)},t}(),st=function(){function t(t){this.viewBox=t}return t.prototype.drawImage=function(){var t,e,n,o,r,i,a,s,c,u=Array.prototype.slice.apply(arguments);arguments.length<=5?(t=u[0],i=u[1],a=u[2],s=u[3],c=u[4]):(t=u[0],e=u[1],n=u[2],o=u[3],r=u[4],i=u[5],a=u[6],s=u[7],c=u[8]);var p=this.getDrawnLength(t.width,e,o,s),f=this.getDrawnLength(t.height,n,r,c),l=it.createRectangle(i,a,p,f),h=this.getDrawImageInstruction(arguments.length,t,e,n,o,r,i,a,s,c);this.viewBox.addDrawing(h,l,X.Relative,!0)},t.prototype.getDrawImageInstruction=function(t,e,n,o,r,i,a,s,c,u){switch(t){case 3:return function(t){t.drawImage(e,a,s)};case 5:return function(t){t.drawImage(e,a,s,c,u)};case 9:return function(t){t.drawImage(e,n,o,r,i,a,s,c,u)};default:throw new TypeError("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': Valid arities are: [3, 5, 9], but ".concat(t," arguments provided."))}},t.prototype.getDrawnLength=function(t,e,n,o){var r=this.getLength(t);return void 0!==o?o:void 0!==e?void 0!==n?n:r-e:r},t.prototype.getLength=function(t){return"number"==typeof t?t:t.baseVal.value},t}(),ct=function(){function t(t,e,n){this.area=t,this.latestClippedPath=e,this.previouslyClippedPaths=n}return t.prototype.withClippedPath=function(e){return new t(e.area.intersectWith(this.area),e,this)},Object.defineProperty(t.prototype,"initialState",{get:function(){return this.previouslyClippedPaths?this.previouslyClippedPaths.initialState:this.latestClippedPath.initialState},enumerable:!1,configurable:!0}),t.prototype.except=function(e){if(e!==this)return this.previouslyClippedPaths?new t(this.area,this.latestClippedPath,this.previouslyClippedPaths.except(e)):this},t.prototype.contains=function(t){return!!t&&(this===t||!!this.previouslyClippedPaths&&this.previouslyClippedPaths.contains(t))},t.prototype.getInstructionToRecreate=function(t){var e=this,n=function(t,n){e.latestClippedPath.execute(t,n)};if(this.previouslyClippedPaths){var o=this.previouslyClippedPaths.getInstructionToRecreate(t),r=this.previouslyClippedPaths.latestClippedPath.state.getInstructionToConvertToState(this.latestClippedPath.initialState,t);return function(t,e){o(t,e),r(t,e),n(t,e)}}return n},t}(),ut=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.direction=t}},e}(c))("direction"),ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.font=t}},e}(c))("font"),ht=function(){function t(t){this.propertyName=t}return t.prototype.changeInstanceValue=function(t,e){return this.valuesAreEqual(t[this.propertyName],e)?t:t.changeProperty(this.propertyName,e)},t.prototype.isEqualForInstances=function(t,e){return this.valuesAreEqual(t[this.propertyName],e[this.propertyName])},t.prototype.valueIsTransformableForInstance=function(t){return!0},t.prototype.changeToNewValue=function(t,e){return e?this.changeToNewValueTransformed(t):this.changeToNewValueUntransformed(t)},t.prototype.getInstructionToChange=function(t,e){var n=t[this.propertyName],o=e[this.propertyName];return this.valuesAreEqual(n,o)&&(t.fillAndStrokeStylesTransformed===e.fillAndStrokeStylesTransformed||this.valuesAreEqualWhenTransformed(n,o))?function(){}:this.changeToNewValue(o,e.fillAndStrokeStylesTransformed)},t}(),yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dt=function(t){function e(e){return t.call(this,e)||this}return yt(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValueTransformed=function(t){var e=this;return function(n,o){n[e.propertyName]=t*o.scale}},e.prototype.changeToNewValueUntransformed=function(t){var e=this;return function(n){n[e.propertyName]=t}},e.prototype.valuesAreEqualWhenTransformed=function(t,e){return 0===t&&0===e},e}(ht),vt=new dt("lineWidth"),gt=new dt("lineDashOffset"),mt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.valuesAreEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},e.prototype.changeToNewValueTransformed=function(t){return function(e,n){e.setLineDash(t.map((function(t){return t*n.scale})))}},e.prototype.changeToNewValueUntransformed=function(t){return function(e){e.setLineDash(t)}},e.prototype.valuesAreEqualWhenTransformed=function(t,e){return 0===t.length&&0===e.length},e}(ht),Pt=new bt("lineDash"),wt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ot=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.textAlign=t}},e}(c))("textAlign"),Ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t){return function(e){e.textBaseline=t}},e}(c))("textBaseline"),It=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),St=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t,e){return function(e){return e.lineCap=t}},e}(c))("lineCap"),xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_t=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t,e){return function(e){return e.lineJoin=t}},e}(c))("lineJoin"),jt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jt(e,t),e.prototype.valuesAreEqual=function(t,e){return t===e},e.prototype.changeToNewValue=function(t,e){return function(e){return e.miterLimit=t}},e}(c))("miterLimit"),At=[pt,m,P,S,gt,Pt,St,_t,Bt,h,d,J,vt,x,Ot,Tt,p,lt,E,D,B],Et=function(){function t(t){this.fillStyle=t.fillStyle,this.lineWidth=t.lineWidth,this.lineCap=t.lineCap,this.lineJoin=t.lineJoin,this.lineDash=t.lineDash,this.miterLimit=t.miterLimit,this.globalAlpha=t.globalAlpha,this.globalCompositeOperation=t.globalCompositeOperation,this.filter=t.filter,this.strokeStyle=t.strokeStyle,this.lineDashOffset=t.lineDashOffset,this.transformation=t.transformation,this.direction=t.direction,this.imageSmoothingEnabled=t.imageSmoothingEnabled,this.imageSmoothingQuality=t.imageSmoothingQuality,this.font=t.font,this.textAlign=t.textAlign,this.textBaseline=t.textBaseline,this.clippedPaths=t.clippedPaths,this.fillAndStrokeStylesTransformed=t.fillAndStrokeStylesTransformed,this.shadowOffset=t.shadowOffset,this.shadowColor=t.shadowColor,this.shadowBlur=t.shadowBlur}return t.prototype.changeProperty=function(e,n){var o=this,r={fillStyle:o.fillStyle,lineWidth:o.lineWidth,lineDash:o.lineDash,lineCap:o.lineCap,lineJoin:o.lineJoin,miterLimit:o.miterLimit,globalAlpha:o.globalAlpha,globalCompositeOperation:o.globalCompositeOperation,filter:o.filter,strokeStyle:o.strokeStyle,lineDashOffset:o.lineDashOffset,transformation:o.transformation,direction:o.direction,imageSmoothingEnabled:o.imageSmoothingEnabled,imageSmoothingQuality:o.imageSmoothingQuality,font:o.font,textAlign:o.textAlign,textBaseline:o.textBaseline,clippedPaths:o.clippedPaths,fillAndStrokeStylesTransformed:o.fillAndStrokeStylesTransformed,shadowOffset:o.shadowOffset,shadowColor:o.shadowColor,shadowBlur:o.shadowBlur};return r[e]=n,new t(r)},Object.defineProperty(t.prototype,"clippingRegion",{get:function(){return this.clippedPaths?this.clippedPaths.area:void 0},enumerable:!1,configurable:!0}),t.prototype.equals=function(t){for(var e=0,n=At;e<n.length;e++)if(!n[e].isEqualForInstances(this,t))return!1;return(!this.clippedPaths&&!t.clippedPaths||this.clippedPaths&&this.clippedPaths===t.clippedPaths)&&this.fillAndStrokeStylesTransformed===t.fillAndStrokeStylesTransformed},t.prototype.getMaximumLineWidth=function(){return this.lineWidth*this.transformation.getMaximumLineWidthScale()},t.prototype.getLineDashPeriod=function(){return this.lineDash.reduce((function(t,e){return t+e}),0)},t.prototype.isTransformable=function(){for(var t=0,e=At;t<e.length;t++)if(!e[t].valueIsTransformableForInstance(this))return!1;return!0},t.prototype.getShadowOffsets=function(){var t=[],e=this.filter.getShadowOffset();return null!==e&&t.push(e),this.shadowOffset.equals(r.origin)||t.push(this.shadowOffset),t},t.prototype.getInstructionToConvertToState=function(t,e){var n=this,o=At.map((function(o){return o.getInstructionToChange(n,t,e)}));return function(t,e){for(var n=0;n<o.length;n++)o[n](t,e)}},t.prototype.withClippedPath=function(t){var e=this.clippedPaths?this.clippedPaths.withClippedPath(t):new ct(t.area,t);return this.changeProperty("clippedPaths",e)},t.default=new t({fillStyle:"#000",lineWidth:1,lineDash:[],lineCap:"butt",lineJoin:"miter",miterLimit:10,globalAlpha:1,globalCompositeOperation:"source-over",filter:K.none,strokeStyle:"#000",lineDashOffset:0,transformation:s.identity,direction:"inherit",imageSmoothingEnabled:!0,imageSmoothingQuality:"low",font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic",clippedPaths:void 0,fillAndStrokeStylesTransformed:!1,shadowOffset:r.origin,shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:0}),t.setDefault=function(){},t}(),Lt=function(){function t(t){this.viewBox=t}return t.prototype.createImageData=function(t,e){},t.prototype.getImageData=function(t,e,n,o){},t.prototype.putImageData=function(t,e,n,o,r,i,a){var s;t=function(t,e,n,o,r){e=void 0===e?0:e,n=void 0===n?0:n,o=void 0===o?t.width:o,r=void 0===r?t.height:r;for(var i=t.data,a=new Uint8ClampedArray(4*o*r),s=0;s<r;s++)for(var c=0;c<o;c++){var u=4*((n+s)*t.width+e+c),p=4*(s*o+c);a[p]=i[u],a[p+1]=i[u+1],a[p+2]=i[u+2],a[p+3]=i[u+3]}return new ImageData(a,o,r)}(t,o,r,i,a);var c=this.viewBox.getDrawingLock();this.viewBox.createPatternFromImageData(t).then((function(t){s=t,c.release()})),this.viewBox.addDrawing((function(o){o.translate(e,n),o.fillStyle=s,o.fillRect(0,0,t.width,t.height)}),it.createRectangle(e,n,t.width,t.height),X.Absolute,!1,(function(t){return t.changeProperty("shadowColor",Et.default.shadowColor).changeProperty("shadowOffset",Et.default.shadowOffset).changeProperty("shadowBlur",Et.default.shadowBlur).changeProperty("globalAlpha",Et.default.globalAlpha).changeProperty("globalCompositeOperation",Et.default.globalCompositeOperation).changeProperty("imageSmoothingEnabled",!1).changeProperty("filter",Et.default.filter)}))},t}(),Dt=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"lineCap",{get:function(){return this.viewBox.state.current.lineCap},set:function(t){this.viewBox.changeState((function(e){return St.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{get:function(){return this.viewBox.state.current.lineDashOffset},set:function(t){this.viewBox.changeState((function(e){return gt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this.viewBox.state.current.lineJoin},set:function(t){this.viewBox.changeState((function(e){return _t.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.viewBox.state.current.lineWidth},set:function(t){this.viewBox.changeState((function(e){return vt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this.viewBox.state.current.miterLimit},set:function(t){this.viewBox.changeState((function(e){return Bt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t.prototype.getLineDash=function(){return this.viewBox.state.current.lineDash},t.prototype.setLineDash=function(t){t.length%2==1&&(t=t.concat(t)),this.viewBox.changeState((function(e){return Pt.changeInstanceValue(e,t)}))},t}(),Ft=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"direction",{set:function(t){this.viewBox.changeState((function(e){return pt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{set:function(t){this.viewBox.changeState((function(e){return lt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{set:function(t){this.viewBox.changeState((function(e){return Ot.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{set:function(t){this.viewBox.changeState((function(e){return Tt.changeInstanceValue(e,t)}))},enumerable:!1,configurable:!0}),t}();function Wt(t){return void 0!==t.direction}var kt=function(){function t(){}return t.arc=function(t,e,n,o,i,a){return{instruction:function(s,c){var u=c.getRotationAngle(),p=c.apply(new r(t,e)),f=p.x,l=p.y;s.arc(f,l,n*c.scale,o+u,i+u,a)},changeArea:function(o){o.addPosition(new r(t-n,e-n)),o.addPosition(new r(t-n,e+n)),o.addPosition(new r(t+n,e-n)),o.addPosition(new r(t+n,e+n))},positionChange:new r(t,e).plus(s.rotation(0,0,i).apply(new r(n,0))),initialPoint:new r(t,e).plus(s.rotation(0,0,o).apply(new r(n,0)))}},t.arcTo=function(t,e,n,o,i){var a=new r(t,e),s=new r(n,o);return{instruction:function(t,e){var n=e.apply(a),o=e.apply(s);t.arcTo(n.x,n.y,o.x,o.y,i*e.scale)},changeArea:function(t){t.addPosition(a),t.addPosition(s)},positionChange:new r(n,o)}},t.ellipse=function(t,e,n,o,i,a,c,u){return{instruction:function(s,p){var f=p.apply(new r(t,e)),l=p.getRotationAngle();s.ellipse(f.x,f.y,n*p.scale,o*p.scale,i+l,a,c,u)},changeArea:function(i){i.addPosition(new r(t-n,e-o)),i.addPosition(new r(t-n,e+o)),i.addPosition(new r(t+n,e-o)),i.addPosition(new r(t+n,e+o))},positionChange:new r(t,e).plus(s.rotation(0,0,c).before(new s(n,0,0,o,0,0)).before(s.rotation(0,0,i)).apply(new r(1,0))),initialPoint:new r(t,e).plus(s.rotation(0,0,a).before(new s(n,0,0,o,0,0)).before(s.rotation(0,0,i)).apply(new r(1,0)))}},t.bezierCurveTo=function(t,e,n,o,i,a){return{instruction:function(s,c){var u=c.apply(new r(t,e)),p=c.apply(new r(n,o)),f=c.apply(new r(i,a));s.bezierCurveTo(u.x,u.y,p.x,p.y,f.x,f.y)},changeArea:function(s,c){Wt(c)||(s.addPosition(new r((c.x+t)/2,(c.y+e)/2)),s.addPosition(new r((t+n)/2,(e+o)/2)),s.addPosition(new r((n+i)/2,(o+a)/2)),s.addPosition(new r(i,a)))},positionChange:new r(i,a)}},t.quadraticCurveTo=function(t,e,n,o){return{instruction:function(i,a){var s=a.apply(new r(t,e)),c=a.apply(new r(n,o));i.quadraticCurveTo(s.x,s.y,c.x,c.y)},changeArea:function(i,a){Wt(a)||(i.addPosition(new r((a.x+t)/2,(a.y+e)/2)),i.addPosition(new r((t+n)/2,(e+o)/2)),i.addPosition(new r(n,o)))},positionChange:new r(n,o)}},t}(),Rt=function(){function t(t){this.viewBox=t}return t.prototype.arc=function(t,e,n,o,r,i){this.viewBox.addPathInstruction(kt.arc(t,e,n,o,r,i))},t.prototype.arcTo=function(t,e,n,o,r){this.viewBox.addPathInstruction(kt.arcTo(t,e,n,o,r))},t.prototype.closePath=function(){this.viewBox.closePath()},t.prototype.ellipse=function(t,e,n,o,r,i,a,s){this.viewBox.addPathInstruction(kt.ellipse(t,e,n,o,r,i,a,s))},t.prototype.lineTo=function(t,e){this.viewBox.lineTo(new r(t,e))},t.prototype.lineToInfinityInDirection=function(t,e){this.viewBox.lineTo({direction:new r(t,e)})},t.prototype.moveTo=function(t,e){this.viewBox.moveTo(new r(t,e))},t.prototype.moveToInfinityInDirection=function(t,e){this.viewBox.moveTo({direction:new r(t,e)})},t.prototype.quadraticCurveTo=function(t,e,n,o){this.viewBox.addPathInstruction(kt.quadraticCurveTo(t,e,n,o))},t.prototype.bezierCurveTo=function(t,e,n,o,r,i){this.viewBox.addPathInstruction(kt.bezierCurveTo(t,e,n,o,r,i))},t.prototype.rect=function(t,e,n,o){this.viewBox.rect(t,e,n,o)},t}(),Nt=function(){function t(t,e,n){this.canvas=t,this.canvasState=new o(e),this.canvasTransform=new f(e),this.canvasCompositing=new v(e),this.canvasImageSmoothing=new w(e),this.canvasStrokeStyles=new _(e),this.canvasShadowStyles=new F(e),this.canvasFilters=new Z(e,n),this.canvasRect=new $(e),this.canvasDrawPath=new tt(e),this.canvasUserInterface=new et,this.canvasText=new at(e),this.canvasDrawImage=new st(e),this.canvasImageData=new Lt(e),this.canvasPathDrawingStyles=new Dt(e),this.canvasTextDrawingStyles=new Ft(e),this.canvasPath=new Rt(e)}return t.prototype.getContextAttributes=function(){return this.canvas.getContext("2d").getContextAttributes()},t.prototype.save=function(){this.canvasState.save()},t.prototype.restore=function(){this.canvasState.restore()},t.prototype.getTransform=function(){return this.canvasTransform.getTransform()},t.prototype.resetTransform=function(){this.canvasTransform.resetTransform()},t.prototype.rotate=function(t){this.canvasTransform.rotate(t)},t.prototype.scale=function(t,e){this.canvasTransform.scale(t,e)},t.prototype.setTransform=function(t,e,n,o,r,i){this.canvasTransform.setTransform(t,e,n,o,r,i)},t.prototype.transform=function(t,e,n,o,r,i){this.canvasTransform.transform(t,e,n,o,r,i)},t.prototype.translate=function(t,e){this.canvasTransform.translate(t,e)},Object.defineProperty(t.prototype,"globalAlpha",{set:function(t){this.canvasCompositing.globalAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalCompositeOperation",{set:function(t){this.canvasCompositing.globalCompositeOperation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingEnabled",{set:function(t){this.canvasImageSmoothing.imageSmoothingEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingQuality",{set:function(t){this.canvasImageSmoothing.imageSmoothingQuality=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillStyle",{set:function(t){this.canvasStrokeStyles.fillStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeStyle",{set:function(t){this.canvasStrokeStyles.strokeStyle=t},enumerable:!1,configurable:!0}),t.prototype.createLinearGradient=function(t,e,n,o){return this.canvasStrokeStyles.createLinearGradient(t,e,n,o)},t.prototype.createPattern=function(t,e){return this.canvasStrokeStyles.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,o,r,i){return this.canvasStrokeStyles.createRadialGradient(t,e,n,o,r,i)},t.prototype.createConicGradient=function(t,e,n){return this.canvasStrokeStyles.createConicGradient(t,e,n)},Object.defineProperty(t.prototype,"shadowBlur",{set:function(t){this.canvasShadowStyles.shadowBlur=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{set:function(t){this.canvasShadowStyles.shadowColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetX",{set:function(t){this.canvasShadowStyles.shadowOffsetX=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{set:function(t){this.canvasShadowStyles.shadowOffsetY=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filter",{set:function(t){this.canvasFilters.filter=t},enumerable:!1,configurable:!0}),t.prototype.clearRect=function(t,e,n,o){this.canvasRect.clearRect(t,e,n,o)},t.prototype.fillRect=function(t,e,n,o){this.canvasRect.fillRect(t,e,n,o)},t.prototype.strokeRect=function(t,e,n,o){this.canvasRect.strokeRect(t,e,n,o)},t.prototype.beginPath=function(){this.canvasDrawPath.beginPath()},t.prototype.clip=function(t,e){this.canvasDrawPath.clip(t,e)},t.prototype.fill=function(t,e){this.canvasDrawPath.fill(t,e)},t.prototype.isPointInPath=function(t,e,n,o){return this.canvasDrawPath.isPointInPath(t,e,n,o)},t.prototype.isPointInStroke=function(t,e,n){return this.canvasDrawPath.isPointInStroke(t,e,n)},t.prototype.stroke=function(t){this.canvasDrawPath.stroke(t)},t.prototype.drawFocusIfNeeded=function(t,e){this.canvasUserInterface.drawFocusIfNeeded(t,e)},t.prototype.scrollPathIntoView=function(t){this.canvasUserInterface.scrollPathIntoView(t)},t.prototype.fillText=function(t,e,n,o){this.canvasText.fillText(t,e,n,o)},t.prototype.measureText=function(t){return this.canvasText.measureText(t)},t.prototype.strokeText=function(t,e,n,o){this.canvasText.strokeText(t,e,n,o)},t.prototype.drawImage=function(){this.canvasDrawImage.drawImage.apply(this.canvasDrawImage,arguments)},t.prototype.createImageData=function(t,e){return this.canvasImageData.createImageData(t,e)},t.prototype.getImageData=function(t,e,n,o){return this.canvasImageData.getImageData(t,e,n,o)},t.prototype.putImageData=function(t,e,n,o,r,i,a){this.canvasImageData.putImageData(t,e,n,o,r,i,a)},Object.defineProperty(t.prototype,"lineCap",{set:function(t){this.canvasPathDrawingStyles.lineCap=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{set:function(t){this.canvasPathDrawingStyles.lineDashOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{set:function(t){this.canvasPathDrawingStyles.lineJoin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{set:function(t){this.canvasPathDrawingStyles.lineWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{set:function(t){this.canvasPathDrawingStyles.miterLimit=t},enumerable:!1,configurable:!0}),t.prototype.getLineDash=function(){return this.canvasPathDrawingStyles.getLineDash()},t.prototype.setLineDash=function(t){this.canvasPathDrawingStyles.setLineDash(t)},Object.defineProperty(t.prototype,"direction",{set:function(t){this.canvasTextDrawingStyles.direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{set:function(t){this.canvasTextDrawingStyles.font=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{set:function(t){this.canvasTextDrawingStyles.textAlign=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{set:function(t){this.canvasTextDrawingStyles.textBaseline=t},enumerable:!1,configurable:!0}),t.prototype.arc=function(t,e,n,o,r,i){this.canvasPath.arc(t,e,n,o,r,i)},t.prototype.arcTo=function(t,e,n,o,r){this.canvasPath.arcTo(t,e,n,o,r)},t.prototype.bezierCurveTo=function(t,e,n,o,r,i){this.canvasPath.bezierCurveTo(t,e,n,o,r,i)},t.prototype.closePath=function(){this.canvasPath.closePath()},t.prototype.ellipse=function(t,e,n,o,r,i,a,s){this.canvasPath.ellipse(t,e,n,o,r,i,a)},t.prototype.lineTo=function(t,e){this.canvasPath.lineTo(t,e)},t.prototype.lineToInfinityInDirection=function(t,e){this.canvasPath.lineToInfinityInDirection(t,e)},t.prototype.moveTo=function(t,e){this.canvasPath.moveTo(t,e)},t.prototype.moveToInfinityInDirection=function(t,e){this.canvasPath.moveToInfinityInDirection(t,e)},t.prototype.quadraticCurveTo=function(t,e,n,o){this.canvasPath.quadraticCurveTo(t,e,n,o)},t.prototype.rect=function(t,e,n,o){if(!Number.isFinite(t)&&!Number.isFinite(e))throw new Error("The starting coordinates provided (".concat(t," and ").concat(e,") do not determine a direction."));this.canvasPath.rect(t,e,n,o)},t}(),Vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colorStops=[],e}return Vt(e,t),e.prototype.addColorStopsToGradient=function(t){for(var e=0,n=this.colorStops;e<n.length;e++){var o=n[e];t.addColorStop(o.offset,o.color)}},e.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},e.prototype.getInstructionToSetTransformed=function(t){var e=this;return function(n,o){n[t]=e.createTransformedGradient(o)}},e.prototype.getInstructionToSetUntransformed=function(t){var e=this;return function(n){n[t]=e.createGradient()}},e}(O),qt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ht=function(t){function e(e,n,o,r,i){var a=t.call(this)||this;return a.context=e,a.x0=n,a.y0=o,a.x1=r,a.y1=i,a}return qt(e,t),e.prototype.createTransformedGradient=function(t){var e=t.apply(new r(this.x0,this.y0)),n=e.x,o=e.y,i=t.apply(new r(this.x1,this.y1)),a=i.x,s=i.y,c=this.context.createLinearGradient(n,o,a,s);return this.addColorStopsToGradient(c),c},e.prototype.createGradient=function(){var t=this.context.createLinearGradient(this.x0,this.y0,this.x1,this.y1);return this.addColorStopsToGradient(t),t},e}(Mt),Gt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xt=function(t){function e(e,n,o,r,i,a,s){var c=t.call(this)||this;return c.context=e,c.x0=n,c.y0=o,c.r0=r,c.x1=i,c.y1=a,c.r1=s,c}return Gt(e,t),e.prototype.createTransformedGradient=function(t){var e=t.apply(new r(this.x0,this.y0)),n=e.x,o=e.y,i=t.apply(new r(this.x1,this.y1)),a=i.x,s=i.y,c=this.r0*t.scale,u=this.r1*t.scale,p=this.context.createRadialGradient(n,o,c,a,s,u);return this.addColorStopsToGradient(p),p},e.prototype.createGradient=function(){var t=this.context.createRadialGradient(this.x0,this.y0,this.r0,this.x1,this.y1,this.r1);return this.addColorStopsToGradient(t),t},e}(Mt),Yt=function(){function t(t){this.initiallyWithState=t,this.added=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.added.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentlyWithState",{get:function(){return this.addedLast?this.addedLast:this.initiallyWithState},enumerable:!1,configurable:!0}),t.prototype.reconstructState=function(t,e){e.setInitialState(t)},Object.defineProperty(t.prototype,"stateOfFirstInstruction",{get:function(){return this.initiallyWithState.stateOfFirstInstruction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.currentlyWithState.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this.initiallyWithState.initialState},enumerable:!1,configurable:!0}),t.prototype.addClippedPath=function(t){this.currentlyWithState.addClippedPath(t)},t.prototype.add=function(t){this.added.push(t),this.addedLast=t},t.prototype.removeAll=function(t){for(var e;(e=this.added.findIndex(t))>-1;)this.removeAtIndex(e)},t.prototype.contains=function(t){return!!this.added.find(t)},t.prototype.setInitialState=function(t){this.initiallyWithState.setInitialState(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.initiallyWithState.setInitialStateWithClippedPaths(t)},t.prototype.beforeIndex=function(t){return 0===t?this.initiallyWithState.state:this.added[t-1].state},t.prototype.removeAtIndex=function(t){t===this.added.length-1?1===this.added.length?this.addedLast=void 0:this.addedLast=this.added[t-1]:this.reconstructState(this.beforeIndex(t),this.added[t+1]),this.added.splice(t,1)},t}(),zt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ut=function(t){function e(e){var n=t.call(this,e)||this;return n._initiallyWithState=e,n}return zt(e,t),e.prototype.execute=function(t,e){this._initiallyWithState.execute(t,e);for(var n=0,o=this.added;n<o.length;n++)o[n].execute(t,e)},e}(Yt),Kt=function(){function t(t){this.currentState=t,this.instructions=[]}return t.prototype.restore=function(){this.addChangeToState(this.currentState.restored(),(function(t){t.restore()}))},t.prototype.save=function(){this.addChangeToState(this.currentState.saved(),(function(t){t.save()}))},t.prototype.changeCurrentInstanceTo=function(t,e){if(!this.currentState.current.equals(t)){var n=this.currentState.current.getInstructionToConvertToState(t,e),o=this.currentState.withCurrentState(t);this.addChangeToState(o,n)}},t.prototype.addChangeToState=function(t,e){this.currentState=t,e&&this.instructions.push(e)},Object.defineProperty(t.prototype,"instruction",{get:function(){var t=this;if(0!==this.instructions.length)return function(e,n){for(var o=0,r=t.instructions;o<r.length;o++)(0,r[o])(e,n)}},enumerable:!1,configurable:!0}),t}(),Qt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qt(e,t),e.prototype.changeCurrentInstanceTo=function(n,o){if(!this.currentState.current.equals(n)){if(!e.canConvert(this.currentState.current,n)){if(!(this.currentState.stack.length>0))return void t.prototype.changeCurrentInstanceTo.call(this,n,o);this.restore(),this.save()}if(n.clippedPaths){var r=this.currentState,i=r.current.clippedPaths;if(n.clippedPaths===i)t.prototype.changeCurrentInstanceTo.call(this,n,o);else{var a=n.clippedPaths.except(i);this.convertToState(a.initialState,o),this.addChangeToState(a.latestClippedPath.state,a.getInstructionToRecreate(o)),this.convertToState(r.replaceCurrent(n),o)}}else t.prototype.changeCurrentInstanceTo.call(this,n,o)}},e.prototype.convertToState=function(t,e){var n=this.currentState.getInstructionToConvertToState(t,e);this.addChangeToState(t,n)},e.canConvert=function(t,e){return!t.clippedPaths||!!e.clippedPaths&&e.clippedPaths.contains(t.clippedPaths)},e}(Kt),Zt=function(){function t(t,e){void 0===e&&(e=[]),this.current=t,this.stack=e}return t.prototype.replaceCurrent=function(e){return new t(e,this.stack)},t.prototype.withCurrentState=function(e){return new t(e,this.stack)},t.prototype.currentlyTransformed=function(t){return this.withCurrentState(this.current.changeProperty("fillAndStrokeStylesTransformed",t))},t.prototype.withClippedPath=function(e){return new t(this.current.withClippedPath(e),this.stack)},t.prototype.saved=function(){return new t(this.current,(this.stack||[]).concat([this.current]))},t.prototype.restored=function(){return this.stack&&0!==this.stack.length?new t(this.stack[this.stack.length-1],this.stack.slice(0,this.stack.length-1)):this},t.prototype.convertToLastSavedInstance=function(t,e){for(var n=this.stack.length-1;n>e;n--)t.restore()},t.prototype.convertFromLastSavedInstance=function(t,e,n){for(var o=e+1;o<this.stack.length;o++)t.changeCurrentInstanceTo(this.stack[o],n),t.save();t.changeCurrentInstanceTo(this.current,n)},t.prototype.getInstructionToConvertToStateUsingConversion=function(e,n,o){var r=t.findIndexOfHighestCommon(this.stack,n.stack);return this.convertToLastSavedInstance(e,r),n.convertFromLastSavedInstance(e,r,o),e.instruction},t.prototype.getInstructionToConvertToState=function(t,e){return this.getInstructionToConvertToStateUsingConversion(new Kt(this),t,e)},t.prototype.getInstructionToConvertToStateWithClippedPath=function(t,e){return this.getInstructionToConvertToStateUsingConversion(new Jt(this),t,e)},t.findIndexOfHighestCommon=function(t,e){for(var n=0,o=Math.min(t.length-1,e.length-1);n<=o;){if(!t[n].equals(e[n]))return n-1;n++}return n-1},t}(),$t=new Zt(Et.default,[]),te=function(){function t(t,e,n){this.initialState=t,this.state=e,this.rectangle=n,this.stateConversion=function(){}}return t.prototype.setInitialState=function(t){this.initialState=t;var e=this.initialState.getInstructionToConvertToState(this.state,this.rectangle);this.stateConversion=e},Object.defineProperty(t.prototype,"stateOfFirstInstruction",{get:function(){return this.state},enumerable:!1,configurable:!0}),t.prototype.addClippedPath=function(t){this.state=this.state.withClippedPath(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.initialState=t;var e=this.initialState.getInstructionToConvertToStateWithClippedPath(this.state,this.rectangle);this.stateConversion=e},t}(),ee=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ne=function(t){function e(e,n,o,r,i){var a=t.call(this,e,n,i)||this;return a.instruction=o,a.stateConversion=r,a}return ee(e,t),e.prototype.execute=function(t,e){this.stateConversion&&this.stateConversion(t,e),this.instruction(t,e)},e.create=function(t,n,o){return new e(t,t,n,(function(){}),o)},e}(te),oe=function(){function t(t){this.area=t}return t.prototype.hasDrawingAcrossBorderOf=function(t){return!1},t.prototype.intersects=function(t){return this.area.intersects(t)},t.prototype.isContainedBy=function(t){return t.contains(this.area)},t}(),re=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ie=function(t){function e(e,n,o,r,i,a){var s=t.call(this,e,n,o,r,a)||this;return s.area=i,s.drawingArea=new oe(i),s}return re(e,t),e.createClearRect=function(t,n,o,r,i,a,s,c){return new e(t,t,(function(t,e){o.clearRect(t,e,r,i,a,s)}),(function(){}),n,c)},e}(ne),ae={direction:new r(0,1)},se={direction:new r(0,-1)},ce={direction:new r(-1,0)},ue={direction:new r(1,0)};function pe(t,e,n){return function(t,e,n){for(var o,r=0,i=0,a=t;i<a.length;i++){var s=a[i],c=s.minus(e).dot(n);c>r&&(o=s,r=c)}return o?e.plus(o.minus(e).projectOn(n)):e}(t.getVertices(),e,n)}var fe=function(){function t(t,e,n){this.rectangle=t,this.state=e,this.drawnStroke=n}return t.prototype.addPathAroundViewbox=function(t){this.rectangle.addPathAroundViewbox(t,this.drawnStroke.lineWidth)},t.prototype.getTransformedViewbox=function(){var t=this.state.current.transformation.before(this.rectangle.getBitmapTransformationToInfiniteCanvasContext()),e=this.rectangle.polygon;e=e.transform(t.inverse()).expandByDistance(this.drawnStroke.lineWidth);for(var n=0,o=this.drawnStroke.shadowOffsets;n<o.length;n++){var r=o[n],i=e.transform(s.translation(-r.x,-r.y));e=e.join(i)}return e},t.prototype.clearRect=function(t,e,n,o,i,a){var s=this.getTransformedViewbox(),c=e.a,u=e.b,p=e.c,f=e.d,l=e.e,h=e.f;t.save(),t.transform(c,u,p,f,l,h);var y=Number.isFinite(n)?n:pe(s,new r(0,0),n>0?ue.direction:ce.direction).x,d=Number.isFinite(i)?n+i:pe(s,new r(0,0),i>0?ue.direction:ce.direction).x,v=Number.isFinite(o)?o:pe(s,new r(0,0),o>0?ae.direction:se.direction).y,g=Number.isFinite(a)?o+a:pe(s,new r(0,0),a>0?ae.direction:se.direction).y;t.clearRect(y,v,d-y,g-v),t.restore()},t.prototype.moveToInfinityFromPointInDirection=function(t,e,n,o){var r=pe(this.getTransformedViewbox(),n,o);this.moveToTransformed(t,r,e)},t.prototype.drawLineToInfinityFromInfinityFromPoint=function(t,e,n,o,r){var i=this.getTransformedViewbox(),a=pe(i,n,o),s=pe(i,n,r),c=i.expandToIncludePoint(n).expandToIncludePoint(a).expandToIncludePoint(s).getVertices().filter((function(t){return!t.equals(a)&&!t.equals(s)&&!t.equals(n)&&t.minus(n).isInSmallerAngleBetweenPoints(o,r)}));c.sort((function(t,e){return t.minus(n).isInSmallerAngleBetweenPoints(e.minus(n),o)?-1:1}));for(var u=a,p=0,f=0,l=c;f<l.length;f++){var h=l[f];p+=h.minus(u).mod(),this.lineToTransformed(t,h,e),u=h}p+=s.minus(u).mod(),this.lineToTransformed(t,s,e),this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,p,s,r)},t.prototype.drawLineFromInfinityFromPointToInfinityFromPoint=function(t,e,n,o,r){var i=this.getTransformedViewbox(),a=pe(i,n,r),s=pe(i,o,r);this.lineToTransformed(t,s,e);var c=s.minus(a).mod();this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,c,s,r)},t.prototype.drawLineFromInfinityFromPointToPoint=function(t,e,n,o){var r=pe(this.getTransformedViewbox(),n,o),i=n.minus(r).mod();this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,i,r,o),this.lineToTransformed(t,n,e)},t.prototype.drawLineToInfinityFromPointInDirection=function(t,e,n,o){var r=pe(this.getTransformedViewbox(),n,o);this.lineToTransformed(t,r,e);var i=r.minus(n).mod();this.ensureDistanceCoveredIsMultipleOfLineDashPeriod(t,e,i,r,o)},t.prototype.ensureDistanceCoveredIsMultipleOfLineDashPeriod=function(t,e,n,o,r){var i=this.drawnStroke.lineDashPeriod;if(0!==i){var a=this.getDistanceLeft(n,i);if(0!==a){var s=o.plus(r.scale(a/(2*r.mod())));this.lineToTransformed(t,s,e),this.lineToTransformed(t,o,e)}}},t.prototype.lineToTransformed=function(t,e,n){var o=n.apply(e),r=o.x,i=o.y;t.lineTo(r,i)},t.prototype.moveToTransformed=function(t,e,n){var o=n.apply(e),r=o.x,i=o.y;t.moveTo(r,i)},t.prototype.getDistanceLeft=function(t,e){if(0===e)return 0;var n=t/e|0;return t-e*n==0?0:(n+1)*e-t},t}(),le=function(){function t(t,e){this.canvasRectangle=t,this.drawnStrokeProperties=e}return t.prototype.getInfinity=function(t){return new fe(this.canvasRectangle,t,this.drawnStrokeProperties)},t}(),he=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ye=function(t){function e(e,n){var o=t.call(this,e)||this;return o.rectangle=n,o}return he(e,t),e.prototype.reconstructState=function(t,e){e.setInitialStateWithClippedPaths(t)},e.prototype.hasDrawingAcrossBorderOf=function(t){return this.contains((function(e){return e.drawingArea.hasDrawingAcrossBorderOf(t)}))},e.prototype.intersects=function(t){return this.contains((function(e){return e.drawingArea.intersects(t)}))},e.prototype.addClearRect=function(t,e,n,o,r,i){var a=new le(this.rectangle,{lineWidth:0,lineDashPeriod:0,shadowOffsets:[]}).getInfinity(e),s=ie.createClearRect(e,t,a,n,o,r,i,this.rectangle);s.setInitialState(this.state),this.add(s)},e.prototype.clearContentsInsideArea=function(t){this.removeAll((function(e){return e.drawingArea.isContainedBy(t)}))},e.create=function(t){return new e(new ne($t,$t,Et.setDefault,(function(){}),t),t)},e}(Ut),de=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ve=function(t){function e(e,n,o,r,i){var a=t.call(this,e,n,i)||this;return a.instruction=o,a.stateConversion=r,a}return de(e,t),e.prototype.copy=function(){return new e(this.initialState,this.state,this.instruction,this.stateConversion,this.rectangle)},e.prototype.makeExecutable=function(){return new ne(this.initialState,this.state,this.instruction,this.stateConversion,this.rectangle)},e.create=function(t,n,o){return new e(t,t,n,(function(){}),o)},e}(te);function ge(t,e){return Wt(t)?e.applyToPointAtInfinity(t):e.apply(t)}var me=function(){function t(t,e){this.areaBuilder=t,this.transformation=e}return t.prototype.addPosition=function(t){this.areaBuilder.addPosition(ge(t,this.transformation))},t}(),be=new(function(){function t(){}return t.prototype.getVertices=function(){return[]},t.prototype.intersectWith=function(t){return this},t.prototype.join=function(t){return t},t.prototype.intersectWithConvexPolygon=function(t){return this},t.prototype.intersects=function(t){return!1},t.prototype.intersectWithLineSegment=function(t){return this},t.prototype.intersectWithRay=function(t){return this},t.prototype.intersectWithLine=function(t){return this},t.prototype.expandToInclude=function(t){return t},t.prototype.transform=function(t){return this},t.prototype.contains=function(t){return!1},t.prototype.isContainedByConvexPolygon=function(t){return!0},t.prototype.isContainedByRay=function(t){return!0},t.prototype.isContainedByLineSegment=function(t){return!0},t.prototype.isContainedByLine=function(t){return!0},t.prototype.intersectsRay=function(t){return!1},t.prototype.intersectsConvexPolygon=function(t){return!1},t.prototype.intersectsLineSegment=function(t){return!1},t.prototype.intersectsLine=function(t){return!1},t.prototype.expandByDistance=function(t){return this},t.prototype.expandToIncludePoint=function(t){return this},t.prototype.expandToIncludeInfinityInDirection=function(t){return this},t.prototype.expandToIncludePolygon=function(t){return t},t}()),Pe=function(){function t(t,e){this.base=t,this.direction=e}return t.prototype.pointIsOnSameLine=function(t){return 0===t.minus(this.base).cross(this.direction)},t.prototype.comesBefore=function(t,e){return e.minus(t).dot(this.direction)>=0},t.prototype.lineSegmentIsOnSameLine=function(t){return 0===this.direction.cross(t.direction)&&this.pointIsOnSameLine(t.point1)},t.prototype.expandLineByDistance=function(t){var e=this.direction.getPerpendicular(),n=new ot(this.base,e).expandByDistance(t),o=new ot(this.base,e.scale(-1)).expandByDistance(t);return new it([n,o])},t.prototype.getPointsInSameDirection=function(t,e){return this.comesBefore(e,t)?{point1:e,point2:t}:{point1:t,point2:e}},t.prototype.pointIsBetweenPoints=function(t,e,n){return t.minus(e).dot(this.direction)*t.minus(n).dot(this.direction)<=0},t.prototype.intersectsConvexPolygon=function(t){if(this.isContainedByConvexPolygon(t))return!0;for(var e=0,n=t.getIntersectionsWithLine(this.base,this.direction);e<n.length;e++){var o=n[e];if(this.interiorContainsPoint(o.point))return!0}return!1},t}(),we=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return we(e,t),e.prototype.getVertices=function(){return[]},e.prototype.intersectWith=function(t){return t.intersectWithLine(this)},e.prototype.join=function(t){return t.expandToIncludeInfinityInDirection(this.direction).expandToIncludeInfinityInDirection(this.direction.scale(-1))},e.prototype.intersectWithConvexPolygon=function(t){if(!this.intersectsConvexPolygon(t))return be;if(this.isContainedByConvexPolygon(t))return this;for(var e,n,o=0,r=t.getIntersectionsWithLine(this.base,this.direction);o<r.length;o++){var i=r[o];(!e&&!n||!e&&this.comesBefore(i.point,n)||!n&&this.comesBefore(e,i.point)||e&&n&&this.pointIsBetweenPoints(i.point,e,n))&&(i.halfPlane.normalTowardInterior.dot(this.direction)>0?e=i.point:n=i.point)}return e&&n?new Se(e,n):e?new Te(e,this.direction):new Te(n,this.direction.scale(-1))},e.prototype.intersectWithLine=function(t){return this.intersectsLine(t)?this:be},e.prototype.intersectWithLineSegment=function(t){return this.lineSegmentIsOnSameLine(t)?t:be},e.prototype.intersectWithRay=function(t){return this.intersectsRay(t)?t:be},e.prototype.isContainedByConvexPolygon=function(t){return t.containsPoint(this.base)&&t.containsInfinityInDirection(this.direction)&&t.containsInfinityInDirection(this.direction.scale(-1))},e.prototype.isContainedByLine=function(t){return this.intersectsSubsetOfLine(t)},e.prototype.isContainedByLineSegment=function(t){return!1},e.prototype.isContainedByRay=function(t){return!1},e.prototype.contains=function(t){return t.isContainedByLine(this)},e.prototype.intersectsLine=function(t){return this.intersectsSubsetOfLine(t)},e.prototype.intersectsSubsetOfLine=function(t){return this.pointIsOnSameLine(t.base)&&0===this.direction.cross(t.direction)},e.prototype.intersectsLineSegment=function(t){return this.lineSegmentIsOnSameLine(t)},e.prototype.intersectsRay=function(t){return this.intersectsSubsetOfLine(t)},e.prototype.intersects=function(t){return t.intersectsLine(this)},e.prototype.expandToIncludePoint=function(t){return this.pointIsOnSameLine(t)?this:it.createTriangleWithInfinityInDirection(this.base,t,this.direction).expandToIncludeInfinityInDirection(this.direction.scale(-1))},e.prototype.expandByDistance=function(t){return this.expandLineByDistance(t)},e.prototype.expandToIncludeInfinityInDirection=function(t){var e=t.cross(this.direction),n=this.direction.getPerpendicular();return 0===e?this:e>0?it.createFromHalfPlane(new ot(this.base,n.scale(-1))):it.createFromHalfPlane(new ot(this.base,n))},e.prototype.transform=function(t){var n=t.apply(this.base);return new e(n,t.apply(this.base.plus(this.direction)).minus(n))},e.prototype.interiorContainsPoint=function(t){return this.pointIsOnSameLine(t)},e}(Pe),Ce=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ce(e,t),e.prototype.getVertices=function(){return[this.base]},e.prototype.intersectWith=function(t){return t.intersectWithRay(this)},e.prototype.join=function(t){return t.expandToIncludePoint(this.base).expandToIncludeInfinityInDirection(this.direction)},e.prototype.intersectWithConvexPolygon=function(t){if(!this.intersectsConvexPolygon(t))return be;if(this.isContainedByConvexPolygon(t))return this;for(var n,o=t.getIntersectionsWithLine(this.base,this.direction),r=this.base,i=0,a=o;i<a.length;i++){var s=a[i];(!n&&this.comesBefore(r,s.point)||n&&this.pointIsBetweenPoints(s.point,r,n))&&(s.halfPlane.normalTowardInterior.dot(this.direction)>0?r=s.point:n=s.point)}return n?new Se(r,n):new e(r,this.direction)},e.prototype.intersectWithRay=function(t){return this.isContainedByRay(t)?this:t.isContainedByRay(this)?t:this.interiorContainsPoint(t.base)?new Se(this.base,t.base):be},e.prototype.intersectWithLine=function(t){return t.intersectWithRay(this)},e.prototype.intersectWithLineSegment=function(t){if(t.isContainedByRay(this))return t;if(!this.lineSegmentIsOnSameLine(t))return be;var e=this.getPointsInSameDirection(t.point1,t.point2).point2;return this.comesBefore(e,this.base)?be:new Se(this.base,e)},e.prototype.isContainedByConvexPolygon=function(t){return t.containsPoint(this.base)&&t.containsInfinityInDirection(this.direction)},e.prototype.isContainedByRay=function(t){return t.containsPoint(this.base)&&t.containsInfinityInDirection(this.direction)},e.prototype.isContainedByLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.isContainedByLineSegment=function(t){return!1},e.prototype.contains=function(t){return t.isContainedByRay(this)},e.prototype.intersectsRay=function(t){return this.isContainedByRay(t)||t.isContainedByRay(this)||this.interiorContainsPoint(t.base)},e.prototype.intersectsLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.intersectsLineSegment=function(t){if(t.isContainedByRay(this))return!0;if(!this.lineSegmentIsOnSameLine(t))return!1;var e=this.getPointsInSameDirection(t.point1,t.point2).point2;return!this.comesBefore(e,this.base)},e.prototype.intersects=function(t){return t.intersectsRay(this)},e.prototype.expandToIncludePoint=function(t){return this.containsPoint(t)?this:this.pointIsOnSameLine(t)?new e(t,this.direction):it.createTriangleWithInfinityInDirection(this.base,t,this.direction)},e.prototype.expandByDistance=function(t){var e=this.expandLineByDistance(t),n=new ot(this.base,this.direction).expandByDistance(t);return e.intersectWithConvexPolygon(new it([n]))},e.prototype.expandToIncludeInfinityInDirection=function(t){return t.inSameDirectionAs(this.direction)?this:0===this.direction.cross(t)?new Oe(this.base,this.direction):it.createTriangleWithInfinityInTwoDirections(this.base,this.direction,t)},e.prototype.transform=function(t){var n=t.apply(this.base);return new e(n,t.apply(this.base.plus(this.direction)).minus(n))},e.prototype.interiorContainsPoint=function(t){return this.pointIsOnSameLine(t)&&!this.comesBefore(t,this.base)},e.prototype.containsInfinityInDirection=function(t){return this.direction.inSameDirectionAs(t)},e.prototype.containsPoint=function(t){return this.pointIsOnSameLine(t)&&this.comesBefore(this.base,t)},e}(Pe),Ie=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Se=function(t){function e(e,n){var o=t.call(this,e,n.minus(e))||this;return o.point1=e,o.point2=n,o}return Ie(e,t),e.prototype.getVertices=function(){return[this.point1,this.point2]},e.prototype.join=function(t){return t.expandToIncludePoint(this.point1).expandToIncludePoint(this.point2)},e.prototype.intersectWith=function(t){return t.intersectWithLineSegment(this)},e.prototype.intersectWithLineSegment=function(t){if(this.isContainedByLineSegment(t))return this;if(t.isContainedByLineSegment(this))return t;if(!this.lineSegmentIsOnSameLine(t))return be;var n=this.getPointsInSameDirection(t.point1,t.point2),o=n.point1,r=n.point2;return this.comesBefore(r,this.point1)||this.comesBefore(this.point2,o)?be:this.comesBefore(this.point1,o)?new e(o,this.point2):new e(this.point1,r)},e.prototype.intersectWithRay=function(t){return t.intersectWithLineSegment(this)},e.prototype.intersectWithLine=function(t){return t.intersectWithLineSegment(this)},e.prototype.isContainedByRay=function(t){return t.containsPoint(this.point1)&&t.containsPoint(this.point2)},e.prototype.isContainedByLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.isContainedByLineSegment=function(t){return t.containsPoint(this.point1)&&t.containsPoint(this.point2)},e.prototype.intersectWithConvexPolygon=function(t){if(!this.intersectsConvexPolygon(t))return be;if(this.isContainedByConvexPolygon(t))return this;for(var n=t.getIntersectionsWithLine(this.point1,this.direction),o=this.point1,r=this.point2,i=0,a=n;i<a.length;i++){var s=a[i];this.pointIsBetweenPoints(s.point,o,r)&&(s.halfPlane.normalTowardInterior.dot(this.direction)>0?o=s.point:r=s.point)}return new e(o,r)},e.prototype.isContainedByConvexPolygon=function(t){return t.containsPoint(this.point1)&&t.containsPoint(this.point2)},e.prototype.contains=function(t){return t.isContainedByLineSegment(this)},e.prototype.pointIsStrictlyBetweenPoints=function(t,e,n){return t.minus(e).dot(this.direction)*t.minus(n).dot(this.direction)<0},e.prototype.containsPoint=function(t){return this.pointIsOnSameLine(t)&&this.pointIsBetweenPoints(t,this.point1,this.point2)},e.prototype.interiorContainsPoint=function(t){return this.pointIsOnSameLine(t)&&this.pointIsStrictlyBetweenPoints(t,this.point1,this.point2)},e.prototype.intersectsRay=function(t){return t.intersectsLineSegment(this)},e.prototype.intersectsLineSegment=function(t){if(this.isContainedByLineSegment(t)||t.isContainedByLineSegment(this))return!0;if(!this.lineSegmentIsOnSameLine(t))return!1;var e=this.getPointsInSameDirection(t.point1,t.point2),n=e.point1,o=e.point2;return!this.comesBefore(o,this.point1)&&!this.comesBefore(this.point2,n)},e.prototype.intersectsLine=function(t){return t.intersectsSubsetOfLine(this)},e.prototype.intersects=function(t){return t.intersectsLineSegment(this)},e.prototype.expandByDistance=function(t){var e=this.expandLineByDistance(t),n=new ot(this.base,this.direction).expandByDistance(t),o=new ot(this.point2,this.direction.scale(-1)).expandByDistance(t);return e.intersectWithConvexPolygon(new it([n,o]))},e.prototype.expandToIncludePoint=function(t){return this.containsPoint(t)?this:this.pointIsOnSameLine(t)?this.comesBefore(t,this.point1)?new e(t,this.point2):new e(this.point1,t):it.createTriangle(this.point1,t,this.point2)},e.prototype.expandToIncludeInfinityInDirection=function(t){return t.inSameDirectionAs(this.direction)?new Te(this.point1,t):0===t.cross(this.direction)?new Te(this.point2,t):it.createTriangleWithInfinityInDirection(this.point1,this.point2,t)},e.prototype.transform=function(t){return new e(t.apply(this.point1),t.apply(this.point2))},e}(Pe),xe=new(function(){function t(){}return t.prototype.addPoint=function(t){return rt},t.prototype.addPointAtInfinity=function(t){return this},t.prototype.addArea=function(t){return rt},t}()),_e=function(){function t(t){this.towardsMiddle=t}return t.prototype.addPoint=function(t){return it.createFromHalfPlane(new ot(t,this.towardsMiddle))},t.prototype.addPointAtInfinity=function(t){return t.dot(this.towardsMiddle)>=0?this:xe},t.prototype.addArea=function(t){var e=this.towardsMiddle.getPerpendicular();return t.expandToIncludeInfinityInDirection(this.towardsMiddle).expandToIncludeInfinityInDirection(e).expandToIncludeInfinityInDirection(e.scale(-1))},t}(),je=function(){function t(t,e){this.direction1=t,this.direction2=e}return t.prototype.addPoint=function(t){return it.createTriangleWithInfinityInTwoDirections(t,this.direction1,this.direction2)},t.prototype.addPointAtInfinity=function(e){return e.isInSmallerAngleBetweenPoints(this.direction1,this.direction2)?this:0===e.cross(this.direction1)?new _e(this.direction2.projectOn(this.direction1.getPerpendicular())):0===e.cross(this.direction2)?new _e(this.direction1.projectOn(this.direction2.getPerpendicular())):this.direction1.isInSmallerAngleBetweenPoints(e,this.direction2)?new t(e,this.direction2):this.direction2.isInSmallerAngleBetweenPoints(e,this.direction1)?new t(e,this.direction1):xe},t.prototype.addArea=function(t){return t.expandToIncludeInfinityInDirection(this.direction1).expandToIncludeInfinityInDirection(this.direction2)},t}(),Be=function(){function t(t){this.direction=t}return t.prototype.addPoint=function(t){return new Oe(t,this.direction)},t.prototype.addPointAtInfinity=function(t){return 0===t.cross(this.direction)?this:new _e(t.projectOn(this.direction.getPerpendicular()))},t.prototype.addArea=function(t){return t.expandToIncludeInfinityInDirection(this.direction).expandToIncludeInfinityInDirection(this.direction.scale(-1))},t}(),Ae=function(){function t(t){this.direction=t}return t.prototype.addPointAtInfinity=function(t){return t.inSameDirectionAs(this.direction)?this:0===t.cross(this.direction)?new Be(this.direction):new je(this.direction,t)},t.prototype.addPoint=function(t){return new Te(t,this.direction)},t.prototype.addArea=function(t){return t.expandToIncludeInfinityInDirection(this.direction)},t}(),Ee=function(){function t(t,e,n){this._area=t,this.firstPoint=e,this.subsetOfLineAtInfinity=n}return Object.defineProperty(t.prototype,"area",{get:function(){return this._area||be},enumerable:!1,configurable:!0}),t.prototype.addPoint=function(t){this._area?this._area=this._area.expandToIncludePoint(t):this.firstPoint?t.equals(this.firstPoint)||(this._area=new Se(this.firstPoint,t)):this.subsetOfLineAtInfinity?this._area=this.subsetOfLineAtInfinity.addPoint(t):this.firstPoint=t},t.prototype.addPosition=function(t){Wt(t)?this.addInfinityInDirection(t.direction):this.addPoint(t)},t.prototype.addInfinityInDirection=function(t){this._area?this._area=this._area.expandToIncludeInfinityInDirection(t):this.firstPoint?this._area=new Te(this.firstPoint,t):this.subsetOfLineAtInfinity?(this.subsetOfLineAtInfinity=this.subsetOfLineAtInfinity.addPointAtInfinity(t),this.subsetOfLineAtInfinity===xe&&(this._area=rt)):this.subsetOfLineAtInfinity=new Ae(t)},t.prototype.transformedWith=function(t){return new me(this,t)},t.prototype.copy=function(){return new t(this._area,this.firstPoint,this.subsetOfLineAtInfinity)},t}(),Le=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),De=function(t){function e(e,n,o,r,i){var a=t.call(this,e,n,i)||this;return a.instruction=o,a.stateConversion=r,a}return Le(e,t),e.prototype.replaceInstruction=function(t){this.instruction=t},e.prototype.copy=function(){return new e(this.initialState,this.state,this.instruction,this.stateConversion,this.rectangle)},e.prototype.makeExecutable=function(t){var e=t.getInfinity(this.state),n=this.instruction;return new ne(this.initialState,this.state,(function(t,o){return n(t,o,e)}),this.stateConversion,this.rectangle)},e.create=function(t,n,o){return new e(t,t,n,(function(){}),o)},e}(te),Fe=function(){function t(t){this.shape=t}return t.prototype.getInstructionToDrawLineTo=function(t,e){return this.getInstructionToExtendShapeWithLineTo(this.shape.transform(e.current.transformation.inverse()),t)},t.prototype.getInstructionToMoveToBeginning=function(t){return this.getInstructionToMoveToBeginningOfShape(this.shape.transform(t.current.transformation.inverse()))},Object.defineProperty(t.prototype,"currentPosition",{get:function(){return this.shape.currentPosition},enumerable:!1,configurable:!0}),t.prototype.moveToInfinityFromPointInDirection=function(t,e){return function(n,o,r){r.moveToInfinityFromPointInDirection(n,o,t,e)}},t.prototype.lineFromInfinityFromPointToInfinityFromPoint=function(t,e,n){return function(o,r,i){i.drawLineFromInfinityFromPointToInfinityFromPoint(o,r,t,e,n)}},t.prototype.lineFromInfinityFromPointToPoint=function(t,e){return function(n,o,r){r.drawLineFromInfinityFromPointToPoint(n,o,t,e)}},t.prototype.lineToInfinityFromPointInDirection=function(t,e){return function(n,o,r){r.drawLineToInfinityFromPointInDirection(n,o,t,e)}},t.prototype.lineToInfinityFromInfinityFromPoint=function(t,e,n){return function(o,r,i){i.drawLineToInfinityFromInfinityFromPoint(o,r,t,e,n)}},t.prototype.lineTo=function(t){return function(e,n){var o=n.apply(t),r=o.x,i=o.y;e.lineTo(r,i)}},t.prototype.moveTo=function(t){return function(e,n){var o=n.apply(t),r=o.x,i=o.y;e.moveTo(r,i)}},t}(),We=function(){function t(t,e,n,o){this.initialPosition=t,this.firstFinitePoint=e,this.lastFinitePoint=n,this.currentPosition=o}return t.prototype.transform=function(e){return new t(e.applyToPointAtInfinity(this.initialPosition),e.apply(this.firstFinitePoint),e.apply(this.lastFinitePoint),e.applyToPointAtInfinity(this.currentPosition))},t}(),ke=function(){function t(t,e,n){this.initialPosition=t,this.firstFinitePoint=e,this.currentPosition=n}return t.prototype.transform=function(e){return new t(e.applyToPointAtInfinity(this.initialPosition),e.apply(this.firstFinitePoint),e.apply(this.currentPosition))},t}();function Re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var o=0,r=t;o<r.length;o++){var i=r[o];i&&i.apply(void 0,e)}}}var Ne=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ve=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return Ne(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return 0===t.initialPosition.direction.cross(t.currentPosition.direction)?this.moveToInfinityFromPointInDirection(t.firstFinitePoint,t.initialPosition.direction):Re(this.moveToInfinityFromPointInDirection(t.lastFinitePoint,t.currentPosition.direction),this.lineToInfinityFromInfinityFromPoint(t.lastFinitePoint,t.currentPosition.direction,t.initialPosition.direction),this.lineFromInfinityFromPointToInfinityFromPoint(t.lastFinitePoint,t.firstFinitePoint,t.initialPosition.direction))},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){return Wt(e)?this.lineToInfinityFromInfinityFromPoint(t.lastFinitePoint,t.currentPosition.direction,e.direction):Re(this.lineFromInfinityFromPointToInfinityFromPoint(t.lastFinitePoint,e,t.currentPosition.direction),this.lineFromInfinityFromPointToPoint(e,t.currentPosition.direction))},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!this.shape.initialPosition.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.canAddLineTo=function(t){return!Wt(t)||!t.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.addPosition=function(t){return Wt(t)?this.pathBuilderProvider.fromPointAtInfinityToPointAtInfinity(new We(this.shape.initialPosition,this.shape.firstFinitePoint,this.shape.lastFinitePoint,t)):this.pathBuilderProvider.fromPointAtInfinityToPoint(new ke(this.shape.initialPosition,this.shape.firstFinitePoint,t))},e}(Fe),Me=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qe=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return Me(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){var e=this.moveToInfinityFromPointInDirection(t.currentPosition,t.initialPosition.direction);return t.currentPosition.equals(t.firstFinitePoint)?e:Re(e,this.lineFromInfinityFromPointToInfinityFromPoint(t.currentPosition,t.firstFinitePoint,t.initialPosition.direction))},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){return Wt(e)?this.lineToInfinityFromPointInDirection(t.currentPosition,e.direction):this.lineTo(e)},e.prototype.canAddLineTo=function(t){return!0},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){return Wt(t)?this.pathBuilderProvider.fromPointAtInfinityToPointAtInfinity(new We(this.shape.initialPosition,this.shape.firstFinitePoint,this.shape.currentPosition,t)):this.pathBuilderProvider.fromPointAtInfinityToPoint(new ke(this.shape.initialPosition,this.shape.firstFinitePoint,t))},e}(Fe),He=function(){function t(t,e){this.initialPoint=t,this.currentPosition=e}return t.prototype.transform=function(e){return new t(e.apply(this.initialPoint),e.applyToPointAtInfinity(this.currentPosition))},t}(),Ge=function(){function t(t,e){this.initialPoint=t,this.currentPosition=e}return t.prototype.transform=function(e){return new t(e.apply(this.initialPoint),e.apply(this.currentPosition))},t}(),Xe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ye=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return Xe(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return this.moveTo(t.initialPoint)},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){return Wt(e)?e.direction.inSameDirectionAs(t.currentPosition.direction)?function(){}:this.lineToInfinityFromInfinityFromPoint(t.initialPoint,t.currentPosition.direction,e.direction):Re(this.lineFromInfinityFromPointToInfinityFromPoint(t.initialPoint,e,t.currentPosition.direction),this.lineFromInfinityFromPointToPoint(e,t.currentPosition.direction))},e.prototype.canAddLineTo=function(t){return!Wt(t)||!t.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){return Wt(t)?this.pathBuilderProvider.fromPointToPointAtInfinity(new He(this.shape.initialPoint,t)):this.pathBuilderProvider.fromPointToPoint(new Ge(this.shape.initialPoint,t))},e}(Fe),ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ue=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return ze(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return this.moveTo(t.initialPoint)},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){if(Wt(e)){var n=this.lineToInfinityFromPointInDirection(t.currentPosition,e.direction);return 0===t.currentPosition.minus(t.initialPoint).cross(e.direction)?n:Re(n,this.lineFromInfinityFromPointToInfinityFromPoint(t.currentPosition,t.initialPoint,e.direction))}return this.lineTo(e)},e.prototype.canAddLineTo=function(t){return!0},e.prototype.containsFinitePoint=function(){return!0},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){return Wt(t)?this.pathBuilderProvider.fromPointToPointAtInfinity(new He(this.shape.initialPoint,t)):this.pathBuilderProvider.fromPointToPoint(new Ge(this.shape.initialPoint,t))},e}(Fe),Ke=function(){function t(t,e,n,o){this.initialPosition=t,this.containsFinitePoint=e,this.positionsSoFar=n,this.currentPosition=o}return t.prototype.transform=function(e){return new t(e.applyToPointAtInfinity(this.initialPosition),this.containsFinitePoint,this.positionsSoFar.map((function(t){return e.applyToPointAtInfinity(t)})),e.applyToPointAtInfinity(this.currentPosition))},t}(),Qe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(t){function e(e,n){var o=t.call(this,n)||this;return o.pathBuilderProvider=e,o}return Qe(e,t),e.prototype.getInstructionToMoveToBeginningOfShape=function(t){return t.containsFinitePoint?function(t,e,n){return n.addPathAroundViewbox(t)}:function(){}},e.prototype.getInstructionToExtendShapeWithLineTo=function(t,e){if(!Wt(e)){if(1===t.positionsSoFar.length)return this.lineFromInfinityFromPointToPoint(e,t.positionsSoFar[0].direction);for(var n=t.positionsSoFar.slice(1),o=t.initialPosition,r=[],i=0,a=n;i<a.length;i++){var s=a[i];r.push(this.lineToInfinityFromInfinityFromPoint(e,o.direction,s.direction)),o=s}return Re(Re.apply(void 0,r),this.lineFromInfinityFromPointToPoint(e,o.direction))}},e.prototype.canAddLineTo=function(t){return!Wt(t)||!t.direction.isInOppositeDirectionAs(this.shape.currentPosition.direction)},e.prototype.containsFinitePoint=function(){return this.shape.containsFinitePoint},e.prototype.isClosable=function(){return!0},e.prototype.addPosition=function(t){if(Wt(t)){var e=t.direction.isOnSameSideOfOriginAs(this.shape.initialPosition.direction,this.shape.currentPosition.direction)?this.shape.containsFinitePoint:!this.shape.containsFinitePoint;return this.pathBuilderProvider.atInfinity(new Ke(this.shape.initialPosition,e,this.shape.positionsSoFar.concat([t]),t))}return this.pathBuilderProvider.fromPointAtInfinityToPoint(new ke(this.shape.initialPosition,t,t))},e}(Fe),Ze=function(){function t(){}return t.prototype.fromPointAtInfinityToPointAtInfinity=function(t){return new Ve(this,t)},t.prototype.fromPointAtInfinityToPoint=function(t){return new qe(this,t)},t.prototype.fromPointToPointAtInfinity=function(t){return new Ye(this,t)},t.prototype.fromPointToPoint=function(t){return new Ue(this,t)},t.prototype.atInfinity=function(t){return new Je(this,t)},t.prototype.getBuilderFromPosition=function(t){return Wt(t)?new Je(this,new Ke(t,!1,[t],t)):new Ue(this,new Ge(t,t))},t}(),$e=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tn=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r._initiallyWithState=e,r.pathInstructionBuilder=n,r.rectangle=o,r}return $e(e,t),Object.defineProperty(e.prototype,"currentPosition",{get:function(){return this.pathInstructionBuilder.currentPosition},enumerable:!1,configurable:!0}),e.prototype.addInstruction=function(t){t.setInitialState(this.state),this.add(t)},e.prototype.closePath=function(){var t=ve.create(this.state,(function(t){t.closePath()}),this.rectangle);t.setInitialState(this.state),this.add(t)},e.prototype.copy=function(){for(var t=new e(this._initiallyWithState.copy(),this.pathInstructionBuilder,this.rectangle),n=0,o=this.added;n<o.length;n++){var r=o[n];t.add(r.copy())}return t},e.prototype.makeExecutable=function(t){for(var e=new Ut(this._initiallyWithState.makeExecutable(t)),n=0,o=this.added;n<o.length;n++){var r=o[n];e.add(r.makeExecutable(t))}return e},e.prototype.containsFinitePoint=function(){return this.pathInstructionBuilder.containsFinitePoint()},e.prototype.isClosable=function(){return this.pathInstructionBuilder.isClosable()},e.prototype.canAddLineTo=function(t){return this.pathInstructionBuilder.canAddLineTo(t)},e.prototype.lineTo=function(t,e){var n=ge(t,e.current.transformation);Wt(t)&&!this.pathInstructionBuilder.containsFinitePoint()||this.addInstructionToDrawLineTo(t,e),this.pathInstructionBuilder=this.pathInstructionBuilder.addPosition(n);var o=this.pathInstructionBuilder.getInstructionToMoveToBeginning(this._initiallyWithState.state);this._initiallyWithState.replaceInstruction((function(t,e,n){o(t,e,n)}))},e.prototype.addInstructionToDrawLineTo=function(t,e){var n=this.pathInstructionBuilder.getInstructionToDrawLineTo(t,e),o=De.create(e,n,this.rectangle);o.setInitialState(this.state),this.add(o)},e.prototype.addPathInstruction=function(t,e,n){var o,r;t.initialPoint&&(o=this.pathInstructionBuilder.currentPosition,r=t.initialPoint,!(o?r?Wt(o)?Wt(r)&&o.direction.equals(r.direction):!Wt(r)&&o.equals(r):!o:!r))&&this.lineTo(t.initialPoint,n),t.positionChange&&(this.pathInstructionBuilder=this.pathInstructionBuilder.addPosition(ge(t.positionChange,n.current.transformation))),e.setInitialState(this.state),this.add(e)},e.create=function(t,n,o){var r=ge(n,t.current.transformation),i=(new Ze).getBuilderFromPosition(r),a=i.getInstructionToMoveToBeginning(t);return new e(De.create(t,a,o),i,o)},e}(Yt);function en(t,e){return!!Number.isFinite(t)||!Number.isFinite(e)&&(t<0&&e>0||t>0&&e<0)}function nn(t,e,n,o){return en(t,n)&&en(e,o)}var on=function(){function t(t){this.area=t}return t.prototype.hasDrawingAcrossBorderOf=function(t){return!this.isContainedBy(t)&&this.intersects(t)},t.prototype.isContainedBy=function(t){return t.contains(this.area)},t.prototype.intersects=function(t){return this.area.intersects(t)},t}(),rn=function(){function t(t,e){this.instructions=t,this.drawingArea=new on(e)}return Object.defineProperty(t.prototype,"state",{get:function(){return this.instructions.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this.instructions.initialState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stateOfFirstInstruction",{get:function(){return this.instructions.stateOfFirstInstruction},enumerable:!1,configurable:!0}),t.prototype.setArea=function(t){this.drawingArea=new on(t)},t.prototype.setInitialState=function(t){this.instructions.setInitialState(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.instructions.setInitialStateWithClippedPaths(t)},t.prototype.addClippedPath=function(t){this.instructions.addClippedPath(t)},t.prototype.execute=function(t,e){this.instructions.execute(t,e)},t}(),an=function(){function t(t,e){this.instructions=t,this.area=e}return Object.defineProperty(t.prototype,"state",{get:function(){return this.instructions.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this.instructions.initialState},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,e){this.instructions.execute(t,e)},t}(),sn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cn=function(t){function e(e,n){var o=t.call(this,e)||this;return o._initiallyWithState=e,o.rectangle=n,o.areaBuilder=new Ee,o}return sn(e,t),Object.defineProperty(e.prototype,"area",{get:function(){return this.areaBuilder.area},enumerable:!1,configurable:!0}),e.prototype.containsFinitePoint=function(){for(var t=0,e=this.added;t<e.length;t++)if(e[t].containsFinitePoint())return!0;return!1},e.prototype.currentSubpathIsClosable=function(){return 0===this.added.length||this.added[this.added.length-1].isClosable()},e.prototype.allSubpathsAreClosable=function(){if(0===this.added.length)return!0;for(var t=0,e=this.added;t<e.length;t++)if(!e[t].isClosable())return!1;return!0},e.prototype.fillPath=function(t,e){return this.drawPath(t,e,{lineWidth:0,lineDashPeriod:0,shadowOffsets:e.current.getShadowOffsets()})},e.prototype.strokePath=function(t,e){return this.drawPath(t,e,{lineWidth:e.current.getMaximumLineWidth(),lineDashPeriod:e.current.getLineDashPeriod(),shadowOffsets:e.current.getShadowOffsets()})},e.prototype.drawPath=function(t,e,n){if(0!==this.added.length){var o=this.added[this.added.length-1],r=this.area;r&&n.lineWidth>0&&(r=r.expandByDistance(n.lineWidth/2));var i=ve.create(e,t,this.rectangle);return o.addInstruction(i),new rn(this.makeExecutable(n),r)}},e.prototype.makeExecutable=function(t){for(var e=new Ut(this._initiallyWithState.makeExecutable()),n=new le(this.rectangle,t),o=0,r=this.added;o<r.length;o++){var i=r[o];e.add(i.makeExecutable(n))}return e},e.prototype.clipPath=function(t,e){if(0!==this.added.length){var n=this.added[this.added.length-1],o=ve.create(e,t,this.rectangle);n.addInstruction(o);var r=this.recreatePath();this.addClippedPath(r.getInstructionsToClip())}},e.prototype.closePath=function(){0!==this.added.length&&this.added[this.added.length-1].closePath()},e.prototype.moveTo=function(t,e){var n=ge(t,e.current.transformation);this.areaBuilder.addPosition(n);var o=tn.create(e,t,this.rectangle);o.setInitialState(this.state),this.add(o)},e.prototype.canAddLineTo=function(t,e){if(0===this.added.length)return!0;var n=ge(t,e.current.transformation);return this.added[this.added.length-1].canAddLineTo(n)},e.prototype.lineTo=function(t,e){if(0!==this.added.length){var n=this.added[this.added.length-1],o=ge(t,e.current.transformation);this.areaBuilder.addPosition(o),n.lineTo(t,e)}else this.moveTo(t,e)},e.prototype.moveToPositionDeterminedBy=function(t,e,n){Number.isFinite(t)?Number.isFinite(e)?this.moveTo(new r(t,e),n):this.moveTo(e<0?se:ae,n):this.moveTo(t<0?ce:ue,n)},e.prototype.rect=function(t,e,n,o,i){if(!Number.isFinite(t)&&!Number.isFinite(e))return this.moveTo({direction:new r(1,0)},i),this.lineTo({direction:new r(0,1)},i),void this.lineTo({direction:new r(-1,-1)},i);this.moveToPositionDeterminedBy(t,e,i),nn(t,e,n,o)&&(Number.isFinite(t)?Number.isFinite(e)?(Number.isFinite(n)?(this.lineTo(new r(t+n,e),i),Number.isFinite(o)?(this.lineTo(new r(t+n,e+o),i),this.lineTo(new r(t,e+o),i)):this.lineTo(o>0?ae:se,i)):(this.lineTo(n>0?ue:ce,i),Number.isFinite(o)?this.lineTo(new r(t,e+o),i):this.lineTo(o>0?ae:se,i)),this.lineTo(new r(t,e),i)):(Number.isFinite(n)?this.lineTo(new r(t+n,0),i):this.lineTo(n>0?ue:ce,i),this.lineTo(o>0?ae:se,i),this.lineTo(new r(t,0),i),this.lineTo(e<0?se:ae,i)):(this.lineTo(new r(0,e),i),this.lineTo(n>0?ue:ce,i),Number.isFinite(o)?this.lineTo(new r(0,e+o),i):this.lineTo(o>0?ae:se,i),this.lineTo(t<0?ce:ue,i)),this.closePath(),this.moveToPositionDeterminedBy(t,e,i))},e.prototype.addPathInstruction=function(t,e){if(0===this.added.length){if(!t.initialPoint)return;this.moveTo(t.initialPoint,e)}var n=this.added[this.added.length-1],o=ge(n.currentPosition,e.current.transformation.inverse());t.changeArea(this.areaBuilder.transformedWith(e.current.transformation),o);var r=ve.create(e,t.instruction,this.rectangle);n.addPathInstruction(t,r,e)},e.prototype.getInstructionsToClip=function(){return new an(this.makeExecutable({lineWidth:0,lineDashPeriod:0,shadowOffsets:[]}),this.area)},e.prototype.recreatePath=function(){for(var t=new e(this._initiallyWithState.copy(),this.rectangle),n=0,o=this.added;n<o.length;n++){var r=o[n];t.add(r.copy())}return t.areaBuilder=this.areaBuilder.copy(),t.setInitialState(t.stateOfFirstInstruction),t},e.create=function(t,n){return new e(ve.create(t,(function(t){t.beginPath()}),n),n)},e}(Yt);function un(t,e){return!Number.isFinite(t)&&!Number.isFinite(e)&&(t<0&&e>0||t>0&&e<0)}function pn(t,e,n,o){return un(t,n)&&un(e,o)}var fn,ln=function(){function t(t,e,n,o,r,i){this.instruction=t,this.factory=e,this.takeClippingRegionIntoAccount=n,this.transformationKind=o,this.state=r,this.tempState=i}return t.prototype.build=function(t,e){var n=this.getModifiedInstruction(e),o=this.factory(t,n);return o.setArea(this.changeAreaOfDrawing(o.drawingArea.area,this.tempState||this.state,this.takeClippingRegionIntoAccount)),o},t.prototype.getModifiedInstruction=function(t){var e=this.instruction,n=function(t,e){return t===X.Relative?function(t){var n=e.getBitmapTransformationToTransformedInfiniteCanvasContext(),o=n.a,r=n.b,i=n.c,a=n.d,s=n.e,c=n.f;t.transform(o,r,i,a,s,c)}:t===X.Absolute?function(t){var n=e.getBitmapTransformationToInfiniteCanvasContext(),o=n.a,r=n.b,i=n.c,a=n.d,s=n.e,c=n.f;t.setTransform(o,r,i,a,s,c)}:null}(this.transformationKind,t);return this.tempState&&(n=Re(n,this.takeClippingRegionIntoAccount?this.state.getInstructionToConvertToStateWithClippedPath(this.tempState,t):this.state.getInstructionToConvertToState(this.tempState,t))),e=function(t,e){return e?function(n,o){n.save(),e(n,o),t(n,o),n.restore()}:t}(e,n),e},t.prototype.changeAreaOfDrawing=function(t,e,n){var o=t;if(0!==e.current.shadowBlur||!e.current.shadowOffset.equals(r.origin)){var i=o.expandByDistance(e.current.shadowBlur).transform(s.translation(e.current.shadowOffset.x,e.current.shadowOffset.y));o=o.join(i)}return e.current.clippingRegion&&n&&(o=o.intersectWith(e.current.clippingRegion)),o},t.create=function(e){return new t(e.instruction,e.build,e.takeClippingRegionIntoAccount,e.transformationKind,e.state,e.tempState)},t}(),hn=function(){function t(t,e){this.onChange=t,this.rectangle=e,this.previousInstructionsWithPath=ye.create(e),this.state=this.previousInstructionsWithPath.state}return t.prototype.beginPath=function(){var t=cn.create(this.state,this.rectangle);t.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.currentInstructionsWithPath=t},t.prototype.changeState=function(t){this.state=this.state.withCurrentState(t(this.state.current))},t.prototype.saveState=function(){this.state=this.state.saved()},t.prototype.restoreState=function(){this.state=this.state.restored()},t.prototype.allSubpathsAreClosable=function(){return!this.currentInstructionsWithPath||this.currentInstructionsWithPath.allSubpathsAreClosable()},t.prototype.currentPathContainsFinitePoint=function(){return this.currentInstructionsWithPath&&this.currentInstructionsWithPath.containsFinitePoint()},t.prototype.currentSubpathIsClosable=function(){return!this.currentInstructionsWithPath||this.currentInstructionsWithPath.currentSubpathIsClosable()},t.prototype.fillPath=function(t){this.drawPath(t,(function(t,e,n){return t.fillPath(e,n)}))},t.prototype.strokePath=function(){this.drawPath((function(t){t.stroke()}),(function(t,e,n){return t.strokePath(e,n)}))},t.prototype.fillRect=function(t,e,n,o,r){this.drawRect(t,e,n,o,r,(function(t,e,n){return t.fillPath(e,n)}))},t.prototype.strokeRect=function(t,e,n,o){this.drawRect(t,e,n,o,(function(t){t.stroke()}),(function(t,e,n){return t.strokePath(e,n)}))},t.prototype.drawPath=function(t,e){var n=this;if(this.currentInstructionsWithPath){var o=this.state.current.isTransformable(),r=o?X.None:X.Relative;this.state=this.state.currentlyTransformed(o),this.incorporateDrawingInstruction(ln.create({instruction:t,build:function(t,o){return e(t,o,n.state)},transformationKind:r,state:this.state,takeClippingRegionIntoAccount:!0})),this.onChange()}},t.prototype.drawRect=function(t,e,n,o,r,i){var a=this,s=this.state.current.isTransformable(),c=s?X.None:X.Relative,u=this.state.currentlyTransformed(s);this.incorporateDrawingInstruction(ln.create({instruction:r,build:function(r,s){var c=cn.create(u,a.rectangle);return c.rect(t,e,n,o,u),i(c,s,u)},transformationKind:c,state:u,takeClippingRegionIntoAccount:!0})),this.onChange()},t.prototype.addDrawing=function(t,e,n,o,r){var i,a=this,s=this.state.currentlyTransformed(!1);n===X.Relative&&(e=e.transform(this.state.current.transformation)),r&&(i=s.withCurrentState(r(s.current))),this.incorporateDrawingInstruction(ln.create({instruction:t,build:function(t,n){return new rn(ne.create(s,n,a.rectangle),e)},transformationKind:n,state:s,tempState:i,takeClippingRegionIntoAccount:o})),this.onChange()},t.prototype.clipPath=function(t){this.clipCurrentPath(t)},t.prototype.incorporateDrawingInstruction=function(t){if(this.currentInstructionsWithPath){var e=this.currentInstructionsWithPath.recreatePath();this.addToPreviousInstructions(t),e.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.currentInstructionsWithPath=e}else this.addToPreviousInstructions(t),this.state=this.previousInstructionsWithPath.state},t.prototype.addToPreviousInstructions=function(t){var e=t.build(this.currentInstructionsWithPath,this.rectangle);e.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.previousInstructionsWithPath.add(e)},t.prototype.clipCurrentPath=function(t){this.currentInstructionsWithPath&&(this.currentInstructionsWithPath.clipPath(t,this.state),this.state=this.currentInstructionsWithPath.state)},t.prototype.addPathInstruction=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.addPathInstruction(t,this.state)},t.prototype.closePath=function(){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.closePath()},t.prototype.moveTo=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.moveTo(t,this.state)},t.prototype.canAddLineTo=function(t){return!this.currentInstructionsWithPath||this.currentInstructionsWithPath.canAddLineTo(t,this.state)},t.prototype.lineTo=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.lineTo(t,this.state)},t.prototype.rect=function(t,e,n,o){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.rect(t,e,n,o,this.state)},t.prototype.intersects=function(t){return this.previousInstructionsWithPath.intersects(t)},t.prototype.clearContentsInsideArea=function(t){this.previousInstructionsWithPath.clearContentsInsideArea(t),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state)},t.prototype.clearArea=function(t,e,n,o){if(nn(t,e,n,o)){var r=pn(t,e,n,o)?rt:it.createRectangle(t,e,n,o),i=r.transform(this.state.current.transformation);this.intersects(i)&&(this.clearContentsInsideArea(i),this.previousInstructionsWithPath.hasDrawingAcrossBorderOf(i)&&(this.previousInstructionsWithPath.addClearRect(r,this.state,t,e,n,o),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.setInitialStateWithClippedPaths(this.state)),this.onChange())}},t.prototype.execute=function(t,e){this.previousInstructionsWithPath.length&&this.previousInstructionsWithPath.execute(t,e);for(var n=this.previousInstructionsWithPath.state.stack.length,o=0;o<n;o++)t.restore()},t}(),yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dn=function(t){function e(e,n,o,r){var i=t.call(this)||this;return i.context=e,i.startAngle=n,i.x=o,i.y=r,i}return yn(e,t),e.prototype.createTransformedGradient=function(t){var e=t.apply(new r(this.x,this.y)),n=e.x,o=e.y,i=t.getRotationAngle(),a=this.context.createConicGradient(this.startAngle+i,n,o);return this.addColorStopsToGradient(a),a},e.prototype.createGradient=function(){var t=this.context.createConicGradient(this.startAngle,this.x,this.y);return this.addColorStopsToGradient(t),t},e}(Mt),vn=function(){function t(t,e,n,o,r){var i=this;this.canvasRectangle=t,this.context=e,this.drawingIterationProvider=n,this.drawLockProvider=o,this.isTransforming=r,this.instructionSet=new hn((function(){return i.draw()}),t)}return Object.defineProperty(t.prototype,"width",{get:function(){return this.canvasRectangle.viewboxWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvasRectangle.viewboxHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.instructionSet.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformation",{get:function(){return this.canvasRectangle.transformation},set:function(t){this.canvasRectangle.setTransformation(t),this.draw()},enumerable:!1,configurable:!0}),t.prototype.getDrawingLock=function(){return this.drawLockProvider()},t.prototype.changeState=function(t){this.instructionSet.changeState(t)},t.prototype.measureText=function(t){this.context.save(),Et.default.getInstructionToConvertToState(this.state.currentlyTransformed(!1).current,this.canvasRectangle)(this.context,s.identity);var e=this.context.measureText(t);return this.context.restore(),e},t.prototype.saveState=function(){this.instructionSet.saveState()},t.prototype.restoreState=function(){this.instructionSet.restoreState()},t.prototype.beginPath=function(){this.instructionSet.beginPath()},t.prototype.createPatternFromImageData=function(t){return e=this,n=void 0,r=function(){var e;return function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){switch(n.label){case 0:return[4,createImageBitmap(t)];case 1:return e=n.sent(),[2,this.context.createPattern(e,"no-repeat")]}}))},new((o=void 0)||(o=Promise))((function(t,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(a,s)}c((r=r.apply(e,n||[])).next())}));var e,n,o,r},t.prototype.addDrawing=function(t,e,n,o,r){this.instructionSet.addDrawing(t,e,n,o,r)},t.prototype.addPathInstruction=function(t){this.instructionSet.addPathInstruction(t)},t.prototype.closePath=function(){this.instructionSet.currentSubpathIsClosable()&&this.instructionSet.closePath()},t.prototype.moveTo=function(t){this.instructionSet.moveTo(t)},t.prototype.lineTo=function(t){this.instructionSet.canAddLineTo(t)&&this.instructionSet.lineTo(t)},t.prototype.rect=function(t,e,n,o){this.instructionSet.rect(t,e,n,o)},t.prototype.currentPathCanBeFilled=function(){return this.instructionSet.allSubpathsAreClosable()&&this.instructionSet.currentPathContainsFinitePoint()},t.prototype.fillPath=function(t){this.instructionSet.fillPath(t)},t.prototype.strokePath=function(){this.instructionSet.strokePath()},t.prototype.fillRect=function(t,e,n,o,r){nn(t,e,n,o)&&this.instructionSet.fillRect(t,e,n,o,r)},t.prototype.strokeRect=function(t,e,n,o){nn(t,e,n,o)&&!pn(t,e,n,o)&&this.instructionSet.strokeRect(t,e,n,o)},t.prototype.clipPath=function(t){this.instructionSet.clipPath(t)},t.prototype.clearArea=function(t,e,n,o){this.instructionSet.clearArea(t,e,n,o)},t.prototype.createLinearGradient=function(t,e,n,o){return new Ht(this.context,t,e,n,o)},t.prototype.createRadialGradient=function(t,e,n,o,r,i){return new Xt(this.context,t,e,n,o,r,i)},t.prototype.createConicGradient=function(t,e,n){return new dn(this.context,t,e,n)},t.prototype.createPattern=function(t,e){return new T(this.context.createPattern(t,e))},t.prototype.draw=function(){var t=this;this.drawingIterationProvider.provideDrawingIteration((function(){t.isTransforming()||t.canvasRectangle.measure(),t.context.restore(),t.context.save(),t.context.clearRect(0,0,t.width,t.height),t.setInitialTransformation(),t.instructionSet.execute(t.context,t.transformation)}))},t.prototype.setInitialTransformation=function(){var t=this.canvasRectangle.getInitialTransformation();if(!t.equals(s.identity)){var e=t.a,n=t.b,o=t.c,r=t.d,i=t.e,a=t.f;this.context.setTransform(e,n,o,r,i,a)}},t}(),gn=function(){function t(t,e){var n=this;this.context=e,this.initialTransformation=e.transformation,this.angularVelocity=Math.PI/100,this.point=t.onMoved((function(){n.setTransformation()}),!1)}return t.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(s.rotation(this.point.initial.x,this.point.initial.y,(this.point.initial.x-this.point.current.x)*this.angularVelocity))},t.prototype.withAnchor=function(t){return this},t.prototype.withoutAnchor=function(t){this.point.cancel()},t.prototype.end=function(){this.point.cancel()},t}(),mn=function(){function t(t,e,n,o,r){this.transformable=t,this.centerX=e,this.centerY=n,this.onFinish=r,this.initialTransformation=t.transformation,this.maxScaleLogStep=.1,this.currentScaleLog=0,this.targetScaleLog=Math.log(o),this.makeStep()}return t.prototype.makeStep=function(){var t=this,e=this.targetScaleLog-this.currentScaleLog;Math.abs(e)<=this.maxScaleLogStep?(this.currentScaleLog+=e,this.setTransformToCurrentScaleLog(),this.onFinish()):(this.currentScaleLog+=e<0?-this.maxScaleLogStep:this.maxScaleLogStep,this.setTransformToCurrentScaleLog(),this.stepTimeout=setTimeout((function(){return t.makeStep()}),20))},t.prototype.setTransformToCurrentScaleLog=function(){this.transformable.transformation=this.initialTransformation.before(s.zoom(this.centerX,this.centerY,Math.exp(this.currentScaleLog)))},t.prototype.cancel=function(){void 0!==this.stepTimeout&&clearTimeout(this.stepTimeout)},t}(),bn=function(){function t(t,e){var n=this;this.anchor=t,this.context=e,this.initialTransformation=e.transformation,this.point=t.onMoved((function(){n.setTransformation()}),!0)}return t.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(this.getTranslation())},t.prototype.getTranslation=function(){return s.translation(this.point.current.x-this.point.initial.x,this.point.current.y-this.point.initial.y)},t.prototype.withAnchor=function(t){return t===this.anchor?this:this.context.getGestureForTwoAnchors(this.point.cancel(),t)},t.prototype.withoutAnchor=function(t){this.point.cancel()},t}(),Pn=function(){function t(t,e,n){var o=this;this.context=n,this.initialTransformation=n.transformation,this.point1=t.onMoved((function(){return o.setTransformation()}),this.fixesFirstAnchorOnInfiniteCanvas()),this.point2=e.onMoved((function(){return o.setTransformation()}),this.fixesSecondAnchorOnInfiniteCanvas())}return t.prototype.withAnchor=function(t){return this},t.prototype.withoutAnchor=function(t){var e=this.point1.cancel(),n=this.point2.cancel();return t===e?this.context.getGestureForOneAnchor(n):t===n?this.context.getGestureForOneAnchor(e):void 0},t}(),wn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),On=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return wn(e,t),e.prototype.fixesFirstAnchorOnInfiniteCanvas=function(){return!0},e.prototype.fixesSecondAnchorOnInfiniteCanvas=function(){return!1},e.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(s.translateZoom(this.point1.initial.x,this.point1.initial.y,this.point2.initial.x,this.point2.initial.y,this.point1.current.x,this.point1.current.y,this.point2.current.x,this.point2.current.y))},e}(Pn),Cn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tn=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return Cn(e,t),e.prototype.fixesFirstAnchorOnInfiniteCanvas=function(){return!0},e.prototype.fixesSecondAnchorOnInfiniteCanvas=function(){return!0},e.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(s.translateRotateZoom(this.point1.initial.x,this.point1.initial.y,this.point2.initial.x,this.point2.initial.y,this.point1.current.x,this.point1.current.y,this.point2.current.x,this.point2.current.y))},e}(Pn),In=function(){function t(){this.mapped=[]}return t.prototype.onRemoved=function(t){},t.prototype.add=function(t){var e=this;this.mapped.some((function(n){return e.mapsTo(n,t)}))||this.mapped.push(this.map(t))},t.prototype.remove=function(t){var e=this,n=this.mapped.findIndex((function(n){return e.mapsTo(n,t)}));if(-1!==n){var o=this.mapped.splice(n,1)[0];this.onRemoved(o)}},t}(),Sn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sn(e,t),e.prototype.map=function(t,e){return{listener:t,removedCallback:e}},e.prototype.mapsTo=function(t,e){return t.listener===e},e.prototype.onRemoved=function(t){t.removedCallback&&t.removedCallback()},e.prototype.addListener=function(t){this.add(t)},e.prototype.removeListener=function(t){this.remove(t)},e.prototype.dispatch=function(t){for(var e=0,n=this.mapped.map((function(t){return t.listener}));e<n.length;e++)(0,n[e])(t)},e}(In),_n=function(){function t(t,e){this.setNewValue=t,this.timeoutInMs=e,this._changing=!1,this._firstChange=new xn,this._subsequentChange=new xn,this._changeEnd=new xn}return Object.defineProperty(t.prototype,"firstChange",{get:function(){return this._firstChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subsequentChange",{get:function(){return this._subsequentChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changeEnd",{get:function(){return this._changeEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changing",{get:function(){return this._changing},enumerable:!1,configurable:!0}),t.prototype.refreshTimeout=function(){var t=this;void 0!==this.currentTimeout&&clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout((function(){t._changing=!1,t.currentTimeout=void 0,t._changeEnd.dispatch()}),this.timeoutInMs)},t.prototype.setValue=function(t){this.setNewValue(t),this._changing||(this._changing=!0,this._firstChange.dispatch()),this._subsequentChange.dispatch(),this.refreshTimeout()},t}(),jn=function(){function t(t,e){var n=this;this.viewBox=t,this.config=e,this._transformationChangeMonitor=new _n((function(t){return n.viewBox.transformation=t}),100)}return Object.defineProperty(t.prototype,"isTransforming",{get:function(){return this._transformationChangeMonitor.changing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationStart",{get:function(){return this._transformationChangeMonitor.firstChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationChange",{get:function(){return this._transformationChangeMonitor.subsequentChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationEnd",{get:function(){return this._transformationChangeMonitor.changeEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformation",{get:function(){return this.viewBox.transformation},set:function(t){this._transformationChangeMonitor.setValue(t)},enumerable:!1,configurable:!0}),t.prototype.getGestureForOneAnchor=function(t){return new bn(t,this)},t.prototype.getGestureForTwoAnchors=function(t,e){return this.config.rotationEnabled?new Tn(t,e,this):new On(t,e,this)},t.prototype.releaseAnchor=function(t){this.gesture&&(this.gesture=this.gesture.withoutAnchor(t))},t.prototype.zoom=function(t,e,n){var o=this;this._zoom&&this._zoom.cancel(),this._zoom=new mn(this,t,e,n,(function(){o._zoom=void 0}))},t.prototype.addRotationAnchor=function(t){this.gesture=new gn(t,this)},t.prototype.addAnchor=function(t){if(this.gesture){var e=this.gesture.withAnchor(t);e&&(this.gesture=e)}else this.gesture=this.getGestureForOneAnchor(t)},t}(),Bn=function(){function t(){this.animationFrameRequested=!1}return t.prototype.provideDrawingIteration=function(t){var e=this;this.animationFrameRequested||(this.animationFrameRequested=!0,requestAnimationFrame((function(){t(),e.animationFrameRequested=!1})))},t}(),An=function(){function t(t){this.drawingIterationProvider=t,this._drawHappened=new xn}return Object.defineProperty(t.prototype,"drawHappened",{get:function(){return this._drawHappened},enumerable:!1,configurable:!0}),t.prototype.provideDrawingIteration=function(t){var e=this;this.drawingIterationProvider.provideDrawingIteration((function(){t(),e._drawHappened.dispatch()}))},t}(),En=function(){function t(t){this.drawingIterationProvider=t,this._locks=[]}return t.prototype.removeLock=function(t){var e=this._locks.indexOf(t);this._locks.splice(e,1),0===this._locks.length&&this._draw&&this.drawingIterationProvider.provideDrawingIteration(this._draw)},t.prototype.provideDrawingIteration=function(t){this._locks.length?this._draw=t:this.drawingIterationProvider.provideDrawingIteration(t)},t.prototype.getLock=function(){var t,e=this;return t={release:function(){e.removeLock(t)}},this._locks.push(t),t},t}();!function(t){t[t.CSS=0]="CSS",t[t.CANVAS=1]="CANVAS"}(fn||(fn={}));var Ln=function(){function t(t){this.base=t,this.inverseBase=t.inverse()}return t.prototype.getSimilarTransformation=function(t){return this.inverseBase.before(t).before(this.base)},t.prototype.representSimilarTransformation=function(t){return this.base.before(t).before(this.inverseBase)},t.prototype.representBase=function(t){return t.before(this.inverseBase)},t}(),Dn=function(){function t(t,e){this.userCoordinates=t,this.canvasBitmap=e,this.virtualBitmapBase=e.base,this.setDerivedProperties()}return t.prototype.setCanvasBitmapDistortion=function(t){var e=this.canvasBitmap.representBase(t),n=this.userCoordinates.representSimilarTransformation(e),o=this.virtualBitmapBase.before(n);this.virtualBitmapBase=o,this.canvasBitmap=new Ln(t),this.setDerivedProperties()},t.prototype.setUserTransformation=function(t){this.userCoordinates=new Ln(t),this.setDerivedProperties()},t.prototype.setDerivedProperties=function(){this.infiniteCanvasContext=new Ln(this.virtualBitmapBase.before(this.userCoordinates.base)),this.userCoordinatesInsideCanvasBitmap=new Ln(this.userCoordinates.base.before(this.canvasBitmap.base)),this.initialBitmapTransformation=this.canvasBitmap.representBase(this.userCoordinates.getSimilarTransformation(this.virtualBitmapBase)),this.icContextFromCanvasBitmap=new Ln(this.infiniteCanvasContext.base.before(this.canvasBitmap.inverseBase))},t}(),Fn=function(){function t(t,e){this.userCoordinates=t,this.canvasBitmap=e,this.setDerivedProperties()}return Object.defineProperty(t.prototype,"infiniteCanvasContext",{get:function(){return this.userCoordinates},enumerable:!1,configurable:!0}),t.prototype.setCanvasBitmapDistortion=function(t){this.canvasBitmap=new Ln(t),this.setDerivedProperties()},t.prototype.setUserTransformation=function(t){this.userCoordinates=new Ln(t),this.setDerivedProperties()},t.prototype.setDerivedProperties=function(){this.userCoordinatesInsideCanvasBitmap=new Ln(this.userCoordinates.base.before(this.canvasBitmap.base)),this.initialBitmapTransformation=this.canvasBitmap.inverseBase,this.icContextFromCanvasBitmap=new Ln(this.userCoordinates.base.before(this.canvasBitmap.inverseBase))},t}();function Wn(t){var e=t.screenWidth,n=t.screenHeight,o=t.viewboxWidth,r=t.viewboxHeight;return new s(e/o,0,0,n/r,0,0)}var kn=function(){function t(t,e){this.units=t,this.coordinates=e}return Object.defineProperty(t.prototype,"userTransformation",{get:function(){return this.coordinates.userCoordinates.base},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"infiniteCanvasContext",{get:function(){return this.coordinates.infiniteCanvasContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialBitmapTransformation",{get:function(){return this.coordinates.initialBitmapTransformation},enumerable:!1,configurable:!0}),t.prototype.setCanvasBitmapDistortion=function(t){this.coordinates.setCanvasBitmapDistortion(t)},t.prototype.getBitmapTransformationToTransformedInfiniteCanvasContext=function(){return this.coordinates.userCoordinates.base},t.prototype.getBitmapTransformationToInfiniteCanvasContext=function(){return this.coordinates.icContextFromCanvasBitmap.base},t.prototype.translateInfiniteCanvasContextTransformationToBitmapTransformation=function(t){return this.coordinates.icContextFromCanvasBitmap.getSimilarTransformation(t)},t.prototype.getInitialTransformationForTransformedInfiniteCanvasContext=function(t){var e=t.before(this.coordinates.infiniteCanvasContext.base),n=this.coordinates.userCoordinatesInsideCanvasBitmap.representBase(e);return this.coordinates.userCoordinates.getSimilarTransformation(n)},t.prototype.setUserTransformation=function(t){this.coordinates.setUserTransformation(t)},t.prototype.setCanvasMeasurement=function(t){var e=Wn(t);this.coordinates.setCanvasBitmapDistortion(e)},t.prototype.useUnits=function(t){t!==this.units&&(this.units=t,t===fn.CANVAS?this.coordinates=new Dn(this.coordinates.userCoordinates,this.coordinates.canvasBitmap):this.coordinates=new Fn(this.coordinates.userCoordinates,this.coordinates.canvasBitmap))},t.create=function(e,n){var o=Wn(n);return new t(e,e===fn.CANVAS?new Dn(new Ln(s.identity),new Ln(o)):new Fn(new Ln(s.identity),new Ln(o)))},t}(),Rn=function(){function t(t,e){this.measurementProvider=t,this.config=e;var n=t.measure(),o=e.units===fn.CSS?fn.CSS:fn.CANVAS;this.coordinatesSwitch=kn.create(o,n),this.addMeasurement(n)}return Object.defineProperty(t.prototype,"viewboxWidth",{get:function(){return this.measurement.viewboxWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewboxHeight",{get:function(){return this.measurement.viewboxHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformation",{get:function(){return this.coordinatesSwitch.userTransformation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"infiniteCanvasContextBase",{get:function(){return this.coordinatesSwitch.infiniteCanvasContext.base},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inverseInfiniteCanvasContextBase",{get:function(){return this.coordinatesSwitch.infiniteCanvasContext.inverseBase},enumerable:!1,configurable:!0}),t.prototype.setTransformation=function(t){this.coordinatesSwitch.setUserTransformation(s.create(t))},t.prototype.getCSSPosition=function(t,e){var n=this.measurementProvider.measure(),o=n.left,i=n.top;return new r(t-o,e-i)},t.prototype.measure=function(){var t=this.config.units===fn.CSS?fn.CSS:fn.CANVAS;this.coordinatesSwitch.useUnits(t);var e=this.measurementProvider.measure();this.addMeasurement(e)},t.prototype.getTransformationForInstruction=function(t){return this.coordinatesSwitch.getInitialTransformationForTransformedInfiniteCanvasContext(s.create(t))},t.prototype.translateInfiniteCanvasContextTransformationToBitmapTransformation=function(t){return this.coordinatesSwitch.translateInfiniteCanvasContextTransformationToBitmapTransformation(s.create(t))},t.prototype.getInitialTransformation=function(){return this.coordinatesSwitch.initialBitmapTransformation},t.prototype.getBitmapTransformationToInfiniteCanvasContext=function(){return this.coordinatesSwitch.getBitmapTransformationToInfiniteCanvasContext()},t.prototype.getBitmapTransformationToTransformedInfiniteCanvasContext=function(){return this.coordinatesSwitch.getBitmapTransformationToTransformedInfiniteCanvasContext()},t.prototype.addPathAroundViewbox=function(t,e){var n=this.viewboxWidth+2*e,o=this.viewboxHeight+2*e;t.save(),t.setTransform(1,0,0,1,0,0),t.rect(-e,-e,n,o),t.restore()},t.prototype.addMeasurement=function(t){var e,n,o=(n=t,(e=this.measurement)?!!n&&e.viewboxWidth===n.viewboxWidth&&e.viewboxHeight===n.viewboxHeight&&e.screenWidth===n.screenWidth&&e.screenHeight===n.screenHeight:!n);if(this.measurement=t,!o){var r=t.viewboxWidth,i=t.viewboxHeight;this.polygon=it.createRectangle(0,0,r,i),this.coordinatesSwitch.setCanvasMeasurement(t)}},t}(),Nn=function(){function t(t){this.canvas=t}return t.prototype.measure=function(){var t=this.canvas.getBoundingClientRect();return{left:t.left,top:t.top,screenWidth:t.width,screenHeight:t.height,viewboxWidth:this.canvas.width,viewboxHeight:this.canvas.height}},t}(),Vn=function(){function t(t){this.canvas=t,this.listeners=[]}return t.prototype.notifyListeners=function(){for(var t=0,e=this.listeners;t<e.length;t++)(0,e[t])()},t.prototype.createObserver=function(){var t=this;this.observer=new ResizeObserver((function(){return t.notifyListeners()})),this.observer.observe(this.canvas)},t.prototype.addListener=function(t){this.listeners.push(t),this.observer||this.createObserver()},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>-1&&(this.listeners.splice(e,1),0===this.listeners.length&&(this.observer.disconnect(),this.observer=void 0))},t}();function Mn(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}}var qn=function(){return qn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},qn.apply(this,arguments)},Hn={transformationstart:null,transformationchange:null,transformationend:null},Gn={auxclick:null,click:null,contextmenu:null,dblclick:null,mouseenter:null,mouseleave:null,mouseout:null,mouseover:null,mouseup:null},Xn={gotpointercapture:null,lostpointercapture:null,pointerenter:null,pointerout:null,pointerover:null},Yn={drag:null,dragend:null,dragenter:null,dragleave:null,dragover:null,dragstart:null,drop:null},zn={touchcancel:null,touchend:null},Un=qn(qn(qn(qn({},Gn),Xn),Yn),zn),Kn={mousedown:null,mousemove:null,pointerdown:null,pointermove:null,pointerleave:null,pointercancel:null,pointerup:null,wheel:null,touchstart:null,touchmove:null,wheelignored:null,touchignored:null};function Qn(t){return Hn.hasOwnProperty(t)}function Jn(t){return Un.hasOwnProperty(t)||Kn.hasOwnProperty(t)}function Zn(t){return Kn.hasOwnProperty(t)}function $n(t){return Gn.hasOwnProperty(t)}function to(t){return Xn.hasOwnProperty(t)}function eo(t){return Yn.hasOwnProperty(t)}function no(t){return zn.hasOwnProperty(t)}var oo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ro=function(t){function e(e){var n=t.call(this)||this;return n.source=e,n}return oo(e,t),e.prototype.map=function(t){var e=this,n=function(){e.remove(t),t.removedCallback&&t.removedCallback()};return this.source.addListener(t.listener,n),{listener:t.listener,removedCallback:n}},e.prototype.mapsTo=function(t,e){return t.listener===e.listener},e.prototype.onRemoved=function(t){t.removedCallback(),this.source.removeListener(t.listener)},e.prototype.addListener=function(t,e){this.add({listener:t,removedCallback:e})},e.prototype.removeListener=function(t){this.remove({listener:t})},e}(In),io=function(t){function e(e,n){var o=t.call(this)||this;return o.transform=n,o.old=new ro(e),o}return oo(e,t),e.prototype.map=function(t){var e=this,n={oldListener:void 0,newListener:t.listener,removedCallback:function(){t.removedCallback&&t.removedCallback()}};return n.oldListener=this.transform(t.listener,(function(e){return n.removedCallback=function(){t.removedCallback&&t.removedCallback(),e()}})),this.old.addListener(n.oldListener,(function(){return e.removeListener(t.listener)})),n},e.prototype.mapsTo=function(t,e){return t.newListener===e.listener},e.prototype.onRemoved=function(t){this.old.removeListener(t.oldListener),t.removedCallback()},e.prototype.addListener=function(t,e){this.add({listener:t,removedCallback:e})},e.prototype.removeListener=function(t){this.remove({listener:t})},e}(In);function ao(t,e){return new io(t,e)}function so(t,e){return ao(t,(function(t){return function(n){t(e(n))}}))}var co=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function uo(t){return!!t&&"function"==typeof t.handleEvent}var po=function(t){function e(e){var n=t.call(this)||this;return n.source=e,n}return co(e,t),e.prototype.mapsTo=function(t,e){return t.listenerObject===e.listenerObject},e.prototype.map=function(t){var e=this,n=t.listenerObject,o=t.removedCallback,r=function(t){n.handleEvent(t)},i=function(){e.remove(t),o&&o()};return this.source.addListener(r,i),{listener:r,listenerObject:n,removedCallback:i}},e.prototype.onRemoved=function(t){this.source.removeListener(t.listener),t.removedCallback()},e}(In),fo=function(){function t(t){this.source=t,this.listenerObjectCollection=new po(t)}return t.prototype.addListener=function(t,e){uo(t)?this.listenerObjectCollection.add({listenerObject:t,removedCallback:e}):this.source.addListener(t,e)},t.prototype.removeListener=function(t){uo(t)?this.listenerObjectCollection.remove({listenerObject:t}):this.source.removeListener(t)},t}();function lo(t){return new fo(t)}var ho=function(){function t(t){var e=this;this.source=t,this.firstDispatcher=new xn,this.secondDispatcher=new xn,this.numberOfListeners=0,this.sourceListener=function(t){return e.dispatchEvent(t)}}return t.prototype.add=function(){0===this.numberOfListeners&&this.source.addListener(this.sourceListener),this.numberOfListeners++},t.prototype.remove=function(){this.numberOfListeners--,0===this.numberOfListeners&&this.source.removeListener(this.sourceListener)},t.prototype.dispatchEvent=function(t){this.firstDispatcher.dispatch(t),this.secondDispatcher.dispatch(t)},t.prototype.build=function(){var t=this;return{first:ao(this.firstDispatcher,(function(e,n){return t.add(),n((function(){return t.remove()})),e})),second:ao(this.secondDispatcher,(function(e,n){return t.add(),n((function(){return t.remove()})),e}))}},t}();function yo(t){return new ho(t).build()}function vo(t,e){return ao(t,(function(t){return function(n){e(n)&&t(n)}}))}var go=function(){function t(t,e){t=function(t,e){return ao(t,(function(t){return function(n){t.apply(e,[n])}}))}(t,e),this._onceSource=lo(function(t){var e=ao(t,(function(t){return function(n){t(n),e.removeListener(t)}}));return e}(t)),this.source=lo(t)}return t.prototype.addListener=function(t,e){e&&e.once?this._onceSource.addListener(t):this.source.addListener(t)},t.prototype.removeListener=function(t){this.source.removeListener(t),this._onceSource.removeListener(t)},t}(),mo=function(){function t(t,e){this.captureSource=t,this.bubbleSource=e}return Object.defineProperty(t.prototype,"on",{get:function(){return this.onEventHandler},set:function(t){t?(this.wrappedOnEventHandler=function(e){return t.apply(this,[e])},this.onEventHandler=t,this.bubbleSource.addListener(this.wrappedOnEventHandler)):(this.bubbleSource.removeListener(this.wrappedOnEventHandler),this.wrappedOnEventHandler=null,this.onEventHandler=null)},enumerable:!1,configurable:!0}),t.prototype.addListener=function(t,e){var n=e&&("boolean"==typeof e?void 0:e);("boolean"==typeof e?e:e&&e.capture)?this.captureSource.addListener(t,n):this.bubbleSource.addListener(t,n)},t.prototype.removeListener=function(t,e){("boolean"==typeof e?e:e&&e.capture)?this.captureSource.removeListener(t):this.bubbleSource.removeListener(t)},t}();function bo(t,e,n,o){return function(t,e,n){return new mo(new go(t,n),new go(e,n))}(so(vo(t,(function(t){return!t.immediatePropagationStopped})),(function(t){return t.getResultEvent(n)})),so(vo(e,(function(t){return!t.propagationStopped&&!t.immediatePropagationStopped})),(function(t){return t.getResultEvent(n)})),o)}function Po(t){var e=yo(t),n=e.first,o=yo(e.second);return{captureSource:n,bubbleSource:o.first,afterBubble:o.second}}var wo=function(){function t(t,e){this.rectangle=t,this.infiniteCanvas=e,this.cache={}}return t.prototype.map=function(t,e){return function(t,e,n){var o=Po(t);return bo(o.captureSource,o.bubbleSource,e,n)}(so(t,e),this.rectangle,this.infiniteCanvas)},t.prototype.setOn=function(t,e){if(e)this.cache[t]||(this.cache[t]=this.getEventSource(t)),this.cache[t].on=e;else{if(!this.cache[t])return;this.cache[t].on=null}},t.prototype.getOn=function(t){return this.cache[t]?this.cache[t].on:null},t.prototype.addEventListener=function(t,e,n){this.cache[t]||(this.cache[t]=this.getEventSource(t)),function(t,e,n){uo(e),t.addListener(e,n)}(this.cache[t],e,n)},t.prototype.removeEventListener=function(t,e,n){this.cache[t]&&function(t,e,n){uo(e),t.removeListener(e,n)}(this.cache[t],e,n)},t}(),Oo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oo(e,t),e.prototype.getEventSource=function(t){return this.cache&&this.cache[t]||(this.cache=this.createEvents()),this.cache[t]},e}(wo),To=function(){function t(t,e){this.canvasEvent=t,this.preventableDefault=e}return Object.defineProperty(t.prototype,"bubbles",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTrusted",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventPhase",{get:function(){return Event.AT_TARGET},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this.preventableDefault.cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this.preventableDefault.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AT_TARGET",{get:function(){return Event.AT_TARGET},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BUBBLING_PHASE",{get:function(){return Event.BUBBLING_PHASE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CAPTURING_PHASE",{get:function(){return Event.CAPTURING_PHASE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NONE",{get:function(){return Event.NONE},enumerable:!1,configurable:!0}),t.prototype.initEvent=function(t,e,n){},t.prototype.preventDefault=function(){this.preventableDefault.preventDefault()},t.prototype.stopImmediatePropagation=function(){this.canvasEvent.stopImmediatePropagation()},t.prototype.stopPropagation=function(){this.canvasEvent.stopPropagation()},t}(),Io=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),So=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.type=o,r}return Io(e,t),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"returnValue",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return[]},e}(To),xo=function(){function t(t){this.preventableDefault=t,this.propagationStopped=!1,this.immediatePropagationStopped=!1}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return this.preventableDefault.infiniteCanvasDefaultPrevented},enumerable:!1,configurable:!0}),t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=!0},t.prototype.getResultEvent=function(t){return this.resultEvent||(this.resultEvent=this.createResultEvent(t)),this.resultEvent},t}(),_o=function(){function t(){}return Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this._defaultPrevented=!0},t}(),jo=function(){function t(){}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){},t}(),Bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ao=function(t){function e(e){return t.call(this,e?new _o:new jo)||this}return Bo(e,t),e}(xo),Eo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lo=function(t){function e(e,n){var o=t.call(this,e,n,"draw")||this;return o.transformation=e.transformation,o.inverseTransformation=e.inverseTransformation,o}return Eo(e,t),e}(So),Do=function(t){function e(){return t.call(this,!1)||this}return Eo(e,t),e.prototype.createResultEvent=function(t){return this.transformation=Mn(t.inverseInfiniteCanvasContextBase),this.inverseTransformation=Mn(t.infiniteCanvasContextBase),new Lo(this,this.preventableDefault)},e}(Ao),Fo=function(t){function e(e,n,o){var r=t.call(this,n,o)||this;return r.drawingIterationProvider=e,r}return Eo(e,t),e.prototype.createEvents=function(){return{draw:this.map(this.drawingIterationProvider.drawHappened,(function(){return new Do}))}},e}(Co),Wo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ko=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.transformation=e.transformation,r.inverseTransformation=e.inverseTransformation,r}return Wo(e,t),e}(So),Ro=function(t){function e(e){var n=t.call(this,!1)||this;return n.type=e,n}return Wo(e,t),e.prototype.createResultEvent=function(t){return this.transformation=Mn(t.inverseInfiniteCanvasContextBase),this.inverseTransformation=Mn(t.infiniteCanvasContextBase),new ko(this,this.preventableDefault,this.type)},e}(Ao),No=function(t){function e(e,n,o){var r=t.call(this,n,o)||this;return r.transformer=e,r}return Wo(e,t),e.prototype.createEvents=function(){return{transformationstart:this.map(this.transformer.transformationStart,(function(){return new Ro("transformationstart")})),transformationchange:this.map(this.transformer.transformationChange,(function(){return new Ro("transformationchange")})),transformationend:this.map(this.transformer.transformationEnd,(function(){return new Ro("transformationend")}))}},e}(Co);function Vo(t,e){return{addListener:function(n){t.addEventListener(e,n)},removeListener:function(n){t.removeEventListener(e,n)}}}var Mo=function(){function t(t){this.event=t}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeDefaultPrevented",{get:function(){return this.event.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeCancelable",{get:function(){return this.event.cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this.event.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this.event.cancelable},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.event.preventDefault()},t}(),qo=function(){function t(t){this.event=t}return Object.defineProperty(t.prototype,"infiniteCanvasDefaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeDefaultPrevented",{get:function(){return this.event.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nativeCancelable",{get:function(){return this.event.cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(t){this._defaultPrevented=!0,t&&this.event.preventDefault()},t}(),Ho=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Go=function(t){function e(e,n){var o=t.call(this,n?new qo(e):new Mo(e))||this;return o.event=e,o}return Ho(e,t),e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.event&&this.event.stopPropagation()},e.prototype.stopImmediatePropagation=function(){t.prototype.stopImmediatePropagation.call(this),this.event&&this.event.stopImmediatePropagation()},e}(xo),Xo=function(){function t(t,e,n,o){this.offsetX=t,this.offsetY=e,this.movementX=n,this.movementY=o}return t.prototype.toInfiniteCanvasCoordinates=function(e){var n=e.inverseInfiniteCanvasContextBase.apply(new r(this.offsetX,this.offsetY)),o=n.x,i=n.y,a=e.inverseInfiniteCanvasContextBase.untranslated().apply(new r(this.movementX,this.movementY));return new t(o,i,a.x,a.y)},t.create=function(e){return new t(e.offsetX,e.offsetY,e.movementX,e.movementY)},t}(),Yo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zo=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.event=o,r}return Yo(e,t),Object.defineProperty(e.prototype,"nativeDefaultPrevented",{get:function(){return this.preventableDefault.nativeDefaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeCancelable",{get:function(){return this.preventableDefault.nativeCancelable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return this.event.cancelBubble},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composed",{get:function(){return this.event.composed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.event.currentTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"returnValue",{get:function(){return this.event.returnValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return this.event.srcElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.event.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this.event.timeStamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.event.type},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(t){this.preventableDefault.preventDefault(t)},e.prototype.composedPath=function(){return this.event.composedPath()},e}(To),Uo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Uo(e,t),Object.defineProperty(e.prototype,"detail",{get:function(){return this.event.detail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.event.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"which",{get:function(){return this.event.which},enumerable:!1,configurable:!0}),e.prototype.initUIEvent=function(t,e,n,o,r){},e}(zo),Qo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jo=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.offsetX=r.offsetX,i.offsetY=r.offsetY,i.movementX=r.movementX,i.movementY=r.movementY,i}return Qo(e,t),Object.defineProperty(e.prototype,"altKey",{get:function(){return this.event.altKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this.event.button},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){return this.event.buttons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.event.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.event.clientY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this.event.ctrlKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metaKey",{get:function(){return this.event.metaKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.event.pageX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.event.pageY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relatedTarget",{get:function(){return this.event.relatedTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.event.screenX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.event.screenY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this.event.shiftKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.event.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.event.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(t){return this.event.getModifierState(t)},e.prototype.initMouseEvent=function(t,e,n,o,r,i,a,s,c,u,p,f,l,h,y){},e}(Ko),Zo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$o=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=Xo.create(e),o}return Zo(e,t),e.prototype.createResultEvent=function(t){return new Jo(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(Go),tr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),er=function(t){function e(e,n,o,r,i,a){var s=t.call(this,e,n,o,r)||this;return s.width=i,s.height=a,s}return tr(e,t),e.prototype.toInfiniteCanvasCoordinates=function(n){var o=t.prototype.toInfiniteCanvasCoordinates.call(this,n),i=o.offsetX,a=o.offsetY,s=o.movementX,c=o.movementY,u=n.inverseInfiniteCanvasContextBase.untranslated().apply(new r(this.width,this.height));return new e(i,a,s,c,u.x,u.y)},e.create=function(n){var o=t.create.call(this,n);return new e(o.offsetX,o.offsetY,o.movementX,o.movementY,n.width,n.height)},e}(Xo),nr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),or=function(t){function e(e,n,o,r){return t.call(this,e,n,o,r)||this}return nr(e,t),Object.defineProperty(e.prototype,"isPrimary",{get:function(){return this.event.isPrimary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.event.pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerType",{get:function(){return this.event.pointerType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pressure",{get:function(){return this.event.pressure},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tangentialPressure",{get:function(){return this.event.tangentialPressure},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tiltX",{get:function(){return this.event.tiltX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tiltY",{get:function(){return this.event.tiltY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"twist",{get:function(){return this.event.twist},enumerable:!1,configurable:!0}),e.prototype.getCoalescedEvents=function(){return console.warn("`PointerEvent.getCoalescedEvents()` is currently not supported by InfiniteCanvas"),[]},e.prototype.getPredictedEvents=function(){return console.warn("`PointerEvent.getPredictedEvents()` is currently not supported by InfiniteCanvas"),[]},e}(Jo),rr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ir=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=er.create(e),o}return rr(e,t),e.prototype.createResultEvent=function(t){return new or(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(Go),ar=function(t,e){this.initial=t,this.cancel=e,this.current=t},sr=function(){function t(t){this.point=t,this.moveEventDispatcher=new xn,this._fixedOnInfiniteCanvas=!1}return Object.defineProperty(t.prototype,"fixedOnInfiniteCanvas",{get:function(){return this._fixedOnInfiniteCanvas},enumerable:!1,configurable:!0}),t.prototype.removeHandler=function(t){this.moveEventDispatcher.removeListener(t)},t.prototype.moveTo=function(t,e){var n=new r(t,e);this.point=n,this.moveEventDispatcher.dispatch(n)},t.prototype.onMoved=function(t,e){var n,o=this;this._fixedOnInfiniteCanvas=e;var r=function(e){n.current=e,t()};return this.moveEventDispatcher.addListener(r),n=new ar(this.point,(function(){return o.removeHandler(r),o._fixedOnInfiniteCanvas=!1,o}))},t}(),cr=function(){function t(t){this.pointerEvent=t,this._defaultPrevented=!1,this.anchor=new sr(new r(t.offsetX,t.offsetY))}return Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"touchId",{get:function(){return this._touchId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.pointerEvent.pointerId},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this._defaultPrevented=!0},t.prototype.setTouchId=function(t){this._touchId=t},t.prototype.updatePointerEvent=function(t){this.pointerEvent=t,this.anchor.moveTo(t.offsetX,t.offsetY)},t}(),ur=function(){function t(){this.anchors=[]}return t.prototype.find=function(t){return this.anchors.find(t)},t.prototype.getAll=function(t){return this.anchors.filter(t)},t.prototype.getAnchorForTouch=function(t){return this.anchors.find((function(e){return e.touchId===t}))},t.prototype.addAnchorForPointerEvent=function(t){var e=new cr(t);this.anchors.push(e)},t.prototype.updateAnchorForPointerEvent=function(t){var e=this.getAnchorForPointerEvent(t);e?e.updatePointerEvent(t):this.addAnchorForPointerEvent(t)},t.prototype.getAnchorForPointerEvent=function(t){return this.anchors.find((function(e){return e.pointerId===t.pointerId}))},t.prototype.removeAnchor=function(t){var e=this.anchors.findIndex((function(e){return e===t}));e>-1&&this.anchors.splice(e,1)},t}(),pr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fr=function(t){function e(e,n,o,r,i,a){var s=t.call(this,e,n,o,r)||this;return s.deltaX=i,s.deltaY=a,s}return pr(e,t),e.prototype.toInfiniteCanvasCoordinates=function(n){var o=t.prototype.toInfiniteCanvasCoordinates.call(this,n),i=o.offsetX,a=o.offsetY,s=o.movementX,c=o.movementY,u=n.inverseInfiniteCanvasContextBase.untranslated().apply(new r(this.deltaX,this.deltaY));return new e(i,a,s,c,u.x,u.y)},e.create=function(n){var o=t.create.call(this,n);return new e(o.offsetX,o.offsetY,o.movementX,o.movementY,n.deltaX,n.deltaY)},e}(Xo),lr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hr=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o,r)||this;return i.deltaX=r.deltaX,i.deltaY=r.deltaY,i}return lr(e,t),Object.defineProperty(e.prototype,"deltaMode",{get:function(){return this.event.deltaMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deltaZ",{get:function(){return this.event.deltaZ},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DOM_DELTA_LINE",{get:function(){return this.event.DOM_DELTA_LINE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DOM_DELTA_PAGE",{get:function(){return this.event.DOM_DELTA_PAGE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DOM_DELTA_PIXEL",{get:function(){return this.event.DOM_DELTA_PIXEL},enumerable:!1,configurable:!0}),e}(Jo),yr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dr=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=fr.create(e),o}return yr(e,t),e.prototype.createResultEvent=function(t){return new hr(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(Go);function vr(t,e){for(var n=[],o=0;o<t.length;o++){var r=t[o];e&&!e(r)||n.push(r)}return n}var gr=function(){function t(t,e,n,o,r,i){this.x=t,this.y=e,this.radiusX=n,this.radiusY=o,this.rotationAngle=r,this.identifier=i}return t.prototype.toInfiniteCanvasCoordinates=function(e){var n=e.inverseInfiniteCanvasContextBase,o=n.apply(new r(this.x,this.y));return new t(o.x,o.y,this.radiusX*n.scale,this.radiusY*n.scale,this.rotationAngle+n.getRotationAngle(),this.identifier)},t.create=function(e,n){var o=n.getCSSPosition(e.clientX,e.clientY);return new t(o.x,o.y,e.radiusX,e.radiusY,e.rotationAngle,e.identifier)},t}(),mr=function(){function t(){this.translatedProps=[],this.createdProps=[]}return t.prototype.toInfiniteCanvasCoordinates=function(t,e){var n=this.translatedProps.find((function(e){return e.identifier===t.identifier}));return n||(n=t.toInfiniteCanvasCoordinates(e),this.translatedProps.push(n),n)},t.prototype.createProps=function(t,e){var n=this.createdProps.find((function(e){return e.identifier===t.identifier}));return n||(n=gr.create(t,e),this.createdProps.push(n),n)},t.prototype.dispose=function(){this.translatedProps.splice(0,this.translatedProps.length),this.createdProps.splice(0,this.createdProps.length)},t}(),br=function(){function t(t,e,n){this.targetTouches=t,this.changedTouches=e,this.touches=n}return t.prototype.toInfiniteCanvasCoordinates=function(e){var n=new mr,o=new t(this.targetTouches.map((function(t){return n.toInfiniteCanvasCoordinates(t,e)})),this.changedTouches.map((function(t){return n.toInfiniteCanvasCoordinates(t,e)})),this.touches.map((function(t){return n.toInfiniteCanvasCoordinates(t,e)})));return n.dispose(),o},t.create=function(e,n,o){var r=new mr,i=n.map((function(t){return r.createProps(t,e)})),a=o.map((function(t){return r.createProps(t,e)}));return r.dispose(),new t(i,a,i)},t}(),Pr=function(){function t(t,e){this.touch=t,this.infiniteCanvasX=e.x,this.infiniteCanvasY=e.y,this.radiusX=e.radiusX,this.radiusY=e.radiusY,this.rotationAngle=e.rotationAngle}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.touch.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.touch.clientY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"force",{get:function(){return this.touch.force},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.touch.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.touch.pageX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.touch.pageY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.touch.screenX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.touch.screenY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.touch.target},enumerable:!1,configurable:!0}),t}(),wr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wr(e,t),e.prototype.item=function(t){return this[t]},e}(Array);function Cr(t,e){for(var n=t.length,o=0;o<n;o++){var r=t[o];if(r.identifier===e)return r}}function Tr(t,e){for(var n=0,o=t;n<o.length;n++){var r=Cr(o[n],e);if(r)return r}}function Ir(t,e){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],a=Tr(t,i.identifier);a&&n.push(new Pr(a,i))}return new(Or.bind.apply(Or,function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}([void 0],n,!1)))}var Sr=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.touches=Ir([o.touches],r.touches),i.targetTouches=Ir([o.touches],r.targetTouches),i.changedTouches=Ir([o.touches,o.changedTouches],r.changedTouches),i}return wr(e,t),Object.defineProperty(e.prototype,"altKey",{get:function(){return this.event.altKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this.event.ctrlKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metaKey",{get:function(){return this.event.metaKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this.event.shiftKey},enumerable:!1,configurable:!0}),e}(Ko),xr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_r=function(t){function e(e,n,o){var r=t.call(this,e,o)||this;return r.props=n,r}return xr(e,t),e.prototype.createResultEvent=function(t){return new Sr(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e.create=function(t,n,o,r,i){return new e(n,br.create(t,o,r),i)},e}(Go),jr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Br=function(){function t(t,e){this.source=t,this.listener=e,t.addListener(e)}return t.prototype.remove=function(){this.source.removeListener(this.listener)},t}(),Ar=function(){function t(t,e,n,o){var r;this.listener=n,this.onRemoved=o,this.otherSubscription=new Br(e,(function(t){r=t})),this.subscription=new Br(t,(function(t){n([t,r])}))}return t.prototype.remove=function(){this.subscription.remove(),this.otherSubscription.remove(),this.onRemoved&&this.onRemoved()},t}(),Er=function(t){function e(e,n){var o=t.call(this)||this;return o.source=e,o.otherSource=n,o}return jr(e,t),e.prototype.map=function(t){return new Ar(this.source,this.otherSource,t.listener,t.onRemoved)},e.prototype.mapsTo=function(t,e){return t.listener===e.listener},e.prototype.onRemoved=function(t){t.remove()},e.prototype.addListener=function(t,e){this.add({listener:t,onRemoved:e})},e.prototype.removeListener=function(t){this.remove({listener:t})},e}(In);function Lr(t,e){return new Er(t,e)}function Dr(t,e){return ao(t,(function(t){var n=!1,o=[];function r(){n||0===o.length||(n=!0,e(o.shift()).addListener(t,(function(){n=!1,r()})))}return function(t){o.push(t),r()}}))}var Fr=function(){function t(t){this.sequence=t}return t.prototype.addListener=function(t,e){for(var n=0,o=this.sequence;n<o.length;n++)t(o[n]);e&&e()},t.prototype.removeListener=function(t){},t}(),Wr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kr=function(t){function e(e){var n=t.call(this,!0)||this;return n.type=e,n}return Wr(e,t),e.prototype.createResultEvent=function(){return new So(this,this.preventableDefault,this.type)},e}(Ao),Rr=function(t){function e(e,n,o,r,i){var a=t.call(this,o,r)||this;a.transformer=n,a.config=i,a.anchorSet=new ur;var s=Vo(e,"pointerdown"),c=Vo(e,"pointerleave"),u=Vo(e,"pointermove"),p=Vo(e,"pointerup"),f=Vo(e,"pointercancel"),l=vo(Vo(e,"touchmove"),(function(t){return function(t,e){for(var n=0;n<t.length;n++)if(o=t[n],!a.hasFixedAnchorForTouch(o.identifier))return!0;var o;return!1}(t.targetTouches)}));s.addListener((function(t){return a.anchorSet.updateAnchorForPointerEvent(t)})),u.addListener((function(t){return a.anchorSet.updateAnchorForPointerEvent(t)})),p.addListener((function(t){return a.removePointer(t)})),c.addListener((function(t){return a.removePointer(t)}));var h=so(Vo(e,"mousedown"),(function(t){return new $o(t,!0)})),y=so(Vo(e,"wheel"),(function(t){return new dr(t,!0)})),d=so(Vo(e,"touchstart"),(function(t){var e=vr(t.targetTouches),n=vr(t.changedTouches);return _r.create(a.rectangle,t,e,n,!0)})),v=Po(so(s,(function(t){return new ir(t,!0)}))),g=v.captureSource,m=v.bubbleSource,b=v.afterBubble,P=Po(h),w=P.captureSource,O=P.bubbleSource,C=P.afterBubble,T=Po(d),I=T.captureSource,S=T.bubbleSource,x=T.afterBubble,_=Po(y),j=_.captureSource,B=_.bubbleSource,A=_.afterBubble,E=Po(so(vo(A,(function(t){return!a.config.greedyGestureHandling&&!t.event.ctrlKey&&!t.infiniteCanvasDefaultPrevented})),(function(){return new kr("wheelignored")}))),L=E.captureSource,D=E.bubbleSource,F=E.afterBubble;A.addListener((function(t){t.infiniteCanvasDefaultPrevented||a.zoom(t.event)})),F.addListener((function(t){t.infiniteCanvasDefaultPrevented||console.warn("use ctrl + scroll to zoom")})),Lr(C,b).addListener((function(t){var e=t[0],n=t[1];e.infiniteCanvasDefaultPrevented||n.infiniteCanvasDefaultPrevented||a.transformUsingPointer(e.event,n.event)}));var W=Lr(vo(x,(function(t){return 1===t.event.changedTouches.length})),b);W.addListener((function(t){var e=t[0],n=t[1],o=e.event.changedTouches[0],r=a.anchorSet.getAnchorForPointerEvent(n.event);if(r)if(r.setTouchId(o.identifier),e.infiniteCanvasDefaultPrevented||n.infiniteCanvasDefaultPrevented)r.preventDefault();else if(a.config.greedyGestureHandling)a.rectangle.measure(),a.transformer.addAnchor(r.anchor),e.event.preventDefault();else{var i=a.anchorSet.find((function(t){return void 0!==t.touchId&&t!==r&&!t.defaultPrevented}));if(!i)return;a.rectangle.measure(),a.transformer.addAnchor(i.anchor),a.transformer.addAnchor(r.anchor),e.event.preventDefault()}}));var k=vo(Lr(f,W),(function(t){var e=t[0],n=t[1],o=(n[0],n[1]);return e.pointerId===o.event.pointerId}));k.addListener((function(t){var e=t[0];a.removePointer(e)}));var R=so(vo(k,(function(t){t[0];var e=t[1],n=e[0],o=e[1];return!a.config.greedyGestureHandling&&!n.infiniteCanvasDefaultPrevented&&!o.infiniteCanvasDefaultPrevented})),(function(){return new kr("touchignored")})),N=Po(R),V=N.captureSource,M=N.bubbleSource;return N.afterBubble.addListener((function(t){t.infiniteCanvasDefaultPrevented||console.warn("use two fingers to move")})),a.cache={mousemove:a.map(vo(Vo(e,"mousemove"),(function(){return!a.mouseAnchorIsFixed()})),(function(t){return new $o(t)})),mousedown:bo(w,O,o,r),pointerdown:bo(g,m,o,r),pointermove:a.map(Dr(vo(u,(function(){return a.hasNonFixedAnchorForSomePointer()})),(function(){return t=a.anchorSet.getAll((function(t){return!t.anchor.fixedOnInfiniteCanvas})).map((function(t){return t.pointerEvent})),new Fr(t);var t})),(function(t){return new ir(t)})),pointerleave:a.map(c,(function(t){return new ir(t)})),pointerup:a.map(p,(function(t){return new ir(t)})),pointercancel:a.map(f,(function(t){return new ir(t)})),wheel:bo(j,B,o,r),wheelignored:bo(L,D,o,r),touchstart:bo(I,S,o,r),touchignored:bo(V,M,o,r),touchmove:a.map(l,(function(t){var e=vr(t.targetTouches),n=vr(t.targetTouches,(function(t){return!a.hasFixedAnchorForTouch(t.identifier)}));return _r.create(a.rectangle,t,e,n)}))},a}return Wr(e,t),e.prototype.getEventSource=function(t){return this.cache[t]},e.prototype.mouseAnchorIsFixed=function(){var t=this.anchorSet.find((function(t){return"mouse"===t.pointerEvent.pointerType}));return!!t&&t.anchor.fixedOnInfiniteCanvas},e.prototype.hasFixedAnchorForTouch=function(t){var e=this.anchorSet.getAnchorForTouch(t);return!!e&&e.anchor.fixedOnInfiniteCanvas},e.prototype.hasNonFixedAnchorForSomePointer=function(){return!!this.anchorSet.find((function(t){return!t.anchor.fixedOnInfiniteCanvas}))},e.prototype.transformUsingPointer=function(t,e){this.rectangle.measure();var n=this.anchorSet.getAnchorForPointerEvent(e);1===e.button&&this.config.rotationEnabled?(t.preventDefault(),this.transformer.addRotationAnchor(n.anchor)):0===e.button&&this.transformer.addAnchor(n.anchor)},e.prototype.removePointer=function(t){var e=this.anchorSet.getAnchorForPointerEvent(t);e&&(this.transformer.releaseAnchor(e.anchor),this.anchorSet.removeAnchor(e))},e.prototype.zoom=function(t){if(this.config.greedyGestureHandling||t.ctrlKey){var e=t.offsetX,n=t.offsetY,o=t.deltaY,r=Math.pow(2,-o/300);this.rectangle.measure(),this.transformer.zoom(e,n,r),t.preventDefault()}},e}(wo),Nr=function(){function t(t,e){this.handledOrFilteredEventCollection=t,this.mappingCollection=e}return t.prototype.setOn=function(t,e){Zn(t)?this.handledOrFilteredEventCollection.setOn(t,e):this.mappingCollection.setOn(t,e)},t.prototype.getOn=function(t){return Zn(t)?this.handledOrFilteredEventCollection.getOn(t):this.mappingCollection.getOn(t)},t.prototype.addEventListener=function(t,e,n){Zn(t)?this.handledOrFilteredEventCollection.addEventListener(t,e,n):this.mappingCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){Zn(t)?this.handledOrFilteredEventCollection.removeEventListener(t,e,n):this.mappingCollection.removeEventListener(t,e,n)},t}(),Vr=function(){function t(t,e,n,o){this.mappedMouseEventCollection=t,this.mappedTouchEventCollection=e,this.mappedOnlyPointerEventCollection=n,this.mappedDragEventCollection=o}return t.prototype.setOn=function(t,e){$n(t)?this.mappedMouseEventCollection.setOn(t,e):no(t)?this.mappedTouchEventCollection.setOn(t,e):to(t)?this.mappedOnlyPointerEventCollection.setOn(t,e):eo(t)&&this.mappedDragEventCollection.setOn(t,e)},t.prototype.getOn=function(t){return $n(t)?this.mappedMouseEventCollection.getOn(t):no(t)?this.mappedTouchEventCollection.getOn(t):to(t)?this.mappedOnlyPointerEventCollection.getOn(t):eo(t)?this.mappedDragEventCollection.getOn(t):void 0},t.prototype.addEventListener=function(t,e,n){$n(t)?this.mappedMouseEventCollection.addEventListener(t,e,n):no(t)?this.mappedTouchEventCollection.addEventListener(t,e,n):to(t)?this.mappedOnlyPointerEventCollection.addEventListener(t,e,n):eo(t)&&this.mappedDragEventCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){$n(t)?this.mappedMouseEventCollection.removeEventListener(t,e,n):no(t)?this.mappedTouchEventCollection.removeEventListener(t,e,n):to(t)?this.mappedOnlyPointerEventCollection.removeEventListener(t,e,n):eo(t)&&this.mappedDragEventCollection.removeEventListener(t,e,n)},t}(),Mr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qr=function(t){function e(e,n,o,r){var i=t.call(this,o,r)||this;return i.canvasEl=e,i.createInternalEvent=n,i.cache={},i}return Mr(e,t),e.prototype.getEventSource=function(t){return this.cache[t]||(this.cache[t]=this.createEventSource(t)),this.cache[t]},e.prototype.createEventSource=function(t){var e=this;return this.map(Vo(this.canvasEl,t),(function(t){return e.createInternalEvent(t)}))},e}(wo),Hr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hr(e,t),Object.defineProperty(e.prototype,"dataTransfer",{get:function(){return this.event.dataTransfer},enumerable:!1,configurable:!0}),e}(Jo),Xr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yr=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.props=Xo.create(e),o}return Xr(e,t),e.prototype.createResultEvent=function(t){return new Gr(this,this.preventableDefault,this.event,this.props.toInfiniteCanvasCoordinates(t))},e}(Go),zr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ur=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zr(e,t),e.prototype.createResultEvent=function(){return this.event},e}(Go),Kr=function(){function t(t,e,n,o){this.drawEventCollection=t,this.transformationEventCollection=e,this.pointerEventCollection=n,this.unmappedEventCollection=o}return t.prototype.setOn=function(t,e){"draw"===t?this.drawEventCollection.setOn("draw",e):Qn(t)?this.transformationEventCollection.setOn(t,e):Jn(t)?this.pointerEventCollection.setOn(t,e):this.unmappedEventCollection.setOn(t,e)},t.prototype.getOn=function(t){return"draw"===t?this.drawEventCollection.getOn("draw"):Qn(t)?this.transformationEventCollection.getOn(t):Jn(t)?this.pointerEventCollection.getOn(t):this.unmappedEventCollection.getOn(t)},t.prototype.addEventListener=function(t,e,n){"draw"===t?this.drawEventCollection.addEventListener("draw",e,n):Qn(t)?this.transformationEventCollection.addEventListener(t,e,n):Jn(t)?this.pointerEventCollection.addEventListener(t,e,n):this.unmappedEventCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){"draw"===t?this.drawEventCollection.removeEventListener("draw",e,n):Qn(t)?this.transformationEventCollection.removeEventListener(t,e,n):Jn(t)?this.pointerEventCollection.removeEventListener(t,e,n):this.unmappedEventCollection.removeEventListener(t,e,n)},t.create=function(e,n,o,r,i,a){var s=new Fo(a,o,r),c=new No(n,o,r),u=new Rr(e,n,o,r,i);return new t(s,c,new Nr(u,new Vr(new qr(e,(function(t){return new $o(t)}),o,r),new qr(e,(function(t){var e=vr(t.targetTouches),n=vr(t.changedTouches);return _r.create(o,t,e,n)}),o,r),new qr(e,(function(t){return new ir(t)}),o,r),new qr(e,(function(t){return new Yr(t)}),o,r))),new qr(e,(function(t){return new Ur(t)}),o,r))},t}(),Qr=function(){function t(t){this.ctx=t,this.cache={}}return t.prototype.getNumberOfPixels=function(t,e){if(0===t)return 0;if("px"===e)return t;var n=this.cache[e];return n||(n=function(t,e){var n=t.canvas.width,o=1,r=1,i=-1;return c(),function(){for(var t=0;-1===i&&t<10;)r*=10,c(),t++;s()}(),function(){var t=0;do{var e=i;if(a(),i===e)break;t++}while(t<10)}(),{numerator:o,denominator:r,pixels:i};function a(){for(var t,e=n/(i+1),a=0===i?e:Math.min((n-1)/i,e);(t=Math.floor(a))<2;)a*=10,r*=10;o*=t,c(),s()}function s(){if(-1===i)throw new Error("something went wrong while getting measurement for unit '".concat(e,"' on canvas with width ").concat(n))}function c(){i=function(t,e){var n=-1,o=t.canvas.width;t.save(),t.fillStyle="#fff",t.fillRect(0,0,o,5),t.filter="drop-shadow(".concat(e," 0)"),t.fillRect(0,0,1,5);for(var r=t.getImageData(0,0,o,3).data,i=0;i<o;i++)if(255!==r[4*(2*o+i)]){n=i;break}return t.restore(),n}(t,"".concat(o/r).concat(e))}}(this.ctx,e),this.cache[e]=n),t*n.pixels*n.denominator/n.numerator},t}(),Jr=function(){function t(t,e){var n=this;this.canvas=t,this.config={rotationEnabled:!0,greedyGestureHandling:!1,units:fn.CANVAS},e&&Object.assign(this.config,e),this.canvasResizeObserver=new Vn(t),this.canvasResizeListener=function(){null!==n.canvas.parentElement&&n.viewBox.draw()};var o,r=new An(new Bn),i=new En(r);this.rectangle=new Rn(new Nn(t),this.config);var a=t.getContext("2d");this.cssLengthConverterFactory={create:function(){return new Qr(a)}},this.viewBox=new vn(this.rectangle,a,i,(function(){return i.getLock()}),(function(){return o.isTransforming})),o=new jn(this.viewBox,this.config),this.eventCollection=Kr.create(t,o,this.rectangle,this,this.config,r),e&&e.units===fn.CSS&&this.canvasResizeObserver.addListener(this.canvasResizeListener)}return t.prototype.setUnits=function(t){t===fn.CSS&&this.config.units!==fn.CSS&&this.canvasResizeObserver.addListener(this.canvasResizeListener),t!==fn.CSS&&this.config.units===fn.CSS&&this.canvasResizeObserver.removeListener(this.canvasResizeListener),this.config.units=t,this.rectangle.measure(),this.viewBox.draw()},t.prototype.getContext=function(){return this.context||(this.context=new Nt(this.canvas,this.viewBox,this.cssLengthConverterFactory)),this.context},Object.defineProperty(t.prototype,"transformation",{get:function(){return Mn(this.rectangle.inverseInfiniteCanvasContextBase)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inverseTransformation",{get:function(){return Mn(this.rectangle.infiniteCanvasContextBase)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationEnabled",{get:function(){return this.config.rotationEnabled},set:function(t){this.config.rotationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"units",{get:function(){return this.config.units},set:function(t){this.setUnits(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"greedyGestureHandling",{get:function(){return this.config.greedyGestureHandling},set:function(t){this.config.greedyGestureHandling=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransformationstart",{get:function(){return this.eventCollection.getOn("transformationstart")},set:function(t){this.eventCollection.setOn("transformationstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransformationchange",{get:function(){return this.eventCollection.getOn("transformationchange")},set:function(t){this.eventCollection.setOn("transformationchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransformationend",{get:function(){return this.eventCollection.getOn("transformationend")},set:function(t){this.eventCollection.setOn("transformationend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondraw",{get:function(){return this.eventCollection.getOn("draw")},set:function(t){this.eventCollection.setOn("draw",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwheelignored",{get:function(){return this.eventCollection.getOn("wheelignored")},set:function(t){this.eventCollection.setOn("wheelignored",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchignored",{get:function(){return this.eventCollection.getOn("touchignored")},set:function(t){this.eventCollection.setOn("touchignored",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncopy",{get:function(){return this.eventCollection.getOn("copy")},set:function(t){this.eventCollection.setOn("copy",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncut",{get:function(){return this.eventCollection.getOn("cut")},set:function(t){this.eventCollection.setOn("cut",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpaste",{get:function(){return this.eventCollection.getOn("paste")},set:function(t){this.eventCollection.setOn("paste",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onabort",{get:function(){return this.eventCollection.getOn("abort")},set:function(t){this.eventCollection.setOn("abort",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationcancel",{get:function(){return this.eventCollection.getOn("animationcancel")},set:function(t){this.eventCollection.setOn("animationcancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationend",{get:function(){return this.eventCollection.getOn("animationend")},set:function(t){this.eventCollection.setOn("animationend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationiteration",{get:function(){return this.eventCollection.getOn("animationiteration")},set:function(t){this.eventCollection.setOn("animationiteration",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onanimationstart",{get:function(){return this.eventCollection.getOn("animationstart")},set:function(t){this.eventCollection.setOn("animationstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onauxclick",{get:function(){return this.eventCollection.getOn("auxclick")},set:function(t){this.eventCollection.setOn("auxclick",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onblur",{get:function(){return this.eventCollection.getOn("blur")},set:function(t){this.eventCollection.setOn("blur",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncanplay",{get:function(){return this.eventCollection.getOn("canplay")},set:function(t){this.eventCollection.setOn("canplay",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncanplaythrough",{get:function(){return this.eventCollection.getOn("canplaythrough")},set:function(t){this.eventCollection.setOn("canplaythrough",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onchange",{get:function(){return this.eventCollection.getOn("change")},set:function(t){this.eventCollection.setOn("change",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onclick",{get:function(){return this.eventCollection.getOn("click")},set:function(t){this.eventCollection.setOn("click",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onclose",{get:function(){return this.eventCollection.getOn("close")},set:function(t){this.eventCollection.setOn("close",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncontextmenu",{get:function(){return this.eventCollection.getOn("contextmenu")},set:function(t){this.eventCollection.setOn("contextmenu",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oncuechange",{get:function(){return this.eventCollection.getOn("cuechange")},set:function(t){this.eventCollection.setOn("cuechange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondblclick",{get:function(){return this.eventCollection.getOn("dblclick")},set:function(t){this.eventCollection.setOn("dblclick",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondrag",{get:function(){return this.eventCollection.getOn("drag")},set:function(t){this.eventCollection.setOn("drag",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragend",{get:function(){return this.eventCollection.getOn("dragend")},set:function(t){this.eventCollection.setOn("dragend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragenter",{get:function(){return this.eventCollection.getOn("dragenter")},set:function(t){this.eventCollection.setOn("dragenter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onformdata",{get:function(){return this.eventCollection.getOn("formdata")},set:function(t){this.eventCollection.setOn("formdata",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkitanimationend",{get:function(){return this.eventCollection.getOn("webkitanimationend")},set:function(t){this.eventCollection.setOn("webkitanimationend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkitanimationstart",{get:function(){return this.eventCollection.getOn("webkitanimationstart")},set:function(t){this.eventCollection.setOn("webkitanimationstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkitanimationiteration",{get:function(){return this.eventCollection.getOn("webkitanimationiteration")},set:function(t){this.eventCollection.setOn("webkitanimationiteration",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwebkittransitionend",{get:function(){return this.eventCollection.getOn("webkittransitionend")},set:function(t){this.eventCollection.setOn("webkittransitionend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onslotchange",{get:function(){return this.eventCollection.getOn("slotchange")},set:function(t){this.eventCollection.setOn("slotchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragleave",{get:function(){return this.eventCollection.getOn("dragleave")},set:function(t){this.eventCollection.setOn("dragleave",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragover",{get:function(){return this.eventCollection.getOn("dragover")},set:function(t){this.eventCollection.setOn("dragover",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondragstart",{get:function(){return this.eventCollection.getOn("dragstart")},set:function(t){this.eventCollection.setOn("dragstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondrop",{get:function(){return this.eventCollection.getOn("drop")},set:function(t){this.eventCollection.setOn("drop",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondurationchange",{get:function(){return this.eventCollection.getOn("durationchange")},set:function(t){this.eventCollection.setOn("durationchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onemptied",{get:function(){return this.eventCollection.getOn("emptied")},set:function(t){this.eventCollection.setOn("emptied",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onended",{get:function(){return this.eventCollection.getOn("ended")},set:function(t){this.eventCollection.setOn("ended",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onerror",{get:function(){return this.eventCollection.getOn("error")},set:function(t){this.eventCollection.setOn("error",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onfocus",{get:function(){return this.eventCollection.getOn("focus")},set:function(t){this.eventCollection.setOn("focus",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ongotpointercapture",{get:function(){return this.eventCollection.getOn("gotpointercapture")},set:function(t){this.eventCollection.setOn("gotpointercapture",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oninput",{get:function(){return this.eventCollection.getOn("input")},set:function(t){this.eventCollection.setOn("input",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oninvalid",{get:function(){return this.eventCollection.getOn("invalid")},set:function(t){this.eventCollection.setOn("invalid",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onkeydown",{get:function(){return this.eventCollection.getOn("keydown")},set:function(t){this.eventCollection.setOn("keydown",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onkeypress",{get:function(){return this.eventCollection.getOn("keypress")},set:function(t){this.eventCollection.setOn("keypress",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onkeyup",{get:function(){return this.eventCollection.getOn("keyup")},set:function(t){this.eventCollection.setOn("keyup",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onload",{get:function(){return this.eventCollection.getOn("load")},set:function(t){this.eventCollection.setOn("load",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onloadeddata",{get:function(){return this.eventCollection.getOn("loadeddata")},set:function(t){this.eventCollection.setOn("loadeddata",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onloadedmetadata",{get:function(){return this.eventCollection.getOn("loadedmetadata")},set:function(t){this.eventCollection.setOn("loadedmetadata",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onloadstart",{get:function(){return this.eventCollection.getOn("loadstart")},set:function(t){this.eventCollection.setOn("loadstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onlostpointercapture",{get:function(){return this.eventCollection.getOn("lostpointercapture")},set:function(t){this.eventCollection.setOn("lostpointercapture",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmousedown",{get:function(){return this.eventCollection.getOn("mousedown")},set:function(t){this.eventCollection.setOn("mousedown",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseenter",{get:function(){return this.eventCollection.getOn("mouseenter")},set:function(t){this.eventCollection.setOn("mouseenter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseleave",{get:function(){return this.eventCollection.getOn("mouseleave")},set:function(t){this.eventCollection.setOn("mouseleave",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmousemove",{get:function(){return this.eventCollection.getOn("mousemove")},set:function(t){this.eventCollection.setOn("mousemove",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseout",{get:function(){return this.eventCollection.getOn("mouseout")},set:function(t){this.eventCollection.setOn("mouseout",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseover",{get:function(){return this.eventCollection.getOn("mouseover")},set:function(t){this.eventCollection.setOn("mouseover",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onmouseup",{get:function(){return this.eventCollection.getOn("mouseup")},set:function(t){this.eventCollection.setOn("mouseup",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpause",{get:function(){return this.eventCollection.getOn("pause")},set:function(t){this.eventCollection.setOn("pause",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onplay",{get:function(){return this.eventCollection.getOn("play")},set:function(t){this.eventCollection.setOn("play",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onplaying",{get:function(){return this.eventCollection.getOn("playing")},set:function(t){this.eventCollection.setOn("playing",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointercancel",{get:function(){return this.eventCollection.getOn("pointercancel")},set:function(t){this.eventCollection.setOn("pointercancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerdown",{get:function(){return this.eventCollection.getOn("pointerdown")},set:function(t){this.eventCollection.setOn("pointerdown",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerenter",{get:function(){return this.eventCollection.getOn("pointerenter")},set:function(t){this.eventCollection.setOn("pointerenter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerleave",{get:function(){return this.eventCollection.getOn("pointerleave")},set:function(t){this.eventCollection.setOn("pointerleave",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointermove",{get:function(){return this.eventCollection.getOn("pointermove")},set:function(t){this.eventCollection.setOn("pointermove",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerout",{get:function(){return this.eventCollection.getOn("pointerout")},set:function(t){this.eventCollection.setOn("pointerout",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerover",{get:function(){return this.eventCollection.getOn("pointerover")},set:function(t){this.eventCollection.setOn("pointerover",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onpointerup",{get:function(){return this.eventCollection.getOn("pointerup")},set:function(t){this.eventCollection.setOn("pointerup",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onprogress",{get:function(){return this.eventCollection.getOn("progress")},set:function(t){this.eventCollection.setOn("progress",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onratechange",{get:function(){return this.eventCollection.getOn("ratechange")},set:function(t){this.eventCollection.setOn("ratechange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onreset",{get:function(){return this.eventCollection.getOn("reset")},set:function(t){this.eventCollection.setOn("reset",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onresize",{get:function(){return this.eventCollection.getOn("resize")},set:function(t){this.eventCollection.setOn("resize",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onscroll",{get:function(){return this.eventCollection.getOn("scroll")},set:function(t){this.eventCollection.setOn("scroll",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onsecuritypolicyviolation",{get:function(){return this.eventCollection.getOn("securitypolicyviolation")},set:function(t){this.eventCollection.setOn("securitypolicyviolation",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onseeked",{get:function(){return this.eventCollection.getOn("seeked")},set:function(t){this.eventCollection.setOn("seeked",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onseeking",{get:function(){return this.eventCollection.getOn("seeking")},set:function(t){this.eventCollection.setOn("seeking",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onselect",{get:function(){return this.eventCollection.getOn("select")},set:function(t){this.eventCollection.setOn("select",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onselectionchange",{get:function(){return this.eventCollection.getOn("selectionchange")},set:function(t){this.eventCollection.setOn("selectionchange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onselectstart",{get:function(){return this.eventCollection.getOn("selectstart")},set:function(t){this.eventCollection.setOn("selectstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onstalled",{get:function(){return this.eventCollection.getOn("stalled")},set:function(t){this.eventCollection.setOn("stalled",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onsubmit",{get:function(){return this.eventCollection.getOn("submit")},set:function(t){this.eventCollection.setOn("submit",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onsuspend",{get:function(){return this.eventCollection.getOn("suspend")},set:function(t){this.eventCollection.setOn("suspend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontimeupdate",{get:function(){return this.eventCollection.getOn("timeupdate")},set:function(t){this.eventCollection.setOn("timeupdate",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontoggle",{get:function(){return this.eventCollection.getOn("toggle")},set:function(t){this.eventCollection.setOn("toggle",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchcancel",{get:function(){return this.eventCollection.getOn("touchcancel")},set:function(t){this.eventCollection.setOn("touchcancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchend",{get:function(){return this.eventCollection.getOn("touchend")},set:function(t){this.eventCollection.setOn("touchend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchmove",{get:function(){return this.eventCollection.getOn("touchmove")},set:function(t){this.eventCollection.setOn("touchmove",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontouchstart",{get:function(){return this.eventCollection.getOn("touchstart")},set:function(t){this.eventCollection.setOn("touchstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitioncancel",{get:function(){return this.eventCollection.getOn("transitioncancel")},set:function(t){this.eventCollection.setOn("transitioncancel",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitionend",{get:function(){return this.eventCollection.getOn("transitionend")},set:function(t){this.eventCollection.setOn("transitionend",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitionrun",{get:function(){return this.eventCollection.getOn("transitionrun")},set:function(t){this.eventCollection.setOn("transitionrun",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ontransitionstart",{get:function(){return this.eventCollection.getOn("transitionstart")},set:function(t){this.eventCollection.setOn("transitionstart",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onvolumechange",{get:function(){return this.eventCollection.getOn("volumechange")},set:function(t){this.eventCollection.setOn("volumechange",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwaiting",{get:function(){return this.eventCollection.getOn("waiting")},set:function(t){this.eventCollection.setOn("waiting",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onwheel",{get:function(){return this.eventCollection.getOn("wheel")},set:function(t){this.eventCollection.setOn("wheel",t)},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(t,e,n){this.eventCollection.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){this.eventCollection.removeEventListener(t,e,n)},t.CANVAS_UNITS=fn.CANVAS,t.CSS_UNITS=fn.CSS,t}()},225:(t,e,n)=>{var{InfiniteCanvas:o}=n(582);t.exports=o}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(225)})()));